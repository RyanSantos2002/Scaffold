<!DOCTYPE html>

<html lang="pt-br">

<head>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="" name="description" />
    <meta content="" name="author" />

    <link rel="shortcut icon" href="/Content/gestao/img/erpm8.cloud/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="/Content/gestao/css/erpm8.cloud.css" />
    <link href="/content/gestao/css/fonts-google.css" rel="stylesheet" type="text/css" />


    <title></title>

    <link href="/Content/css?v=44cXEMeyWpSzdAIeHLAvKSNFkaDY_eTVAodzoRj1AH01" rel="stylesheet"/>

    <link href="/Content/kendoui?v=8FQkp9wlkRC_INqsNDysVcNOhtwdGQLrEmA9pjlfUPU1" rel="stylesheet"/>

    <link href="/Content/plugins?v=1Im-fxuR_6CgiLv6x5swnaiRtfvZN9xt6uHkwIIthSw1" rel="stylesheet"/>

    <link href="/Content/assets/pages/css/style?v=ii7WDdmHOVDFfYHGRkuQFt4WxiQQoiBu_hfeqFOtbiI1" rel="stylesheet"/>

    <link href="/Content/datatables/estilo?v=9dGHRSMv36Iw_b7SKXgv-luVLlBmLRnD3VpgJaV0JdY1" rel="stylesheet"/>

    <link href="/Content/gestaoui?v=zDs5QJa7d8rIcJ3eBdIGLIWAQCL3Kibxor1OSG_moso1" rel="stylesheet"/>


    <style>

        .ui-dialog.ui-widget.ui-widget-content.ui-corner-all.ui-front.ui-draggable.ui-resizable {
            position: absolute;
            height: auto;
            width: 105px !important;
            top: 362px;
            left: 810px;
            display: block;
            z-index: 101;
            border-radius: 15px !important;
        }

        .ui-dialog .ui-dialog-content {
            padding: 8px 19px;
            overflow: hidden !important;
        }

        .display-none.ajax-loading.ui-dialog-content.ui-widget-content {
            height: 85px !important;
        }

        .portlet-form .form-body, .form .form-body {
            padding: 7px;
        }

        .has-error .k-picker-wrap.k-state-default {
            border-color: red;
        }

        @-webkit-keyframes spin {
            0% {
                -webkit-transform: rotate(0deg);
            }

            100% {
                -webkit-transform: rotate(360deg);
            }
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .font-size-14 {
            font-size: 14px !important;
        }

        .new-bootbox .modal-body {
            padding: 25px !important;
        }

        .new-bootbox .modal-footer {
            padding: 15px !important;
        }

        .new-bootbox .modal-header {
            border: none;
            padding-top: 14px;
            padding-left: 25px;
            padding-bottom: 0px;
        }

    </style>

    

    <script src="/bundles/js?v=46HKxNs44A7rYfiH5YpfaIL5fwqQKnOOeoUvHHWdhUY1"></script>

    <script src="/bundles/linguagem?v=SitQANjM1XgNlIlMzkHvpjpIw3BQKBoSVKm0MQokDaA1"></script>

    <script src="/bundles/kendoui?v=fuBbpi-6Of2lVyiiJ7RTeXjBJTpqxGpA02OjCzmGOqc1"></script>

    <script src="/bundles/gestaoui?v=TuXL0yZGRMw-GPSWLUL8c737jvxSV2TXWgteq11PwtI1"></script>


    <script src="/Content/gestao/scripts/app.js?v=0.6"></script>
        
    <link href="/Content/gestao-new-face-css?v=DyWBvp4iJRfZELKaKHzNWg-V7v4bNGcpSJPxwiwzPIw1" rel="stylesheet"/>

    <script src="/Content/gestao-new-face-js?v=LWhBTPK1KmDVpjLt2fz9DZVq8XWClupUwbJ-WA2wvQk1"></script>

    
    <!-- START_ANALYTICS -->
    <script async src='https://www.googletagmanager.com/gtag/js?id=UA-114910117-5'></script><script>window.dataLayer = window.dataLayer || []; function gtag(){ dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-114910117-5'); </script>
    <!-- END_ANALYTICS -->

</head>

<body class="page-content-white --nfbody" style="overflow:hidden">

    <div class="page-container">

        <div class="page-content-wrapper">

            <div class="display-none ajax-loading  " id="ajaxLoadLancamentoEntradaCaixas" style="text-align: center; height: 50px !important"><div style="padding-left:10px;width: 64px;height: 64px;-webkit - animation: spin 2s linear infinite;animation: spin 2s linear infinite; background-image: url(/Content/gestao/img/erpm8.cloud/loader.png);"></div></div><script type="text/javascript">$("document").ready(function () {
    
    $("#ajaxLoadLancamentoEntradaCaixas").dialog({
        appendTo: $("#ajaxLoadLancamentoEntradaCaixas").parent(),
        height: 56,
        modal: true,
        autoOpen: false,
        show: { effect: "blind", duration: 250 },
        hide: { effect: "explode", duration: 250 }
    });

    $("aria-describedby[ajaxLoadLancamentoEntradaCaixas], .ui-dialog-titlebar").hide();

});</script>
<div class="pagina-form  " id="frmLancamentoPortlet"><div class="portlet light m8-bordered-portlet portlet-fit  "><div class="portlet-title m8-portlet-title  "><div class="col-md-8 col-sm-8 barra-submit  "><a class="btn btn-submit-formulario tooltips frmLancamentoSubmit "><img src="/Content/gestao/img/salvar.png" style="height:27px;"></img><label class=" m8-label-botoes-formulario ">Salvar</label></a><a class="btn btn-submit-formulario tooltips frmLancamentoSubmitNew " data-pos-submit="novo" href="/treinamento/Financeiro/LancamentoEntradaCaixa/788"><img src="/Content/gestao/img/salvar-novo.png" style="height:27px;"></img><label class=" m8-label-botoes-formulario ">Salvar e novo</label></a><a class="btn btn-submit-formulario tooltips frmLancamentoSubmitClose " data-pos-submit="fechar" href="/treinamento/Financeiro/LancamentoEntradaCaixa/788"><img src="/Content/gestao/img/salvar-fechar.png" style="height:27px;"></img><label class=" m8-label-botoes-formulario ">Salvar e fechar</label></a><a class="btn btn-config-campos tooltips header-action-button frmLancamentoConfigCampos " data-placement="bottom" onclick="ModalConfigCampos(&#39;frmLancamento&#39;, &#39;/treinamento/Sistema/ConfigCamposModal&#39;, &#39;/treinamento/Sistema/SaveConfigCampos&#39;, &#39;/treinamento/Sistema/ListarCamposOcultos&#39;)" title="Configurar Campos"><img src="/Content/gestao/img/configurar-campos.svg" style="height:16px;"></img></a><a class="btn btn-permissoes-acessos tooltips header-action-button frmLancamentoPermissoesAcessos " data-placement="bottom" onclick="ModalPermissoesAcessos(&#39;/treinamento/Sistema/PermissoesAcessos&#39;, &#39;treinamento&#39;)" title="Usuários/Grupos Com Acesso"><img src="/Content/gestao/img/visualizar-permissoes.svg" style="height:16px;"></img></a><a class="btn btn-log tooltips header-action-button frmLancamentoLog " data-placement="bottom" onclick="ModalLog(&#39;frmLancamento&#39;, &#39;Lancamento&#39;, &#39;&#39;, &#39;/treinamento/Cadastro/LogOperacoes&#39;)" title="Visualizar logs"><img src="/Content/gestao/img/visualizar-logs.svg" style="height:16px;"></img></a><a class="btn btn-tabela-db tooltips header-action-button frmLancamentoTabelaDB " data-placement="bottom" onclick="MensagemNomeTabela(&#39;frmLancamento&#39;, &#39;Lancamento&#39;, &#39;&#39;, &#39;/treinamento/Sistema/ObterNomeTabela&#39;)" title="Tabela Banco Dados"><img src="/Content/gestao/img/visualizar-tabela.svg" style="height:16px;"></img></a><div class="hide caption font-green-dark "><i class="font-green-dark"></i><span class=" caption-subject bold uppercase ">Cadastro de Entrada Caixa</span><span class=" caption-helper "></span></div></div><div class="form-actions top m8-toolbar  "><div class="btn-set pull-right  "><div class="btn-group  "><a class=" btn m8-btn-acoes " data-toggle="dropdown" style="height: 29px;">Ações <i class=" fa-angle-down fa"></i></a><ul class=" dropdown-menu pull-right m8-acoes-formulario "><li><a class="m8-acoes-formulario green-meadow m8-acoes-formulario " href="javascript:;" id="btnCopiarLancamento333915" onclick="ClickCopiarLancamento(&#39;btnCopiarLancamento333915&#39;);return false;"><i class=" fa fa-clone"></i> Copiar Registro</a></li><li><a class="m8-acoes-formulario green-meadow m8-acoes-formulario " href="javascript:;" id="btnGerarRecibo743828" onclick="lancamentoEntradaCaixa.gerarRecibo(&#39;btnGerarRecibo743828&#39;);return false;"><i class=" fa fa-flash"></i> Gerar Recibo</a></li><li><a class="m8-acoes-formulario green-meadow m8-acoes-formulario " href="javascript:;" id="btnImprimirEspelho234207" onclick="ClickImprimirEspelhoEntradaCaixa(&#39;btnImprimirEspelho234207&#39;);return false;"><i class=" icon-printer"></i> Imprimir Espelho</a></li></ul></div></div></div></div><div class="portlet-body form slimScrollDiv  " id="pnlPrincipal" style="overflow: auto;"><div class="m8-formulario  "><div id="frmLancamentoTabContent" class="tab-content">
    <div class="row">
        <div class="col-lg-2 col-md-3 col-sm-4 m8-menu-lado-esquerdo portlet-body form slimScrollDiv slimScrollMenuEsquerdo" style="overflow: auto;">
            <ul id="frmLancamentoTab" class="m8-ver-inline-menu ver-inline-menu tabbable margin-bottom-10">
                <li class="active">
                    <a href="#principalLancamentoEntradaCaixas" role="tab" data-toggle="tab" class="text-info m8-first-tab">
                        Entrada Caixa : 788
                    </a>
                </li>
                <li class="hidden" onclick="AcaoGridExecutarCliqueAba(this, ['tblDetalheLancamentoCentroCusto'], true)">
                    <a data-toggle="tab" href="#tab_centro_custo">
                        Centro de Custo
                    </a>
                </li>
                <li class="hidden">
                    <a data-toggle="tab" href="#tab_contabilizacoes">
                        Contabilizações
                    </a>
                </li>
                <li class="hidden">
                    <a data-toggle="tab" href="#tab_anexos">
                        Anexos
                    </a>
                </li>                
            </ul>
        </div>
        <div id="ContentScroll" class="slimScrollDiv" style="overflow: auto;padding-bottom: 40px;">
            <div id="frmLancamentoTabContent" class="tab-content">


                <div class="tab-pane fade in active" id="principalLancamentoEntradaCaixas">
                    <br />
                    <div>
                        <div class="m8-form-content  "><form action="/treinamento/Financeiro/LancamentoEntradaCaixaFormulario" class="form-horizontal validar-obrigatorios " data-ajax-load="#ajaxLoadLancamentoEntradaCaixa" enctype="multipart/form-data" id="frmLancamento" method="post" model-name="M8.Florestal.Visual.Web.Modelos.Financeiro.LancamentoEntradaCaixaModelo" role="form" view-name="~/Views/Financeiro/LancamentoEntradaCaixaFormulario.cshtml"><div class=" form-body "><div class="row"><div class="col-md-3"><div class="form-group  "><label class="control-label col-md-8 "><span class="font-dark bold text-default ">Código</span></label><div class="col-lg-4 col-md-4  "><input class=" form-control " data-m8-valorInicial="788" data-val="true" id="Id" name="Id" placeholder="Código identificador único" readonly="readonly" style="min-width: 100px !important;" type="text" value="788"></input><span class="field-validation-valid text-danger" data-valmsg-for="Id" data-valmsg-replace="true"></span></div></div></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">ModeloBase.ModeloJson.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-val="true" hidden="hidden" id="ModeloJson" name="ModeloJson" placeholder="ModeloBase.ModeloJson.Descricao" tabindex="-1" type="hidden"></input><span class="field-validation-valid text-danger" data-valmsg-for="ModeloJson" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">ModeloBase.ModeloFormulario.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-val="true" hidden="hidden" id="ModeloFormulario" name="ModeloFormulario" placeholder="ModeloBase.ModeloFormulario.Descricao" tabindex="-1" type="hidden"></input><span class="field-validation-valid text-danger" data-valmsg-for="ModeloFormulario" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">LancamentoEntradaCaixaModelo.ImovelRuralNome.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-val="true" hidden="hidden" id="ImovelRuralNome" name="ImovelRuralNome" placeholder="LancamentoEntradaCaixaModelo.ImovelRuralNome.Descricao" tabindex="-1" type="hidden"></input><span class="field-validation-valid text-danger" data-valmsg-for="ImovelRuralNome" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">ModeloBase.TabelaBancoDados.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-val="true" hidden="hidden" id="TabelaBancoDados" name="TabelaBancoDados" placeholder="ModeloBase.TabelaBancoDados.Descricao" tabindex="-1" type="hidden"></input><span class="field-validation-valid text-danger" data-valmsg-for="TabelaBancoDados" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 "><span class="font-dark bold text-default ">Estabelecimento</span></label><div class="col-lg-6 col-md-6  "><div class="input-group  "><select class="EmpresaId150271 form-control " data-m8-valorInicial="2" data-obrigatorio="true" data-val="true" id="EmpresaId" name="EmpresaId" placeholder="Estabelecimento" value="2"><option selected="selected" value="2">2 - ESTABELECIMENTO TESTE - 2 - 53042270000121</option></select><span class="input-group-btn text-default "><a class="btn btn-primary " data-placement="top" data-url_dados="/treinamento/Pessoa/EmpresasListaSelecaoDetalhes" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Pessoa/EmpresasModal" id="btnPesquisarEmpresaId183887" tabindex="-1" title="Seleção de Estabelecimento"><i class=" fa-search fa"></i> </a><a class="btn btn-success " data-placement="top" data-url_dados="/treinamento/Pessoa/EmpresasListaSelecaoDetalhes" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Pessoa/EmpresaModal" id="btnAdicionarEmpresaId647398" tabindex="-1" title="Adicionar Estabelecimento"><i class=" fa-plus fa"></i> </a></span></div><span class="field-validation-valid text-danger" data-valmsg-for="EmpresaId" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 "><span class="font-dark bold text-default ">Pessoa</span></label><div class="col-lg-6 col-md-6  "><div class="input-group  "><select class="PessoaLancamentoId269854 form-control " data-m8-valorInicial="886080" data-obrigatorio="true" data-val="true" id="PessoaLancamentoId" name="PessoaLancamentoId" placeholder="Nome da Pessoa" value="886080"><option selected="selected" value="886080">886080 - Teste  - 56999237050</option></select><span class="input-group-btn text-default "><a class="btn btn-primary " data-placement="top" data-url_dados="/treinamento/Pessoa/PessoasListaSelecaoDetalhes" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Pessoa/ClientesModal" id="btnPesquisarPessoaLancamentoId268990" tabindex="-1" title="Seleção de Pessoa"><i class=" fa-search fa"></i> </a><a class="btn btn-success " data-placement="top" data-url_dados="/treinamento/Pessoa/PessoasListaSelecaoDetalhes" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Pessoa/ClienteModal" id="btnAdicionarPessoaLancamentoId349425" tabindex="-1" title="Adicionar Pessoa"><i class=" fa-plus fa"></i> </a></span></div><span class="field-validation-valid text-danger" data-valmsg-for="PessoaLancamentoId" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 "><span class="font-dark bold text-default ">Documento</span></label><div class="col-lg-2 col-md-3  "><input class=" form-control " data-m8-valorInicial="#COPIA#" data-val="true" id="Documento" maxlength="100" name="Documento" placeholder="Nome do Documento" type="text" value="#COPIA#"></input><span class="field-validation-valid text-danger" data-valmsg-for="Documento" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 "><span class="font-dark bold text-default ">Lançamento</span></label><div class="col-lg-2 col-md-3  "><input class="mascara-data form-control " data-m8-valorInicial="05/02/2026" data-type="data" data-val="true" id="DataLancamento" name="DataLancamento" placeholder="Data de Lançamento" value="05/02/2026"></input><span class="field-validation-valid text-danger" data-valmsg-for="DataLancamento" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 "><span class="font-dark bold text-default ">Competência</span></label><div class="col-lg-2 col-md-3  "><input class=" form-control " data-m8-valorInicial="01/07/2025 00:00:00" data-val="true" id="Competencia" name="Competencia" placeholder="Competência" type="text" value="01/07/2025 00:00:00"></input><span class="field-validation-valid text-danger" data-valmsg-for="Competencia" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 "><span class="font-dark bold text-default ">Valor</span></label><div class="col-lg-2 col-md-3  "><input class="mascara-monetario18_2 form-control " data-m8-valorInicial="200,00" data-val="true" id="ValorLancamento" name="ValorLancamento" placeholder="Valor de Lançamento" value="200,00"></input><span class="field-validation-valid text-danger" data-valmsg-for="ValorLancamento" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 "><span class="font-dark bold text-default ">Plano de Contas Financeiro</span></label><div class="col-lg-6 col-md-6  "><div class="input-group  "><select class="OperacaoFinanceiraId63986 form-control " data-m8-valorInicial="690" data-obrigatorio="true" data-val="true" id="OperacaoFinanceiraId" name="OperacaoFinanceiraId" placeholder="Plano de Contas Financeiro" value="690"><option selected="selected" value="690">690 - TESTE</option></select><span class="input-group-btn text-default "><a class="btn btn-primary " data-placement="top" data-url_dados="/treinamento/Financeiro/OperacaoFinanceirasReceberListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Financeiro/OperacaoFinanceirasModal" id="btnPesquisarOperacaoFinanceiraId657418" tabindex="-1" title="Seleção de Plano de Contas Financeiro"><i class=" fa-search fa"></i> </a><a class="btn btn-success " data-placement="top" data-url_dados="/treinamento/Financeiro/OperacaoFinanceirasReceberListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Financeiro/OperacaoFinanceiraModal" id="btnAdicionarOperacaoFinanceiraId677100" tabindex="-1" title="Adicionar Plano de Contas Financeiro"><i class=" fa-plus fa"></i> </a></span></div><span class="field-validation-valid text-danger" data-valmsg-for="OperacaoFinanceiraId" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">Meio Pagamento</label><div class="col-lg-6 col-md-6  "><div class="input-group  "><select class="MeioPagamentoId430226 form-control " data-obrigatorio="false" data-val="true" hidden="hidden" id="MeioPagamentoId" name="MeioPagamentoId" placeholder="Nome do Meio Pagamento" tabindex="-1" type="hidden"></select><span class="input-group-btn text-default "><a class="btn btn-primary " data-placement="top" data-url_dados="/treinamento/Financeiro/MeioPagamentosListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Financeiro/MeioPagamentosModal" id="btnPesquisarMeioPagamentoId949607" tabindex="-1" title="Seleção do Meio Pagamento"><i class=" fa-search fa"></i> </a></span></div><span class="field-validation-valid text-danger" data-valmsg-for="MeioPagamentoId" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 "><span class="font-dark bold text-default ">Conta Origem</span></label><div class="col-lg-6 col-md-6  "><div class="input-group  "><select class="ContaCaixaBancoOrigemId531015 form-control " data-dependencia-formulario="False" data-dependente="OperacaoFinanceiraId" data-m8-valorInicial="1" data-obrigatorio="true" data-val="true" id="ContaCaixaBancoOrigemId" name="ContaCaixaBancoOrigemId" placeholder="Conta Origem" value="1"><option selected="selected" value="1">1 - (1) A T I V O</option></select><span class="input-group-btn text-default "><a class="btn btn-primary " data-placement="top" data-url_dados="/treinamento/Contabil/ContaContabeisLancamentoFinanceiroListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Contabil/ContaContabeisLancamentoFinanceiroModal" id="btnPesquisarContaCaixaBancoOrigemId820981" tabindex="-1" title="Pesquisar Conta Origem"><i class=" fa-search fa"></i> </a><a class="btn btn-success " data-placement="top" data-url_dados="/treinamento/Contabil/ContaContabeisLancamentoFinanceiroListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Contabil/ContaContabilModal" id="btnAdicionarContaCaixaBancoOrigemId613282" tabindex="-1" title="Adicionar Conta Origem"><i class=" fa-plus fa"></i> </a></span></div><span class="field-validation-valid text-danger" data-valmsg-for="ContaCaixaBancoOrigemId" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 "><span class="font-dark bold text-default ">Conta Destino</span></label><div class="col-lg-6 col-md-6  "><div class="input-group  "><select class="ContaCaixaBancoDestinoId905460 form-control " data-m8-valorInicial="25818" data-obrigatorio="true" data-val="true" id="ContaCaixaBancoDestinoId" name="ContaCaixaBancoDestinoId" placeholder="Nome Conta Destino" value="25818"><option selected="selected" value="25818">100133 - (1.0) A VISTA</option></select><span class="input-group-btn text-default "><a class="btn btn-primary " data-placement="top" data-url_dados="/treinamento/Contabil/ContaContabeisListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Contabil/ContaContabeisModal" id="btnPesquisarContaCaixaBancoDestinoId629301" tabindex="-1" title="Seleção de Conta Destino"><i class=" fa-search fa"></i> </a><a class="btn btn-success " data-placement="top" data-url_dados="/treinamento/Contabil/ContaContabeisListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Contabil/ContaContabil" id="btnAdicionarContaCaixaBancoDestinoId12068" tabindex="-1" title="Adicionar Conta Destino"><i class=" fa-plus fa"></i> </a></span></div><span class="field-validation-valid text-danger" data-valmsg-for="ContaCaixaBancoDestinoId" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 "><span class="font-dark bold text-default ">Histórico Contábil</span></label><div class="col-lg-6 col-md-6  "><div class="input-group  "><select class="HistoricoContabilId110176 form-control " data-m8-valorInicial="22" data-obrigatorio="true" data-val="true" id="HistoricoContabilId" name="HistoricoContabilId" placeholder="Nome do Histórico Contábil" value="22"><option selected="selected" value="22">22 - Depreciação mensal</option></select><span class="input-group-btn text-default "><a class="btn btn-primary " data-placement="top" data-url_dados="/treinamento/Contabil/HistoricosContabeisListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Contabil/HistoricoContabeisModal" id="btnPesquisarHistoricoContabilId540827" tabindex="-1" title="Seleção de Histórico Contábil"><i class=" fa-search fa"></i> </a><a class="btn btn-success " data-placement="top" data-url_dados="/treinamento/Contabil/HistoricosContabeisListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Contabil/HistoricoContabilModal" id="btnAdicionarHistoricoContabilId633714" tabindex="-1" title="Adicionar Histórico Contábil"><i class=" fa-plus fa"></i> </a></span></div><span class="field-validation-valid text-danger" data-valmsg-for="HistoricoContabilId" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 "><span class="font-dark bold text-default ">Espécie</span></label><div class="col-lg-6 col-md-6  "><div class="input-group  "><select class="EspecieId936531 form-control " data-m8-valorInicial="2" data-obrigatorio="true" data-val="true" id="EspecieId" name="EspecieId" placeholder="Espécie" value="2"><option selected="selected" value="2">2 - DUPLICATA MERCANTIL</option></select><span class="input-group-btn text-default "><a class="btn btn-primary " data-placement="top" data-url_dados="/treinamento/Financeiro/EspecieTitulosListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Financeiro/EspecieTitulosModal" id="btnPesquisarEspecieId796150" tabindex="-1" title="Seleção de Espécie"><i class=" fa-search fa"></i> </a><a class="btn btn-success " data-placement="top" data-url_dados="/treinamento/Financeiro/EspecieTitulosListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Financeiro/EspecieTituloModal" id="btnAdicionarEspecieId686910" tabindex="-1" title="Adicionar Espécie"><i class=" fa-plus fa"></i> </a></span></div><span class="field-validation-valid text-danger" data-valmsg-for="EspecieId" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 ">Projeto</label><div class="col-lg-6 col-md-6  "><div class="input-group  "><select class="ProjetoExecucaoId19426 form-control " data-obrigatorio="false" data-val="true" id="ProjetoExecucaoId" name="ProjetoExecucaoId" placeholder="Projeto"></select><span class="input-group-btn text-default "><a class="btn btn-primary " data-placement="top" data-url_dados="/treinamento/Projetos/ProjetoExecucaoVincularListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Projetos/ProjetoExecucaoVincularModal" id="btnPesquisarProjetoExecucaoId668694" tabindex="-1" title="Seleção do Projeto"><i class=" fa-search fa"></i> </a><a class="btn btn-success " data-placement="top" data-url_dados="/treinamento/Projetos/ProjetoExecucaoVincularListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Projetos/ProjetoExecucao" id="btnAdicionarProjetoExecucaoId872009" tabindex="-1" title="Adicionar Projeto"><i class=" fa-plus fa"></i> </a></span></div><span class="field-validation-valid text-danger" data-valmsg-for="ProjetoExecucaoId" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 ">Item Projeto</label><div class="col-lg-6 col-md-6  "><div class="input-group  "><select class="ProjetoExecucaoTarefaItemId550633 form-control " data-dependencia-formulario="False" data-dependente="ProjetoExecucaoId" data-obrigatorio="false" data-val="true" id="ProjetoExecucaoTarefaItemId" name="ProjetoExecucaoTarefaItemId" placeholder="Item do Projeto"></select><span class="input-group-btn text-default "><a class="btn btn-primary " data-placement="top" data-url_dados="/treinamento/Projetos/ProjetoExecucaoTarefasItensVincularListaBloquearVinculoProjetoSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Projetos/ProjetoExecucaoTarefasItensVincularModal" id="btnPesquisarProjetoExecucaoTarefaItemId636256" tabindex="-1" title="Seleção Item do Projeto"><i class=" fa-search fa"></i> </a></span></div><span class="field-validation-valid text-danger" data-valmsg-for="ProjetoExecucaoTarefaItemId" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 ">Centro de Custo</label><div class="col-lg-6 col-md-6  "><div class="input-group  "><select class="CentroCustoId720043 form-control " data-dependencia-formulario="False" data-dependente="ContaCaixaBancoDestinoId" data-obrigatorio="false" data-val="true" id="CentroCustoId" name="CentroCustoId" placeholder="Centro de Custo"></select><span class="input-group-btn text-default "><a class="btn btn-primary " data-placement="top" data-url_dados="/treinamento/Contabil/CentrodeCustosLancamentoFinanceiroListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Contabil/CentrodeCustosLancamentoFinanceiroModal" id="btnPesquisarCentroCustoId234279" tabindex="-1" title="Pesquisar Centro de Custo"><i class=" fa-search fa"></i> </a><a class="btn btn-success " data-placement="top" data-url_dados="/treinamento/Contabil/CentrodeCustosLancamentoFinanceiroListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Contabil/CentroCusto" id="btnAdicionarCentroCustoId558056" tabindex="-1" title="Adicionar Centro de Custo"><i class=" fa-plus fa"></i> </a></span></div><span class="field-validation-valid text-danger" data-valmsg-for="CentroCustoId" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 ">Processo Importação</label><div class="col-lg-6 col-md-6  "><div class="input-group  "><select class="ProcessoImportacaoId448871 form-control " data-obrigatorio="false" data-val="true" id="ProcessoImportacaoId" name="ProcessoImportacaoId" placeholder="Processo Importação"></select><span class="input-group-btn text-default "><a class="btn btn-primary " data-placement="top" data-url_dados="/treinamento/Compras/ProcessoImportacaoComexListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Compras/ProcessoImportacaoComexModal" id="btnPesquisarProcessoImportacaoId655707" tabindex="-1" title="Pesquisar Processo Importação"><i class=" fa-search fa"></i> </a><a class="btn btn-success " data-placement="top" data-url_dados="/treinamento/Compras/ProcessoImportacaoComexListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Compras/ProcessoImportacaoComex" id="btnAdicionarProcessoImportacaoId591721" tabindex="-1" title="Adicionar Processo Importação"><i class=" fa-plus fa"></i> </a></span></div><span class="field-validation-valid text-danger" data-valmsg-for="ProcessoImportacaoId" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 ">Imóvel Rural</label><div class="col-lg-6 col-md-6  "><div class="input-group  "><select class="ImovelRuralId840744 form-control " data-obrigatorio="false" data-val="true" id="ImovelRuralId" name="ImovelRuralId" placeholder="Imóvel Rural"></select><span class="input-group-btn text-default "><a class="btn btn-primary " data-placement="top" data-url_dados="/treinamento/Cadastro/ImovelRuralListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Cadastro/ImoveisRuraisModal" id="btnPesquisarImovelRuralId512453" tabindex="-1" title="Pesquisar Imóvel Rural"><i class=" fa-search fa"></i> </a><a class="btn btn-success " data-placement="top" data-url_dados="/treinamento/Cadastro/ImovelRuralListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Cadastro/ImovelRural" id="btnAdicionarImovelRuralId518623" tabindex="-1" title="Adicionar Imóvel Rural"><i class=" fa-plus fa"></i> </a></span></div><span class="field-validation-valid text-danger" data-valmsg-for="ImovelRuralId" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 ">Tipo Documento</label><div class="col-lg-3 col-md-3  "><select class=" form-control " data-val="true" id="TipoDocumento" name="TipoDocumento" placeholder="Tipo Documento"><option selected="selected"></option><option value="1">1 - Nota Fiscal</option><option value="2">2 – Fatura</option><option value="3">3 – Recibo</option><option value="4">4 – Contrato</option><option value="5">5 - Folha de Pagamento</option><option value="6">6 - Outros</option></select><span class="field-validation-valid text-danger" data-valmsg-for="TipoDocumento" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 ">Complemento</label><div class="col-lg-6 col-md-6  "><TextArea class=" form-control " data-val="true" id="Complemento" maxlength="500" name="Complemento" placeholder="Complemento"></TextArea><span class="field-validation-valid text-danger" data-valmsg-for="Complemento" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 ">Observação</label><div class="col-lg-6 col-md-6  "><TextArea class="envia-formulario form-control " data-val="true" id="Observacao" maxlength="500" name="Observacao" placeholder="Observação"></TextArea><span class="field-validation-valid text-danger" data-valmsg-for="Observacao" data-valmsg-replace="true"></span></div></div></div><div class=" form-actions right m8-form "><a class="btn btn-submit-formulario tooltips frmLancamentoSubmit hide "><img src="/Content/gestao/img/salvar.png" style="height:27px;"></img><label class=" m8-label-botoes-formulario ">Salvar</label></a><a class="btn btn-submit-formulario tooltips frmLancamentoSubmitClose hide " data-pos-submit="fechar" href="/treinamento/Financeiro/LancamentoEntradaCaixa/788"><img src="/Content/gestao/img/salvar-fechar.png" style="height:27px;"></img><label class=" m8-label-botoes-formulario ">Salvar e fechar</label></a><a class="btn btn-submit-formulario tooltips frmLancamentoSubmitNew hide " data-pos-submit="novo" href="/treinamento/Financeiro/LancamentoEntradaCaixa/788"><img src="/Content/gestao/img/salvar-novo.png" style="height:27px;"></img><label class=" m8-label-botoes-formulario ">Salvar e novo</label></a><a class="btn btn-log tooltips header-action-button frmLancamentoLog hide " data-placement="bottom" onclick="ModalLog(&#39;frmLancamento&#39;, &#39;Lancamento&#39;, &#39;&#39;, &#39;/treinamento/Cadastro/LogOperacoes&#39;)" title="Visualizar logs"><img src="/Content/gestao/img/visualizar-logs.svg" style="height:16px;"></img></a><a class="btn btn-permissoes-acessos tooltips header-action-button frmLancamentoPermissoesAcessos hide " data-placement="bottom" onclick="ModalPermissoesAcessos(&#39;/treinamento/Sistema/PermissoesAcessos&#39;, &#39;treinamento&#39;)" title="Usuários/Grupos Com Acesso"><img src="/Content/gestao/img/visualizar-permissoes.svg" style="height:16px;"></img></a><a class="btn btn-tabela-db tooltips header-action-button frmLancamentoTabelaDB hide " data-placement="bottom" onclick="MensagemNomeTabela(&#39;frmLancamento&#39;, &#39;Lancamento&#39;, &#39;&#39;, &#39;/treinamento/Sistema/ObterNomeTabela&#39;)" title="Tabela Banco Dados"><img src="/Content/gestao/img/visualizar-tabela.svg" style="height:16px;"></img></a><a class="btn btn-config-campos tooltips header-action-button frmLancamentoConfigCampos hide " data-placement="bottom" onclick="ModalConfigCampos(&#39;frmLancamento&#39;, &#39;/treinamento/Sistema/ConfigCamposModal&#39;, &#39;/treinamento/Sistema/SaveConfigCampos&#39;, &#39;/treinamento/Sistema/ListarCamposOcultos&#39;)" title="Configurar Campos"><img src="/Content/gestao/img/configurar-campos.svg" style="height:16px;"></img></a></div></form><script type="text/javascript">$("document").ready(function () {

    (function ($) {

        "use strict";
        $.fn.select2.defaults.set("theme", "bootstrap");

    })(jQuery);

    function getUrlSelect2() {

        var urlDinamica = getUrlSelect2Personalizada(".OperacaoFinanceiraId63986");
        if (urlDinamica != null && urlDinamica != undefined && urlDinamica != "")
            return urlDinamica;

        let dataAttrSelect2 = "data-" + ".OperacaoFinanceiraId63986".replace(".", "").replace(/[0-9]/g, '') + "-urlselect";
        let urlSelect = $("div[" + dataAttrSelect2 + "]:first");

        if (urlSelect.length == 1)
            return urlSelect.attr(dataAttrSelect2);
        
        return "/treinamento/Financeiro/OperacaoFinanceirasReceberListaSelecao";

    }

    $(".OperacaoFinanceiraId63986").select2({
        language: "pt-BR",
        width: "off",
        openOnEnter: false,
        placeholder: "Plano de Contas Financeiro",
        minimumInputLength: 1,
        allowClear: true,
        ajax: {
            quietMillis: 1000,
            url: getUrlSelect2(),
            dataType: 'json',
            delay: 250,
            type: "POST",
            data: function (params) {

                let camposDependencia = ($(".OperacaoFinanceiraId63986").attr("data-dependente") ? $(".OperacaoFinanceiraId63986").attr("data-dependente") : "");
                let valoresDependencia = "";

                if ($(".OperacaoFinanceiraId63986").attr("data-valordependente"))
                    valoresDependencia = $(".OperacaoFinanceiraId63986").attr("data-valordependente")                
                else {

                    if (camposDependencia.indexOf(";") > -1) {

                        let qtdeDependencias = camposDependencia.split(";");
                        valoresDependencia = "";

                        for (let i = 0; i < qtdeDependencias.length; i++) 
                            valoresDependencia += $(".OperacaoFinanceiraId63986 ").closest("form").find("[name=" + qtdeDependencias[i] + "]").val() + ";";
                        

                    } else 
                        valoresDependencia = ($(".OperacaoFinanceiraId63986").attr("data-dependente") ? $(".OperacaoFinanceiraId63986").closest("form").find("[name=" + $(".OperacaoFinanceiraId63986").attr("data-dependente") + "]").val() : "");
                    
                }

                if (Array.isArray(valoresDependencia))
                    valoresDependencia = valoresDependencia.join(";");

                return {
                    pesquisa: params.term,
                    pagina: params.page == undefined ? 0 : params.page - 1,
                    campoDependente: camposDependencia,
                    valorDependente: valoresDependencia
                };

            },
            processResults: function (dados) {
                return {
                    results: dados.Retorno,
                    pagination: {
                        more: dados.ContinuarPesquisando
                    }
                };
            },
            cache: true
        },
        escapeMarkup: function (markup) {
            return markup;
        }, 
        minimumInputLength: 1,
        templateResult: undefined,
        templateSelection: undefined
    });

    $('.OperacaoFinanceiraId63986').on("select2:select", function (e) {

        var valor = $(this).find("option[value='" + $(this).val() + "']").text();
        $(".OperacaoFinanceiraId63986").closest("form").find("[name='OperacaoFinanceiraNome']").val(valor);

    });

    $('.OperacaoFinanceiraId63986').on("select2:unselect", function (e) {

        $(".OperacaoFinanceiraId63986").closest("form").find("[name='OperacaoFinanceiraNome']").val("");
        $(".OperacaoFinanceiraId63986").find('option[value="' + e.params.data.id + '"]').remove().end();

    });
        
    $('.OperacaoFinanceiraId63986').on("select2:close", function (e) {
        var formularioSeletor = "#" + $(this).closest("form").attr('id');
        var id = $(this).attr("id");
        var obrigatorio = $(this).attr("data-obrigatorio");
        var eventoTeclado = event.which;
        setTimeout(function () {

            if ((eventoTeclado == 27 || eventoTeclado == 13) && (obrigatorio == "false" || $("#" + id).val())) {

                AvancarFocus(e, formularioSeletor, $(formularioSeletor).find("#" + id), true);
                e.stopPropagation();

            }

        }, 600);

    });

});</script><script type="text/javascript">$("document").ready(function () {

    (function ($) {

        "use strict";
        $.fn.select2.defaults.set("theme", "bootstrap");

    })(jQuery);

    function getUrlSelect2() {

        var urlDinamica = getUrlSelect2Personalizada(".MeioPagamentoId430226");
        if (urlDinamica != null && urlDinamica != undefined && urlDinamica != "")
            return urlDinamica;

        let dataAttrSelect2 = "data-" + ".MeioPagamentoId430226".replace(".", "").replace(/[0-9]/g, '') + "-urlselect";
        let urlSelect = $("div[" + dataAttrSelect2 + "]:first");

        if (urlSelect.length == 1)
            return urlSelect.attr(dataAttrSelect2);
        
        return "/treinamento/Financeiro/MeioPagamentosListaSelecao";

    }

    $(".MeioPagamentoId430226").select2({
        language: "pt-BR",
        width: "off",
        openOnEnter: false,
        placeholder: "Nome do Meio Pagamento",
        minimumInputLength: 1,
        allowClear: true,
        ajax: {
            quietMillis: 1000,
            url: getUrlSelect2(),
            dataType: 'json',
            delay: 250,
            type: "POST",
            data: function (params) {

                let camposDependencia = ($(".MeioPagamentoId430226").attr("data-dependente") ? $(".MeioPagamentoId430226").attr("data-dependente") : "");
                let valoresDependencia = "";

                if ($(".MeioPagamentoId430226").attr("data-valordependente"))
                    valoresDependencia = $(".MeioPagamentoId430226").attr("data-valordependente")                
                else {

                    if (camposDependencia.indexOf(";") > -1) {

                        let qtdeDependencias = camposDependencia.split(";");
                        valoresDependencia = "";

                        for (let i = 0; i < qtdeDependencias.length; i++) 
                            valoresDependencia += $(".MeioPagamentoId430226 ").closest("form").find("[name=" + qtdeDependencias[i] + "]").val() + ";";
                        

                    } else 
                        valoresDependencia = ($(".MeioPagamentoId430226").attr("data-dependente") ? $(".MeioPagamentoId430226").closest("form").find("[name=" + $(".MeioPagamentoId430226").attr("data-dependente") + "]").val() : "");
                    
                }

                if (Array.isArray(valoresDependencia))
                    valoresDependencia = valoresDependencia.join(";");

                return {
                    pesquisa: params.term,
                    pagina: params.page == undefined ? 0 : params.page - 1,
                    campoDependente: camposDependencia,
                    valorDependente: valoresDependencia
                };

            },
            processResults: function (dados) {
                return {
                    results: dados.Retorno,
                    pagination: {
                        more: dados.ContinuarPesquisando
                    }
                };
            },
            cache: true
        },
        escapeMarkup: function (markup) {
            return markup;
        }, 
        minimumInputLength: 1,
        templateResult: undefined,
        templateSelection: undefined
    });

    $('.MeioPagamentoId430226').on("select2:select", function (e) {

        var valor = $(this).find("option[value='" + $(this).val() + "']").text();
        $(".MeioPagamentoId430226").closest("form").find("[name='MeioPagamentoNome']").val(valor);

    });

    $('.MeioPagamentoId430226').on("select2:unselect", function (e) {

        $(".MeioPagamentoId430226").closest("form").find("[name='MeioPagamentoNome']").val("");
        $(".MeioPagamentoId430226").find('option[value="' + e.params.data.id + '"]').remove().end();

    });
        
    $('.MeioPagamentoId430226').on("select2:close", function (e) {
        var formularioSeletor = "#" + $(this).closest("form").attr('id');
        var id = $(this).attr("id");
        var obrigatorio = $(this).attr("data-obrigatorio");
        var eventoTeclado = event.which;
        setTimeout(function () {

            if ((eventoTeclado == 27 || eventoTeclado == 13) && (obrigatorio == "false" || $("#" + id).val())) {

                AvancarFocus(e, formularioSeletor, $(formularioSeletor).find("#" + id), true);
                e.stopPropagation();

            }

        }, 600);

    });

});</script><script type="text/javascript">$("document").ready(function () {

    (function ($) {

        "use strict";
        $.fn.select2.defaults.set("theme", "bootstrap");

    })(jQuery);

    function getUrlSelect2() {

        var urlDinamica = getUrlSelect2Personalizada(".ContaCaixaBancoOrigemId531015");
        if (urlDinamica != null && urlDinamica != undefined && urlDinamica != "")
            return urlDinamica;

        let dataAttrSelect2 = "data-" + ".ContaCaixaBancoOrigemId531015".replace(".", "").replace(/[0-9]/g, '') + "-urlselect";
        let urlSelect = $("div[" + dataAttrSelect2 + "]:first");

        if (urlSelect.length == 1)
            return urlSelect.attr(dataAttrSelect2);
        
        return "/treinamento/Contabil/ContaContabeisLancamentoFinanceiroListaSelecao";

    }

    $(".ContaCaixaBancoOrigemId531015").select2({
        language: "pt-BR",
        width: "off",
        openOnEnter: false,
        placeholder: "Conta Origem",
        minimumInputLength: 1,
        allowClear: true,
        ajax: {
            quietMillis: 1000,
            url: getUrlSelect2(),
            dataType: 'json',
            delay: 250,
            type: "POST",
            data: function (params) {

                let camposDependencia = ($(".ContaCaixaBancoOrigemId531015").attr("data-dependente") ? $(".ContaCaixaBancoOrigemId531015").attr("data-dependente") : "");
                let valoresDependencia = "";

                if ($(".ContaCaixaBancoOrigemId531015").attr("data-valordependente"))
                    valoresDependencia = $(".ContaCaixaBancoOrigemId531015").attr("data-valordependente")                
                else {

                    if (camposDependencia.indexOf(";") > -1) {

                        let qtdeDependencias = camposDependencia.split(";");
                        valoresDependencia = "";

                        for (let i = 0; i < qtdeDependencias.length; i++) 
                            valoresDependencia += $(".ContaCaixaBancoOrigemId531015 ").closest("form").find("[name=" + qtdeDependencias[i] + "]").val() + ";";
                        

                    } else 
                        valoresDependencia = ($(".ContaCaixaBancoOrigemId531015").attr("data-dependente") ? $(".ContaCaixaBancoOrigemId531015").closest("form").find("[name=" + $(".ContaCaixaBancoOrigemId531015").attr("data-dependente") + "]").val() : "");
                    
                }

                if (Array.isArray(valoresDependencia))
                    valoresDependencia = valoresDependencia.join(";");

                return {
                    pesquisa: params.term,
                    pagina: params.page == undefined ? 0 : params.page - 1,
                    campoDependente: camposDependencia,
                    valorDependente: valoresDependencia
                };

            },
            processResults: function (dados) {
                return {
                    results: dados.Retorno,
                    pagination: {
                        more: dados.ContinuarPesquisando
                    }
                };
            },
            cache: true
        },
        escapeMarkup: function (markup) {
            return markup;
        }, 
        minimumInputLength: 1,
        templateResult: undefined,
        templateSelection: undefined
    });

    $('.ContaCaixaBancoOrigemId531015').on("select2:select", function (e) {

        var valor = $(this).find("option[value='" + $(this).val() + "']").text();
        $(".ContaCaixaBancoOrigemId531015").closest("form").find("[name='ContaCaixaBancoOrigemNome']").val(valor);

    });

    $('.ContaCaixaBancoOrigemId531015').on("select2:unselect", function (e) {

        $(".ContaCaixaBancoOrigemId531015").closest("form").find("[name='ContaCaixaBancoOrigemNome']").val("");
        $(".ContaCaixaBancoOrigemId531015").find('option[value="' + e.params.data.id + '"]').remove().end();

    });
        
    $('.ContaCaixaBancoOrigemId531015').on("select2:close", function (e) {
        var formularioSeletor = "#" + $(this).closest("form").attr('id');
        var id = $(this).attr("id");
        var obrigatorio = $(this).attr("data-obrigatorio");
        var eventoTeclado = event.which;
        setTimeout(function () {

            if ((eventoTeclado == 27 || eventoTeclado == 13) && (obrigatorio == "false" || $("#" + id).val())) {

                AvancarFocus(e, formularioSeletor, $(formularioSeletor).find("#" + id), true);
                e.stopPropagation();

            }

        }, 600);

    });

});</script><script type="text/javascript">$("document").ready(function () {

    (function ($) {

        "use strict";
        $.fn.select2.defaults.set("theme", "bootstrap");

    })(jQuery);

    function getUrlSelect2() {

        var urlDinamica = getUrlSelect2Personalizada(".ContaCaixaBancoDestinoId905460");
        if (urlDinamica != null && urlDinamica != undefined && urlDinamica != "")
            return urlDinamica;

        let dataAttrSelect2 = "data-" + ".ContaCaixaBancoDestinoId905460".replace(".", "").replace(/[0-9]/g, '') + "-urlselect";
        let urlSelect = $("div[" + dataAttrSelect2 + "]:first");

        if (urlSelect.length == 1)
            return urlSelect.attr(dataAttrSelect2);
        
        return "/treinamento/Contabil/ContaContabeisListaSelecao";

    }

    $(".ContaCaixaBancoDestinoId905460").select2({
        language: "pt-BR",
        width: "off",
        openOnEnter: false,
        placeholder: "Nome Conta Destino",
        minimumInputLength: 1,
        allowClear: true,
        ajax: {
            quietMillis: 1000,
            url: getUrlSelect2(),
            dataType: 'json',
            delay: 250,
            type: "POST",
            data: function (params) {

                let camposDependencia = ($(".ContaCaixaBancoDestinoId905460").attr("data-dependente") ? $(".ContaCaixaBancoDestinoId905460").attr("data-dependente") : "");
                let valoresDependencia = "";

                if ($(".ContaCaixaBancoDestinoId905460").attr("data-valordependente"))
                    valoresDependencia = $(".ContaCaixaBancoDestinoId905460").attr("data-valordependente")                
                else {

                    if (camposDependencia.indexOf(";") > -1) {

                        let qtdeDependencias = camposDependencia.split(";");
                        valoresDependencia = "";

                        for (let i = 0; i < qtdeDependencias.length; i++) 
                            valoresDependencia += $(".ContaCaixaBancoDestinoId905460 ").closest("form").find("[name=" + qtdeDependencias[i] + "]").val() + ";";
                        

                    } else 
                        valoresDependencia = ($(".ContaCaixaBancoDestinoId905460").attr("data-dependente") ? $(".ContaCaixaBancoDestinoId905460").closest("form").find("[name=" + $(".ContaCaixaBancoDestinoId905460").attr("data-dependente") + "]").val() : "");
                    
                }

                if (Array.isArray(valoresDependencia))
                    valoresDependencia = valoresDependencia.join(";");

                return {
                    pesquisa: params.term,
                    pagina: params.page == undefined ? 0 : params.page - 1,
                    campoDependente: camposDependencia,
                    valorDependente: valoresDependencia
                };

            },
            processResults: function (dados) {
                return {
                    results: dados.Retorno,
                    pagination: {
                        more: dados.ContinuarPesquisando
                    }
                };
            },
            cache: true
        },
        escapeMarkup: function (markup) {
            return markup;
        }, 
        minimumInputLength: 1,
        templateResult: undefined,
        templateSelection: undefined
    });

    $('.ContaCaixaBancoDestinoId905460').on("select2:select", function (e) {

        var valor = $(this).find("option[value='" + $(this).val() + "']").text();
        $(".ContaCaixaBancoDestinoId905460").closest("form").find("[name='ContaCaixaBancoDestinoNome']").val(valor);

    });

    $('.ContaCaixaBancoDestinoId905460').on("select2:unselect", function (e) {

        $(".ContaCaixaBancoDestinoId905460").closest("form").find("[name='ContaCaixaBancoDestinoNome']").val("");
        $(".ContaCaixaBancoDestinoId905460").find('option[value="' + e.params.data.id + '"]').remove().end();

    });
        
    $('.ContaCaixaBancoDestinoId905460').on("select2:close", function (e) {
        var formularioSeletor = "#" + $(this).closest("form").attr('id');
        var id = $(this).attr("id");
        var obrigatorio = $(this).attr("data-obrigatorio");
        var eventoTeclado = event.which;
        setTimeout(function () {

            if ((eventoTeclado == 27 || eventoTeclado == 13) && (obrigatorio == "false" || $("#" + id).val())) {

                AvancarFocus(e, formularioSeletor, $(formularioSeletor).find("#" + id), true);
                e.stopPropagation();

            }

        }, 600);

    });

});</script><script type="text/javascript">$("document").ready(function () {

    (function ($) {

        "use strict";
        $.fn.select2.defaults.set("theme", "bootstrap");

    })(jQuery);

    function getUrlSelect2() {

        var urlDinamica = getUrlSelect2Personalizada(".EspecieId936531");
        if (urlDinamica != null && urlDinamica != undefined && urlDinamica != "")
            return urlDinamica;

        let dataAttrSelect2 = "data-" + ".EspecieId936531".replace(".", "").replace(/[0-9]/g, '') + "-urlselect";
        let urlSelect = $("div[" + dataAttrSelect2 + "]:first");

        if (urlSelect.length == 1)
            return urlSelect.attr(dataAttrSelect2);
        
        return "/treinamento/Financeiro/EspecieTitulosListaSelecao";

    }

    $(".EspecieId936531").select2({
        language: "pt-BR",
        width: "off",
        openOnEnter: false,
        placeholder: "Espécie",
        minimumInputLength: 1,
        allowClear: true,
        ajax: {
            quietMillis: 1000,
            url: getUrlSelect2(),
            dataType: 'json',
            delay: 250,
            type: "POST",
            data: function (params) {

                let camposDependencia = ($(".EspecieId936531").attr("data-dependente") ? $(".EspecieId936531").attr("data-dependente") : "");
                let valoresDependencia = "";

                if ($(".EspecieId936531").attr("data-valordependente"))
                    valoresDependencia = $(".EspecieId936531").attr("data-valordependente")                
                else {

                    if (camposDependencia.indexOf(";") > -1) {

                        let qtdeDependencias = camposDependencia.split(";");
                        valoresDependencia = "";

                        for (let i = 0; i < qtdeDependencias.length; i++) 
                            valoresDependencia += $(".EspecieId936531 ").closest("form").find("[name=" + qtdeDependencias[i] + "]").val() + ";";
                        

                    } else 
                        valoresDependencia = ($(".EspecieId936531").attr("data-dependente") ? $(".EspecieId936531").closest("form").find("[name=" + $(".EspecieId936531").attr("data-dependente") + "]").val() : "");
                    
                }

                if (Array.isArray(valoresDependencia))
                    valoresDependencia = valoresDependencia.join(";");

                return {
                    pesquisa: params.term,
                    pagina: params.page == undefined ? 0 : params.page - 1,
                    campoDependente: camposDependencia,
                    valorDependente: valoresDependencia
                };

            },
            processResults: function (dados) {
                return {
                    results: dados.Retorno,
                    pagination: {
                        more: dados.ContinuarPesquisando
                    }
                };
            },
            cache: true
        },
        escapeMarkup: function (markup) {
            return markup;
        }, 
        minimumInputLength: 1,
        templateResult: undefined,
        templateSelection: undefined
    });

    $('.EspecieId936531').on("select2:select", function (e) {

        var valor = $(this).find("option[value='" + $(this).val() + "']").text();
        $(".EspecieId936531").closest("form").find("[name='EspecieNome']").val(valor);

    });

    $('.EspecieId936531').on("select2:unselect", function (e) {

        $(".EspecieId936531").closest("form").find("[name='EspecieNome']").val("");
        $(".EspecieId936531").find('option[value="' + e.params.data.id + '"]').remove().end();

    });
        
    $('.EspecieId936531').on("select2:close", function (e) {
        var formularioSeletor = "#" + $(this).closest("form").attr('id');
        var id = $(this).attr("id");
        var obrigatorio = $(this).attr("data-obrigatorio");
        var eventoTeclado = event.which;
        setTimeout(function () {

            if ((eventoTeclado == 27 || eventoTeclado == 13) && (obrigatorio == "false" || $("#" + id).val())) {

                AvancarFocus(e, formularioSeletor, $(formularioSeletor).find("#" + id), true);
                e.stopPropagation();

            }

        }, 600);

    });

});</script><script type="text/javascript">$("document").ready(function () {

    (function ($) {

        "use strict";
        $.fn.select2.defaults.set("theme", "bootstrap");

    })(jQuery);

    function getUrlSelect2() {

        var urlDinamica = getUrlSelect2Personalizada(".ProjetoExecucaoId19426");
        if (urlDinamica != null && urlDinamica != undefined && urlDinamica != "")
            return urlDinamica;

        let dataAttrSelect2 = "data-" + ".ProjetoExecucaoId19426".replace(".", "").replace(/[0-9]/g, '') + "-urlselect";
        let urlSelect = $("div[" + dataAttrSelect2 + "]:first");

        if (urlSelect.length == 1)
            return urlSelect.attr(dataAttrSelect2);
        
        return "/treinamento/Projetos/ProjetoExecucaoVincularListaSelecao";

    }

    $(".ProjetoExecucaoId19426").select2({
        language: "pt-BR",
        width: "off",
        openOnEnter: false,
        placeholder: "Projeto",
        minimumInputLength: 1,
        allowClear: true,
        ajax: {
            quietMillis: 1000,
            url: getUrlSelect2(),
            dataType: 'json',
            delay: 250,
            type: "POST",
            data: function (params) {

                let camposDependencia = ($(".ProjetoExecucaoId19426").attr("data-dependente") ? $(".ProjetoExecucaoId19426").attr("data-dependente") : "");
                let valoresDependencia = "";

                if ($(".ProjetoExecucaoId19426").attr("data-valordependente"))
                    valoresDependencia = $(".ProjetoExecucaoId19426").attr("data-valordependente")                
                else {

                    if (camposDependencia.indexOf(";") > -1) {

                        let qtdeDependencias = camposDependencia.split(";");
                        valoresDependencia = "";

                        for (let i = 0; i < qtdeDependencias.length; i++) 
                            valoresDependencia += $(".ProjetoExecucaoId19426 ").closest("form").find("[name=" + qtdeDependencias[i] + "]").val() + ";";
                        

                    } else 
                        valoresDependencia = ($(".ProjetoExecucaoId19426").attr("data-dependente") ? $(".ProjetoExecucaoId19426").closest("form").find("[name=" + $(".ProjetoExecucaoId19426").attr("data-dependente") + "]").val() : "");
                    
                }

                if (Array.isArray(valoresDependencia))
                    valoresDependencia = valoresDependencia.join(";");

                return {
                    pesquisa: params.term,
                    pagina: params.page == undefined ? 0 : params.page - 1,
                    campoDependente: camposDependencia,
                    valorDependente: valoresDependencia
                };

            },
            processResults: function (dados) {
                return {
                    results: dados.Retorno,
                    pagination: {
                        more: dados.ContinuarPesquisando
                    }
                };
            },
            cache: true
        },
        escapeMarkup: function (markup) {
            return markup;
        }, 
        minimumInputLength: 1,
        templateResult: undefined,
        templateSelection: undefined
    });

    $('.ProjetoExecucaoId19426').on("select2:select", function (e) {

        var valor = $(this).find("option[value='" + $(this).val() + "']").text();
        $(".ProjetoExecucaoId19426").closest("form").find("[name='ProjetoExecucaoNome']").val(valor);

    });

    $('.ProjetoExecucaoId19426').on("select2:unselect", function (e) {

        $(".ProjetoExecucaoId19426").closest("form").find("[name='ProjetoExecucaoNome']").val("");
        $(".ProjetoExecucaoId19426").find('option[value="' + e.params.data.id + '"]').remove().end();

    });
        
    $('.ProjetoExecucaoId19426').on("select2:close", function (e) {
        var formularioSeletor = "#" + $(this).closest("form").attr('id');
        var id = $(this).attr("id");
        var obrigatorio = $(this).attr("data-obrigatorio");
        var eventoTeclado = event.which;
        setTimeout(function () {

            if ((eventoTeclado == 27 || eventoTeclado == 13) && (obrigatorio == "false" || $("#" + id).val())) {

                AvancarFocus(e, formularioSeletor, $(formularioSeletor).find("#" + id), true);
                e.stopPropagation();

            }

        }, 600);

    });

});</script><script type="text/javascript">$("document").ready(function () {

    (function ($) {

        "use strict";
        $.fn.select2.defaults.set("theme", "bootstrap");

    })(jQuery);

    function getUrlSelect2() {

        var urlDinamica = getUrlSelect2Personalizada(".ProjetoExecucaoTarefaItemId550633");
        if (urlDinamica != null && urlDinamica != undefined && urlDinamica != "")
            return urlDinamica;

        let dataAttrSelect2 = "data-" + ".ProjetoExecucaoTarefaItemId550633".replace(".", "").replace(/[0-9]/g, '') + "-urlselect";
        let urlSelect = $("div[" + dataAttrSelect2 + "]:first");

        if (urlSelect.length == 1)
            return urlSelect.attr(dataAttrSelect2);
        
        return "/treinamento/Projetos/ProjetoExecucaoTarefasItensVincularListaBloquearVinculoProjetoSelecao";

    }

    $(".ProjetoExecucaoTarefaItemId550633").select2({
        language: "pt-BR",
        width: "off",
        openOnEnter: false,
        placeholder: "Item do Projeto",
        minimumInputLength: 1,
        allowClear: true,
        ajax: {
            quietMillis: 1000,
            url: getUrlSelect2(),
            dataType: 'json',
            delay: 250,
            type: "POST",
            data: function (params) {

                let camposDependencia = ($(".ProjetoExecucaoTarefaItemId550633").attr("data-dependente") ? $(".ProjetoExecucaoTarefaItemId550633").attr("data-dependente") : "");
                let valoresDependencia = "";

                if ($(".ProjetoExecucaoTarefaItemId550633").attr("data-valordependente"))
                    valoresDependencia = $(".ProjetoExecucaoTarefaItemId550633").attr("data-valordependente")                
                else {

                    if (camposDependencia.indexOf(";") > -1) {

                        let qtdeDependencias = camposDependencia.split(";");
                        valoresDependencia = "";

                        for (let i = 0; i < qtdeDependencias.length; i++) 
                            valoresDependencia += $(".ProjetoExecucaoTarefaItemId550633 ").closest("form").find("[name=" + qtdeDependencias[i] + "]").val() + ";";
                        

                    } else 
                        valoresDependencia = ($(".ProjetoExecucaoTarefaItemId550633").attr("data-dependente") ? $(".ProjetoExecucaoTarefaItemId550633").closest("form").find("[name=" + $(".ProjetoExecucaoTarefaItemId550633").attr("data-dependente") + "]").val() : "");
                    
                }

                if (Array.isArray(valoresDependencia))
                    valoresDependencia = valoresDependencia.join(";");

                return {
                    pesquisa: params.term,
                    pagina: params.page == undefined ? 0 : params.page - 1,
                    campoDependente: camposDependencia,
                    valorDependente: valoresDependencia
                };

            },
            processResults: function (dados) {
                return {
                    results: dados.Retorno,
                    pagination: {
                        more: dados.ContinuarPesquisando
                    }
                };
            },
            cache: true
        },
        escapeMarkup: function (markup) {
            return markup;
        }, 
        minimumInputLength: 1,
        templateResult: undefined,
        templateSelection: undefined
    });

    $('.ProjetoExecucaoTarefaItemId550633').on("select2:select", function (e) {

        var valor = $(this).find("option[value='" + $(this).val() + "']").text();
        $(".ProjetoExecucaoTarefaItemId550633").closest("form").find("[name='ProjetoExecucaoTarefaItemNome']").val(valor);

    });

    $('.ProjetoExecucaoTarefaItemId550633').on("select2:unselect", function (e) {

        $(".ProjetoExecucaoTarefaItemId550633").closest("form").find("[name='ProjetoExecucaoTarefaItemNome']").val("");
        $(".ProjetoExecucaoTarefaItemId550633").find('option[value="' + e.params.data.id + '"]').remove().end();

    });
        
    $('.ProjetoExecucaoTarefaItemId550633').on("select2:close", function (e) {
        var formularioSeletor = "#" + $(this).closest("form").attr('id');
        var id = $(this).attr("id");
        var obrigatorio = $(this).attr("data-obrigatorio");
        var eventoTeclado = event.which;
        setTimeout(function () {

            if ((eventoTeclado == 27 || eventoTeclado == 13) && (obrigatorio == "false" || $("#" + id).val())) {

                AvancarFocus(e, formularioSeletor, $(formularioSeletor).find("#" + id), true);
                e.stopPropagation();

            }

        }, 600);

    });

});</script><script type="text/javascript">$("document").ready(function () {

    (function ($) {

        "use strict";
        $.fn.select2.defaults.set("theme", "bootstrap");

    })(jQuery);

    function getUrlSelect2() {

        var urlDinamica = getUrlSelect2Personalizada(".CentroCustoId720043");
        if (urlDinamica != null && urlDinamica != undefined && urlDinamica != "")
            return urlDinamica;

        let dataAttrSelect2 = "data-" + ".CentroCustoId720043".replace(".", "").replace(/[0-9]/g, '') + "-urlselect";
        let urlSelect = $("div[" + dataAttrSelect2 + "]:first");

        if (urlSelect.length == 1)
            return urlSelect.attr(dataAttrSelect2);
        
        return "/treinamento/Contabil/CentrodeCustosLancamentoFinanceiroListaSelecao";

    }

    $(".CentroCustoId720043").select2({
        language: "pt-BR",
        width: "off",
        openOnEnter: false,
        placeholder: "Centro de Custo",
        minimumInputLength: 1,
        allowClear: true,
        ajax: {
            quietMillis: 1000,
            url: getUrlSelect2(),
            dataType: 'json',
            delay: 250,
            type: "POST",
            data: function (params) {

                let camposDependencia = ($(".CentroCustoId720043").attr("data-dependente") ? $(".CentroCustoId720043").attr("data-dependente") : "");
                let valoresDependencia = "";

                if ($(".CentroCustoId720043").attr("data-valordependente"))
                    valoresDependencia = $(".CentroCustoId720043").attr("data-valordependente")                
                else {

                    if (camposDependencia.indexOf(";") > -1) {

                        let qtdeDependencias = camposDependencia.split(";");
                        valoresDependencia = "";

                        for (let i = 0; i < qtdeDependencias.length; i++) 
                            valoresDependencia += $(".CentroCustoId720043 ").closest("form").find("[name=" + qtdeDependencias[i] + "]").val() + ";";
                        

                    } else 
                        valoresDependencia = ($(".CentroCustoId720043").attr("data-dependente") ? $(".CentroCustoId720043").closest("form").find("[name=" + $(".CentroCustoId720043").attr("data-dependente") + "]").val() : "");
                    
                }

                if (Array.isArray(valoresDependencia))
                    valoresDependencia = valoresDependencia.join(";");

                return {
                    pesquisa: params.term,
                    pagina: params.page == undefined ? 0 : params.page - 1,
                    campoDependente: camposDependencia,
                    valorDependente: valoresDependencia
                };

            },
            processResults: function (dados) {
                return {
                    results: dados.Retorno,
                    pagination: {
                        more: dados.ContinuarPesquisando
                    }
                };
            },
            cache: true
        },
        escapeMarkup: function (markup) {
            return markup;
        }, 
        minimumInputLength: 1,
        templateResult: undefined,
        templateSelection: undefined
    });

    $('.CentroCustoId720043').on("select2:select", function (e) {

        var valor = $(this).find("option[value='" + $(this).val() + "']").text();
        $(".CentroCustoId720043").closest("form").find("[name='CentroCustoNome']").val(valor);

    });

    $('.CentroCustoId720043').on("select2:unselect", function (e) {

        $(".CentroCustoId720043").closest("form").find("[name='CentroCustoNome']").val("");
        $(".CentroCustoId720043").find('option[value="' + e.params.data.id + '"]').remove().end();

    });
        
    $('.CentroCustoId720043').on("select2:close", function (e) {
        var formularioSeletor = "#" + $(this).closest("form").attr('id');
        var id = $(this).attr("id");
        var obrigatorio = $(this).attr("data-obrigatorio");
        var eventoTeclado = event.which;
        setTimeout(function () {

            if ((eventoTeclado == 27 || eventoTeclado == 13) && (obrigatorio == "false" || $("#" + id).val())) {

                AvancarFocus(e, formularioSeletor, $(formularioSeletor).find("#" + id), true);
                e.stopPropagation();

            }

        }, 600);

    });

});</script><script type="text/javascript">$("document").ready(function () {

    (function ($) {

        "use strict";
        $.fn.select2.defaults.set("theme", "bootstrap");

    })(jQuery);

    function getUrlSelect2() {

        var urlDinamica = getUrlSelect2Personalizada(".ProcessoImportacaoId448871");
        if (urlDinamica != null && urlDinamica != undefined && urlDinamica != "")
            return urlDinamica;

        let dataAttrSelect2 = "data-" + ".ProcessoImportacaoId448871".replace(".", "").replace(/[0-9]/g, '') + "-urlselect";
        let urlSelect = $("div[" + dataAttrSelect2 + "]:first");

        if (urlSelect.length == 1)
            return urlSelect.attr(dataAttrSelect2);
        
        return "/treinamento/Compras/ProcessoImportacaoComexListaSelecao";

    }

    $(".ProcessoImportacaoId448871").select2({
        language: "pt-BR",
        width: "off",
        openOnEnter: false,
        placeholder: "Processo Importação",
        minimumInputLength: 1,
        allowClear: true,
        ajax: {
            quietMillis: 1000,
            url: getUrlSelect2(),
            dataType: 'json',
            delay: 250,
            type: "POST",
            data: function (params) {

                let camposDependencia = ($(".ProcessoImportacaoId448871").attr("data-dependente") ? $(".ProcessoImportacaoId448871").attr("data-dependente") : "");
                let valoresDependencia = "";

                if ($(".ProcessoImportacaoId448871").attr("data-valordependente"))
                    valoresDependencia = $(".ProcessoImportacaoId448871").attr("data-valordependente")                
                else {

                    if (camposDependencia.indexOf(";") > -1) {

                        let qtdeDependencias = camposDependencia.split(";");
                        valoresDependencia = "";

                        for (let i = 0; i < qtdeDependencias.length; i++) 
                            valoresDependencia += $(".ProcessoImportacaoId448871 ").closest("form").find("[name=" + qtdeDependencias[i] + "]").val() + ";";
                        

                    } else 
                        valoresDependencia = ($(".ProcessoImportacaoId448871").attr("data-dependente") ? $(".ProcessoImportacaoId448871").closest("form").find("[name=" + $(".ProcessoImportacaoId448871").attr("data-dependente") + "]").val() : "");
                    
                }

                if (Array.isArray(valoresDependencia))
                    valoresDependencia = valoresDependencia.join(";");

                return {
                    pesquisa: params.term,
                    pagina: params.page == undefined ? 0 : params.page - 1,
                    campoDependente: camposDependencia,
                    valorDependente: valoresDependencia
                };

            },
            processResults: function (dados) {
                return {
                    results: dados.Retorno,
                    pagination: {
                        more: dados.ContinuarPesquisando
                    }
                };
            },
            cache: true
        },
        escapeMarkup: function (markup) {
            return markup;
        }, 
        minimumInputLength: 1,
        templateResult: undefined,
        templateSelection: undefined
    });

    $('.ProcessoImportacaoId448871').on("select2:select", function (e) {

        var valor = $(this).find("option[value='" + $(this).val() + "']").text();
        $(".ProcessoImportacaoId448871").closest("form").find("[name='ProcessoImportacaoNome']").val(valor);

    });

    $('.ProcessoImportacaoId448871').on("select2:unselect", function (e) {

        $(".ProcessoImportacaoId448871").closest("form").find("[name='ProcessoImportacaoNome']").val("");
        $(".ProcessoImportacaoId448871").find('option[value="' + e.params.data.id + '"]').remove().end();

    });
        
    $('.ProcessoImportacaoId448871').on("select2:close", function (e) {
        var formularioSeletor = "#" + $(this).closest("form").attr('id');
        var id = $(this).attr("id");
        var obrigatorio = $(this).attr("data-obrigatorio");
        var eventoTeclado = event.which;
        setTimeout(function () {

            if ((eventoTeclado == 27 || eventoTeclado == 13) && (obrigatorio == "false" || $("#" + id).val())) {

                AvancarFocus(e, formularioSeletor, $(formularioSeletor).find("#" + id), true);
                e.stopPropagation();

            }

        }, 600);

    });

});</script><script type="text/javascript">$("document").ready(function () {

    (function ($) {

        "use strict";
        $.fn.select2.defaults.set("theme", "bootstrap");

    })(jQuery);

    function getUrlSelect2() {

        var urlDinamica = getUrlSelect2Personalizada(".ImovelRuralId840744");
        if (urlDinamica != null && urlDinamica != undefined && urlDinamica != "")
            return urlDinamica;

        let dataAttrSelect2 = "data-" + ".ImovelRuralId840744".replace(".", "").replace(/[0-9]/g, '') + "-urlselect";
        let urlSelect = $("div[" + dataAttrSelect2 + "]:first");

        if (urlSelect.length == 1)
            return urlSelect.attr(dataAttrSelect2);
        
        return "/treinamento/Cadastro/ImovelRuralListaSelecao";

    }

    $(".ImovelRuralId840744").select2({
        language: "pt-BR",
        width: "off",
        openOnEnter: false,
        placeholder: "Imóvel Rural",
        minimumInputLength: 1,
        allowClear: true,
        ajax: {
            quietMillis: 1000,
            url: getUrlSelect2(),
            dataType: 'json',
            delay: 250,
            type: "POST",
            data: function (params) {

                let camposDependencia = ($(".ImovelRuralId840744").attr("data-dependente") ? $(".ImovelRuralId840744").attr("data-dependente") : "");
                let valoresDependencia = "";

                if ($(".ImovelRuralId840744").attr("data-valordependente"))
                    valoresDependencia = $(".ImovelRuralId840744").attr("data-valordependente")                
                else {

                    if (camposDependencia.indexOf(";") > -1) {

                        let qtdeDependencias = camposDependencia.split(";");
                        valoresDependencia = "";

                        for (let i = 0; i < qtdeDependencias.length; i++) 
                            valoresDependencia += $(".ImovelRuralId840744 ").closest("form").find("[name=" + qtdeDependencias[i] + "]").val() + ";";
                        

                    } else 
                        valoresDependencia = ($(".ImovelRuralId840744").attr("data-dependente") ? $(".ImovelRuralId840744").closest("form").find("[name=" + $(".ImovelRuralId840744").attr("data-dependente") + "]").val() : "");
                    
                }

                if (Array.isArray(valoresDependencia))
                    valoresDependencia = valoresDependencia.join(";");

                return {
                    pesquisa: params.term,
                    pagina: params.page == undefined ? 0 : params.page - 1,
                    campoDependente: camposDependencia,
                    valorDependente: valoresDependencia
                };

            },
            processResults: function (dados) {
                return {
                    results: dados.Retorno,
                    pagination: {
                        more: dados.ContinuarPesquisando
                    }
                };
            },
            cache: true
        },
        escapeMarkup: function (markup) {
            return markup;
        }, 
        minimumInputLength: 1,
        templateResult: undefined,
        templateSelection: undefined
    });

    $('.ImovelRuralId840744').on("select2:select", function (e) {

        var valor = $(this).find("option[value='" + $(this).val() + "']").text();
        $(".ImovelRuralId840744").closest("form").find("[name='ImovelRuralNome']").val(valor);

    });

    $('.ImovelRuralId840744').on("select2:unselect", function (e) {

        $(".ImovelRuralId840744").closest("form").find("[name='ImovelRuralNome']").val("");
        $(".ImovelRuralId840744").find('option[value="' + e.params.data.id + '"]').remove().end();

    });
        
    $('.ImovelRuralId840744').on("select2:close", function (e) {
        var formularioSeletor = "#" + $(this).closest("form").attr('id');
        var id = $(this).attr("id");
        var obrigatorio = $(this).attr("data-obrigatorio");
        var eventoTeclado = event.which;
        setTimeout(function () {

            if ((eventoTeclado == 27 || eventoTeclado == 13) && (obrigatorio == "false" || $("#" + id).val())) {

                AvancarFocus(e, formularioSeletor, $(formularioSeletor).find("#" + id), true);
                e.stopPropagation();

            }

        }, 600);

    });

});</script><script type="text/javascript">$("document").ready(function () {

    (function ($) {

        "use strict";
        $.fn.select2.defaults.set("theme", "bootstrap");

    })(jQuery);

    function getUrlSelect2() {

        var urlDinamica = getUrlSelect2Personalizada(".EmpresaId150271");
        if (urlDinamica != null && urlDinamica != undefined && urlDinamica != "")
            return urlDinamica;

        let dataAttrSelect2 = "data-" + ".EmpresaId150271".replace(".", "").replace(/[0-9]/g, '') + "-urlselect";
        let urlSelect = $("div[" + dataAttrSelect2 + "]:first");

        if (urlSelect.length == 1)
            return urlSelect.attr(dataAttrSelect2);
        
        return "/treinamento/Pessoa/EmpresasListaSelecaoDetalhes";

    }

    $(".EmpresaId150271").select2({
        language: "pt-BR",
        width: "off",
        openOnEnter: false,
        placeholder: "Estabelecimento",
        minimumInputLength: 1,
        allowClear: true,
        ajax: {
            quietMillis: 1000,
            url: getUrlSelect2(),
            dataType: 'json',
            delay: 250,
            type: "POST",
            data: function (params) {

                let camposDependencia = ($(".EmpresaId150271").attr("data-dependente") ? $(".EmpresaId150271").attr("data-dependente") : "");
                let valoresDependencia = "";

                if ($(".EmpresaId150271").attr("data-valordependente"))
                    valoresDependencia = $(".EmpresaId150271").attr("data-valordependente")                
                else {

                    if (camposDependencia.indexOf(";") > -1) {

                        let qtdeDependencias = camposDependencia.split(";");
                        valoresDependencia = "";

                        for (let i = 0; i < qtdeDependencias.length; i++) 
                            valoresDependencia += $(".EmpresaId150271 ").closest("form").find("[name=" + qtdeDependencias[i] + "]").val() + ";";
                        

                    } else 
                        valoresDependencia = ($(".EmpresaId150271").attr("data-dependente") ? $(".EmpresaId150271").closest("form").find("[name=" + $(".EmpresaId150271").attr("data-dependente") + "]").val() : "");
                    
                }

                if (Array.isArray(valoresDependencia))
                    valoresDependencia = valoresDependencia.join(";");

                return {
                    pesquisa: params.term,
                    pagina: params.page == undefined ? 0 : params.page - 1,
                    campoDependente: camposDependencia,
                    valorDependente: valoresDependencia
                };

            },
            processResults: function (dados) {
                return {
                    results: dados.Retorno,
                    pagination: {
                        more: dados.ContinuarPesquisando
                    }
                };
            },
            cache: true
        },
        escapeMarkup: function (markup) {
            return markup;
        }, 
        minimumInputLength: 1,
        templateResult: templatePessoaResultado,
        templateSelection: templatePessoaSelecao
    });

    $('.EmpresaId150271').on("select2:select", function (e) {

        var valor = $(this).find("option[value='" + $(this).val() + "']").text();
        $(".EmpresaId150271").closest("form").find("[name='EmpresaNome']").val(valor);

    });

    $('.EmpresaId150271').on("select2:unselect", function (e) {

        $(".EmpresaId150271").closest("form").find("[name='EmpresaNome']").val("");
        $(".EmpresaId150271").find('option[value="' + e.params.data.id + '"]').remove().end();

    });
        
    $('.EmpresaId150271').on("select2:close", function (e) {
        var formularioSeletor = "#" + $(this).closest("form").attr('id');
        var id = $(this).attr("id");
        var obrigatorio = $(this).attr("data-obrigatorio");
        var eventoTeclado = event.which;
        setTimeout(function () {

            if ((eventoTeclado == 27 || eventoTeclado == 13) && (obrigatorio == "false" || $("#" + id).val())) {

                AvancarFocus(e, formularioSeletor, $(formularioSeletor).find("#" + id), true);
                e.stopPropagation();

            }

        }, 600);

    });

});</script><script type="text/javascript">$("document").ready(function () {

    (function ($) {

        "use strict";
        $.fn.select2.defaults.set("theme", "bootstrap");

    })(jQuery);

    function getUrlSelect2() {

        var urlDinamica = getUrlSelect2Personalizada(".PessoaLancamentoId269854");
        if (urlDinamica != null && urlDinamica != undefined && urlDinamica != "")
            return urlDinamica;

        let dataAttrSelect2 = "data-" + ".PessoaLancamentoId269854".replace(".", "").replace(/[0-9]/g, '') + "-urlselect";
        let urlSelect = $("div[" + dataAttrSelect2 + "]:first");

        if (urlSelect.length == 1)
            return urlSelect.attr(dataAttrSelect2);
        
        return "/treinamento/Pessoa/PessoasListaSelecaoDetalhes";

    }

    $(".PessoaLancamentoId269854").select2({
        language: "pt-BR",
        width: "off",
        openOnEnter: false,
        placeholder: "Nome da Pessoa",
        minimumInputLength: 1,
        allowClear: true,
        ajax: {
            quietMillis: 1000,
            url: getUrlSelect2(),
            dataType: 'json',
            delay: 250,
            type: "POST",
            data: function (params) {

                let camposDependencia = ($(".PessoaLancamentoId269854").attr("data-dependente") ? $(".PessoaLancamentoId269854").attr("data-dependente") : "");
                let valoresDependencia = "";

                if ($(".PessoaLancamentoId269854").attr("data-valordependente"))
                    valoresDependencia = $(".PessoaLancamentoId269854").attr("data-valordependente")                
                else {

                    if (camposDependencia.indexOf(";") > -1) {

                        let qtdeDependencias = camposDependencia.split(";");
                        valoresDependencia = "";

                        for (let i = 0; i < qtdeDependencias.length; i++) 
                            valoresDependencia += $(".PessoaLancamentoId269854 ").closest("form").find("[name=" + qtdeDependencias[i] + "]").val() + ";";
                        

                    } else 
                        valoresDependencia = ($(".PessoaLancamentoId269854").attr("data-dependente") ? $(".PessoaLancamentoId269854").closest("form").find("[name=" + $(".PessoaLancamentoId269854").attr("data-dependente") + "]").val() : "");
                    
                }

                if (Array.isArray(valoresDependencia))
                    valoresDependencia = valoresDependencia.join(";");

                return {
                    pesquisa: params.term,
                    pagina: params.page == undefined ? 0 : params.page - 1,
                    campoDependente: camposDependencia,
                    valorDependente: valoresDependencia
                };

            },
            processResults: function (dados) {
                return {
                    results: dados.Retorno,
                    pagination: {
                        more: dados.ContinuarPesquisando
                    }
                };
            },
            cache: true
        },
        escapeMarkup: function (markup) {
            return markup;
        }, 
        minimumInputLength: 1,
        templateResult: templatePessoaResultado,
        templateSelection: templatePessoaSelecao
    });

    $('.PessoaLancamentoId269854').on("select2:select", function (e) {

        var valor = $(this).find("option[value='" + $(this).val() + "']").text();
        $(".PessoaLancamentoId269854").closest("form").find("[name='PessoaLancamentoNome']").val(valor);

    });

    $('.PessoaLancamentoId269854').on("select2:unselect", function (e) {

        $(".PessoaLancamentoId269854").closest("form").find("[name='PessoaLancamentoNome']").val("");
        $(".PessoaLancamentoId269854").find('option[value="' + e.params.data.id + '"]').remove().end();

    });
        
    $('.PessoaLancamentoId269854').on("select2:close", function (e) {
        var formularioSeletor = "#" + $(this).closest("form").attr('id');
        var id = $(this).attr("id");
        var obrigatorio = $(this).attr("data-obrigatorio");
        var eventoTeclado = event.which;
        setTimeout(function () {

            if ((eventoTeclado == 27 || eventoTeclado == 13) && (obrigatorio == "false" || $("#" + id).val())) {

                AvancarFocus(e, formularioSeletor, $(formularioSeletor).find("#" + id), true);
                e.stopPropagation();

            }

        }, 600);

    });

});</script><script type="text/javascript">$("document").ready(function () {

    (function ($) {

        "use strict";
        $.fn.select2.defaults.set("theme", "bootstrap");

    })(jQuery);

    function getUrlSelect2() {

        var urlDinamica = getUrlSelect2Personalizada(".HistoricoContabilId110176");
        if (urlDinamica != null && urlDinamica != undefined && urlDinamica != "")
            return urlDinamica;

        let dataAttrSelect2 = "data-" + ".HistoricoContabilId110176".replace(".", "").replace(/[0-9]/g, '') + "-urlselect";
        let urlSelect = $("div[" + dataAttrSelect2 + "]:first");

        if (urlSelect.length == 1)
            return urlSelect.attr(dataAttrSelect2);
        
        return "/treinamento/Contabil/HistoricosContabeisListaSelecao";

    }

    $(".HistoricoContabilId110176").select2({
        language: "pt-BR",
        width: "off",
        openOnEnter: false,
        placeholder: "Nome do Histórico Contábil",
        minimumInputLength: 1,
        allowClear: true,
        ajax: {
            quietMillis: 1000,
            url: getUrlSelect2(),
            dataType: 'json',
            delay: 250,
            type: "POST",
            data: function (params) {

                let camposDependencia = ($(".HistoricoContabilId110176").attr("data-dependente") ? $(".HistoricoContabilId110176").attr("data-dependente") : "");
                let valoresDependencia = "";

                if ($(".HistoricoContabilId110176").attr("data-valordependente"))
                    valoresDependencia = $(".HistoricoContabilId110176").attr("data-valordependente")                
                else {

                    if (camposDependencia.indexOf(";") > -1) {

                        let qtdeDependencias = camposDependencia.split(";");
                        valoresDependencia = "";

                        for (let i = 0; i < qtdeDependencias.length; i++) 
                            valoresDependencia += $(".HistoricoContabilId110176 ").closest("form").find("[name=" + qtdeDependencias[i] + "]").val() + ";";
                        

                    } else 
                        valoresDependencia = ($(".HistoricoContabilId110176").attr("data-dependente") ? $(".HistoricoContabilId110176").closest("form").find("[name=" + $(".HistoricoContabilId110176").attr("data-dependente") + "]").val() : "");
                    
                }

                if (Array.isArray(valoresDependencia))
                    valoresDependencia = valoresDependencia.join(";");

                return {
                    pesquisa: params.term,
                    pagina: params.page == undefined ? 0 : params.page - 1,
                    campoDependente: camposDependencia,
                    valorDependente: valoresDependencia
                };

            },
            processResults: function (dados) {
                return {
                    results: dados.Retorno,
                    pagination: {
                        more: dados.ContinuarPesquisando
                    }
                };
            },
            cache: true
        },
        escapeMarkup: function (markup) {
            return markup;
        }, 
        minimumInputLength: 1,
        templateResult: undefined,
        templateSelection: undefined
    });

    $('.HistoricoContabilId110176').on("select2:select", function (e) {

        var valor = $(this).find("option[value='" + $(this).val() + "']").text();
        $(".HistoricoContabilId110176").closest("form").find("[name='HistoricoContabilNome']").val(valor);

    });

    $('.HistoricoContabilId110176').on("select2:unselect", function (e) {

        $(".HistoricoContabilId110176").closest("form").find("[name='HistoricoContabilNome']").val("");
        $(".HistoricoContabilId110176").find('option[value="' + e.params.data.id + '"]').remove().end();

    });
        
    $('.HistoricoContabilId110176').on("select2:close", function (e) {
        var formularioSeletor = "#" + $(this).closest("form").attr('id');
        var id = $(this).attr("id");
        var obrigatorio = $(this).attr("data-obrigatorio");
        var eventoTeclado = event.which;
        setTimeout(function () {

            if ((eventoTeclado == 27 || eventoTeclado == 13) && (obrigatorio == "false" || $("#" + id).val())) {

                AvancarFocus(e, formularioSeletor, $(formularioSeletor).find("#" + id), true);
                e.stopPropagation();

            }

        }, 600);

    });

});</script><script type="text/javascript">var isFirefox = false
var _timeoutfrmLancamento = 0;

var ExecutaAcaoAposSubmit = function (evento, acaoAposSubmit, seletorModal, modalContainer, urlRetorno) {

    if (acaoAposSubmit != "novo" && urlRetorno != undefined && urlRetorno != "_blank;") {

        if (modalContainer.length == 0 && window.frameElement !== null) {

            var m8hash = window.frameElement.id;

            setTimeout(function () {

                var w = window.frameElement.contentWindow.window.parent;
                var tab = $(window.frameElement.parentElement);

                if (w.FecharAba)
                    w.FecharAba(tab, m8hash);

            }, 500);

        } else
            setTimeout(function () { modalContainer.modal("hide"); }, 500);

    } else if (evento.Novo && modalContainer.length == 0)
        setTimeout(() => window.location.href = prepareUrl(window.location.href, evento.Modelo.Id), 500);

    if (acaoAposSubmit == "novo")
        NovoRegistro();

}

var NovoRegistro = function () {

    var url = window.location.href;

    if (url.match(/\/?-?\d+\.?\d*$/)) {

        var indice = url.lastIndexOf("/");

        if (indice != -1)
            url = url.substr(0, indice);

    }

    setTimeout(function () { window.location.href = url }, 500);

}

var AlterarUrl = function (parametro, remover) {

    setTimeout(function () {

        if (remover) {

            var url = window.location.href.split('?' + parametro)[0];
            history.pushState('', '', url);

        } else
            window.location.href = window.location.href + '?' + parametro;

    }, 300);
}

var RecarregarUrl = function (id, idRemover) {

    window.location.href = prepareUrl(window.location.href, id, idRemover).replace("#", "");

}

var RespostaPadraoSucessoFormulario = function (evento) {
    setTimeout(function () { window.location.href = prepareUrl(window.location.href, evento.Modelo.Id) }, 500);
}

var prepareUrl = (url, id, idRemover) => {

    if (url.includes("?")) {
        var urls = url.split("?");
        if (!urls[0].endsWith("/"))
            url = urls[0] + "/"
        url += id + "?" + urls[1];
    }
    else {
        if (!url.endsWith("/"))
            url += "/";
        url += id;
    }

    if (idRemover != undefined && idRemover != null && idRemover != "")
        url = url.replace(idRemover, "")

    return url;

}

$("document").ready(function () {

    try { isFirefox = typeof InstallTrigger !== 'undefined'; } catch (e) { }

    TabPorEnter("#frmLancamento");
    MascararCampos("#frmLancamento");
    FocusInicial("#frmLancamento");
    PrepararModal("#frmLancamento");

    $(".formulario-dica-popover").popover({ trigger: 'hover', html: true });

    var select2Mais = undefined;

    var setaValorObjetoStorage = function (urlHash) {

        var len = 0;

        for (var i = 0, len = localStorage.length; i < len; ++i)
            if (urlHash == localStorage.key(i)) {

                var x = JSON.parse(localStorage.getItem(localStorage.key(i)));

                x.valor = "1";

                if ($('#Id').val())
                    x.id = Number($('#Id').val());

                localStorage.setItem(localStorage.key(i), JSON.stringify(x));

            }

    };

    var titulo = $($("#frmLancamento").parents('[id*="Portlet"]').find('[id*="Tab"]')[0]).find('li.active > a ').text();
    var tabP = $($($("#frmLancamento").parents('[id*="Portlet"]').find('[id*="Tab"]')[0]).find('a')[0]).text();

    if (titulo != "" && tabP != "")
        $("#frmLancamento").find("#ModeloFormulario").val(tabP + " -> " + titulo);
    else
        $("#frmLancamento").find("#ModeloFormulario").val($("#frmLancamento").parents('[id*="Portlet"]').find("div.caption").text());

    if ($("#frmLancamento").parents("[data-m8-detalhes='true']").length == 0) {

        $("#frmLancamentoTab").on("click.show", function (e) {

            initializeTab(getTabContentFromLinkTabClick(e), '#frmLancamento', '.frmLancamentoSubmit');

        });

    }

    $(".frmLancamentoSubmit, .frmLancamentoSubmitClose, .frmLancamentoSubmitNew").off("click").on("click", function (e) {

        e.preventDefault();

        $("#frmLancamento").attr("data-url-retorno", $(e.currentTarget).attr("href"));
        $("#frmLancamento").attr("data-pos-submit", $(e.currentTarget).attr("data-pos-submit"));
        $("#frmLancamento").submit();

    });

    $("#frmLancamento").off("submit");
    var isSubmitted = false;
    
    $("#frmLancamento").submit(function (e) {

        e.preventDefault();
        
        if (!isSubmitted)
            isSubmitted = true;
        else
            return false;

        setTimeout(() => {

            var hash = {};
            var maskedtextboxes = $(this).find("[data-role=maskedtextbox]");

            maskedtextboxes.each(function (idx, element) {

                if (element.id) {

                    var value = element.value;
                    hash[element.id] = value;

                    if (value.indexOf("_") !== -1) {

                        element.value = value.replace(/_/g, "");
                        e.preventDefault();

                    }

                    if ($(element).is(".mascara-cpf, .mascara-cnpj, .mascara-telefone, .mascara-cep")) {

                        element.value = value.replace(/[^0-9]/g, '');
                        e.preventDefault();

                    }

                }

            });

            var acaoAposSubmit = $(this).attr("data-pos-submit");
            var seletorModal = $(this).attr("data-modal-seletor");
            var modalContainer = $(seletorModal);
            var urlRetorno = $(this).attr("data-url-retorno");

            let ajaxLoadSeletor = $($(this).attr("data-ajax-load"));

            if ($(ajaxLoadSeletor).length < 1)
                ajaxLoadSeletor = $(".ajax-loading");

            ajaxLoadSeletor.dialog("open");

            var submitData = $("#frmLancamento").serializeArray();

            for (var element in hash)
                $(this).find("#" + element).val(hash[element]);

            try {

                if (!ffrmLancamento._validarCamposObrigatorios()) {

                    setTimeout(() => isSubmitted = false, 500);

                    try { ajaxLoadSeletor.dialog("close"); } catch (e) { }

                    Dialog.showError('Formulário inválido', 'Alguns campos não puderam ser validados. Verifique.');

                    return false;

                }

            } catch (e) { console.info(e); }

            RequisicaoAjax(
                $("#frmLancamento").attr("action"),
                submitData,
                function (evento) {

                    setTimeout(function () {

                        if (ValidarFormulario($("#frmLancamento"), evento))
                            CarregarFormulario($("#frmLancamento"), evento);

                        $("#frmLancamento").attr("data-url-retorno", urlRetorno);
                        $("#frmLancamento").attr("data-modal-seletor", seletorModal);

                        try { frmLancamentoAjaxSucesso(evento); } catch (e) { }

                        ajaxLoadSeletor.dialog("close");
                        setTimeout(() => isSubmitted = false, 500);

                        try {

                            if (evento.Script)
                                eval(evento.Script);

                        }
                        catch (e) { }

                        if (evento.Sucesso) {

                            if (select2Mais)
                                select2Mais(evento.Modelo.Id);

                            if (acaoAposSubmit != "novo" && urlRetorno != undefined && urlRetorno != "_blank;") {

                                if (modalContainer.length == 0 && window.frameElement !== null) {

                                    var m8hash = window.frameElement.id;

                                    setTimeout(function () {

                                        var w = window.frameElement.contentWindow.window.parent;
                                        var tab = $(window.frameElement.parentElement);

                                        if (w.FecharAba)
                                            w.FecharAba(tab, m8hash);

                                    }, 500);

                                } else
                                    setTimeout(function () { modalContainer.modal("hide"); }, 500);

                            } else if (evento.Novo && modalContainer.length == 0 && true)
                                RespostaPadraoSucessoFormulario(evento);

                            if (acaoAposSubmit == "novo" && true)
                                NovoRegistro();
                            else if (acaoAposSubmit == "fechar") {

                                var urlA = window.location.href;
                                var urlAux = urlA.split("/");

                                urlA = "";

                                for (var i = 3; i < urlAux.length; i++)
                                    urlA += "/" + urlAux[i];

                                var urlHash = urlA.hashCode();

                                setaValorObjetoStorage(urlHash);

                            }

                        }

                    }, 500);

                },
                function (evento) {

                    setTimeout(function () {

                        ajaxLoadSeletor.dialog("close");

                        setTimeout(() => isSubmitted = false, 500);

                        bootbox.alert(evento.responseText);

                        try { frmLancamentoAjaxErro(evento); } catch (e) { }

                        FocusInicial("#frmLancamento");

                    }, 500);

                }
            );

        }, _timeoutfrmLancamento);

    });

});

try {

    var ffrmLancamento;

    class FfrmLancamento extends Forms {

        constructor() {

            super("frmLancamento");

            setTimeout(() => {

                //Load content here, with separated functions
                this._init();

            }, 500);

        }
                
        _showFormContent() {
            
            this.evFrm.closest('.m8-form-content').first().show("fast");

        }

        _validarCamposObrigatorios() {

            try {

                if (!this.evFrm.hasClass('validar-obrigatorios'))
                    return true;

                let self = this;
                let hasErrors = false;
                let fieldsObrigatorios = this.evFrm.find('.obrigatorio:visible');

                fieldsObrigatorios.each(function (i, e) {

                    let id = $(e).attr('label-for');
                    let field = $(`#${self.frmId} #${id}`);
                    let val = field.val();
                    let isData = field.attr('data-type') == 'data';

                    if ((isData && !self.validateDateField(id)) || val == undefined || val == null || val.isNullOrEmpty()) {
                        field.closest('.form-group').addClass('has-error');
                        $(`#${self.frmId} [data-valmsg-for="${id}"]`).html(`Campo Obrigatório: "${$(e).text()}"`);
                        hasErrors = true;
                    }
                    else {
                        field.closest('.form-group').removeClass('has-error');
                        $(`#${self.frmId} [data-valmsg-for="${id}"]`).html('');
                    }

                });

                return !hasErrors;

            } catch (e) {

                return true;
                console.info(e);

            }

        }

        _init() {
            
            this._showFormContent();

        }

    }

    $(() => ffrmLancamento = new FfrmLancamento());

} catch (e) { }</script><script type="text/javascript">var ModalPesquisar574292 = function (e, selecionados) {
    $("#ModalPesquisar574292").modal("hide");
};

var MontarUrlbtnPesquisarEmpresaId183887 = function (componente) {

    var valor = "";
    var camposdependecia = "";

    if (camposdependecia != "") {
        var qtdDependencias = camposdependecia.split(";");
        for (var i = 0; i < qtdDependencias.length; i++) {

            var campoDependente = $("#frmLancamento #" + qtdDependencias[i]);
            if (campoDependente)
                valor += (valor != "" ? ";" : "") + campoDependente.val();
        }
    }

    var url = componente.attr("href");
    if (valor !== "" && valor !== undefined) {
        if (url.indexOf('filtropesquisa=') !== -1)
            url = url.replace(/(filtropesquisa=).*?(&)/, '$1' + valor + '$2');
        else
            url = url + "?filtropesquisa=" + valor;
    }

    return url;

};

$("document").ready(function () {

    var pesquisaDialog = function (e) {

        e.preventDefault();

        if ($("#btnPesquisarEmpresaId183887").hasClass('m8-btn-desabilitado'))
            return false;

        var href = $("#btnPesquisarEmpresaId183887").attr("href");
        $("#btnPesquisarEmpresaId183887").attr("disabled", "disabled");
        $("#btnPesquisarEmpresaId183887").css("pointer-events", "none");
        $("#btnPesquisarEmpresaId183887").unbind("click");
        ConstruirModal(
            "ModalPesquisar574292",
            "btnPesquisarEmpresaId183887",
            "Seleção de Estabelecimento",
            MontarUrlbtnPesquisarEmpresaId183887($(this)),
            { funcaoRetorno: "ModalPesquisar574292" },
            function (e) {  

                $("#btnPesquisarEmpresaId183887").attr("href", "#");
                setTimeout(() => {

                    try {
                        ModalPesquisarShow(e, "ModalPesquisar574292", "btnPesquisarEmpresaId183887");                        
                    } catch (c) { }

                    try {
                        $("#ModalPesquisar574292").attr("data-formulario-chamou", "#frmLancamento");
                        $("#ModalPesquisar574292").attr("data-formulario-chamou-extras-grid", "_FuncaoAntesEditar_");
                        $("#ModalPesquisar574292").attr("data-formulario-chamou-extras-form", "_FuncaoAntesEditar_");
                    } catch (e) { }

                }, 500);
                
            },
            function (e) {
                
                var seletorRetorno = $(".btnPesquisarEmpresaId183887").attr("data-form") + " #Id";
                var retorno = "";

                if (selecionados && selecionados.length == 1)
                    retorno = selecionados[0];
                else if (selecionados && selecionados.length > 1)
                    retorno = selecionados.toString();

                if (true) {
                    if (retorno !== "" && retorno != undefined) {

                        let campoDependente = ($(".EmpresaId150271").attr("data-dependente") ? $(".EmpresaId150271").attr("data-dependente") : "");
                        let valorDependente = ($(".EmpresaId150271").attr("data-valordependente") ? $(".EmpresaId150271").attr("data-valordependente") :
                                               $(".EmpresaId150271").attr("data-dependente") ? buscarValoresDependentes($(".EmpresaId150271"), $(".EmpresaId150271").closest("form").attr("id")) : "")

                        let urlDadosSelectDois = $("#btnPesquisarEmpresaId183887").attr("data-url-dados-select-dois") || "/treinamento/Pessoa/EmpresasListaSelecaoDetalhes";
                        if (Array.isArray(valorDependente)) 
                            valorDependente = valorDependente.join(";");

                        $.ajax({
                            url: urlDadosSelectDois,
                            type: "POST",
                            data: {
                                pesquisa: retorno,
                                pagina: 0,
                                campoDependente: campoDependente,
                                valorDependente: valorDependente,
                                selecao: true
                            },
                            dataType: 'json',
                            success: function (dados) {
                                if (dados.Retorno.length > 0) {
                                    $.each(dados.Retorno, function (idx, val) {
                                        var newOption = new Option(val.text, val.id, true, true);
                                        $(".EmpresaId150271").append(newOption);
                                    });
                                    $(".EmpresaId150271").trigger('change');
                                    SetarFoco($("#frmLancamento .EmpresaId150271"));
                                    AvancarFocus(e, "#frmLancamento", $(".EmpresaId150271"), true);
                                }
                            }
                        });
                    }
                    if (typeof funcaoAposSelecao === "function") {
                        funcaoAposSelecao(selecionados);
                    }
                } else if (typeof funcaoAposSelecao === "function") {
                    funcaoAposSelecao(selecionados);
                }
                else {
                    $(".EmpresaId150271").val(retorno);
                    SetarFoco($("#frmLancamento .EmpresaId150271"));
                }

                $("#btnPesquisarEmpresaId183887").css("pointer-events", "initial");
                $("#btnPesquisarEmpresaId183887").removeAttr("disabled");
                $("#btnPesquisarEmpresaId183887").attr("href", href);
                $("#btnPesquisarEmpresaId183887").bind('click', pesquisaDialog);

            },
            $("#frmLancamento").attr("data-ajax-load"),
            {
                success: {
                    label: "Selecionar",
                    className: "btn-success",
                    callback: function () {

                        if (!selecionados || selecionados.length == 0) {

                            Notificacao.Aviso("Nenhum registro selecionado");
                            return false;

                        } else
                            $("#ModalPesquisar574292").modal("hide");
                        
                    }
                },
                close: {
                    label: "Fechar",
                    className: "btn-danger ",
                    callback: function () {
                        selecionados = "";
                        $("#ModalPesquisar574292").modal("hide");
                    }
                }
            },
            "modalPesquisa"
        );

    };

    $("#btnPesquisarEmpresaId183887").on("click", pesquisaDialog);

});</script><script type="text/javascript">$("document").ready(function () {

    var listenerValue = function (key) {

        let valor = "";

        setTimeout(() => {

            let item = localStorage.getItem(key);

            item = JSON.parse(item);

            if (item) {

                if (item.valor != "") {

                    if (item.valor !== "0") {

                        if (item.campoDependente != "" && item.valorDependente != "")
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, item.campoDependente, item.valorDependente);
                        else
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, null, null);

                        return item.valor;

                    }
                    else
                        return valor;

                } else
                    listenerValue(key);

            }
        }, 1000);
    }

    var processValue = function (key, e) {

        listenerValue(key);

    }

    $("#btnAdicionarEmpresaId647398").on("click", function (e) {

        e.preventDefault();


        var href = $(this).attr("href");
        var urlValidar = $(this).data("url_validar_usuario");
        var urlPermissaoValidar = $(this).data("url_permissao_validar");
        var urlDados = $(this).data("url_dados");
        var acaoAdicionarCustomizada = $(this).data("acao_adicionar_customizada");
        var id = $($(this).parent().parent().children()[0]).val();
        var campo = ($(this).parent().parent().children()[0]).name;
        var hasCampoId = "null" != "null";
        var campoId = $("#" + $(this).parents("form").first().attr("Id") + " #null").val();

        if (hasCampoId && (campoId == null || campoId == undefined)) {

            var msgCampoId = "null" == "null" ? "Campo dependência não informado: 'null'" : "null";
            Notificacao.Alerta(msgCampoId);

            return;
        }

        if (campoId != null)
            id = campoId;

        var campoDependente = "";
        var valorDependente = "";

        if ($('#' + campo).data('dependente') != null) {

            campoDependente = $('#' + campo).data('dependente');
            valorDependente = $('#' + $('#' + campo).data('dependente').split(';')[0]).val();

        }

        var idString = id ? id.toString() : "";

        if (idString === "") {

            idString = $($(this).parent().parent().children()[0]).attr('data-idConsulta') + "";
            id = $($(this).parent().parent().children()[0]).attr('data-idConsulta');

        }

        var hrefAux = "";
        var formName = $($("li.active a").attr("href")).find("form").attr("id");

        if (formName === undefined || formName == null)
            formName = (document.getElementsByTagName("form")[0]).id;

        var hashAbaAtual = ($(".nav li.active a").attr("data-m8-hash"));

        let storageAba = {
            hashPai: hashAbaAtual
        };


        var hrefUrlValidar = href;

        if (acaoAdicionarCustomizada) {
            hrefUrlValidar = decodeURIComponent(hrefUrlValidar);
        }
        else {
            if (decodeURIComponent(hrefUrlValidar).indexOf("?"))
                hrefUrlValidar = decodeURIComponent(hrefUrlValidar).split('?')[0];
        }

        if (urlPermissaoValidar != undefined && urlPermissaoValidar != null)
            hrefUrlValidar = urlPermissaoValidar;

        $.ajax({
            url: urlValidar,
            data: { urlValidar: hrefUrlValidar },
            dataType: 'json',
            async: false,
            success: function (res) {

                if (res.Data == true) {

                    let element = {
                        href: href,
                        campo: campo,
                        urlDados: urlDados,
                        formName: formName,
                        valorDependente: valorDependente,
                        campoDependente: campoDependente,
                        id: idString,
                        valor: ""
                    };

                    href = SetAnsii(href);

                    if (href.toLowerCase().endsWith('modal'))
                        hrefAux = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

                    if (idString && idString.length > 0)
                        hrefAux += '/' + id;

                    localStorage.setItem(hrefAux.hashCode() + "1", JSON.stringify(storageAba));
                    localStorage.setItem(hrefAux.hashCode(), JSON.stringify(element));
                    processValue(hrefAux.hashCode(), e);

                    ChamarAbaAdicionarEditar(e, href, id, acaoAdicionarCustomizada);

                }
                else
                    Notificacao.Alerta("Usuário sem permissão de acesso.");

            }
        });
    });

    var SetAnsii = (href) => {

        href = href.replace("%3f", "?");
        href = href.replace("%3d", "=");
        href = href.replace("%23", "#");
        href = href.replace("%26", "&");

        return href;
    }

    var ChamarAbaAdicionarEditar = function (e, href, id, acaoAdicionarCustomizada) {

        var eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesAdicionar() };

        if (href.toLowerCase().endsWith('modal'))
            href = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

        if (id && id.length > 0) {

            if (acaoAdicionarCustomizada) {
                href += id
            } else {
                var parans = href.split('?');
                href = parans[0] + '/' + id;
                if (parans.length > 1)
                    href += '?' + parans[1];
            }

            eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesEditar(id) };

        }

        var paginaPrincipal = window.parent;

        href = GetUrlParamValues(href, acaoAdicionarCustomizada);

        if (typeof paginaPrincipal.AbrirNovaAba === "function")
            paginaPrincipal.AbrirNovaAba("...", href, undefined, undefined, undefined, true, eventoAposAbrirAbaNova);

    }

    var GetUrlParamValues = (href, acaoAdicionarCustomizada) => {

        var hasParans = href.includes('?') && (href.includes('#') || href.includes('.'));

        if (!acaoAdicionarCustomizada && hasParans) {

            var parans = href.split('?')[1].split('&');

            for (var i = 0; i < parans.length; i++) {

                var paran = parans[i].split('=');
                var value = $(paran[1]).val();

                if (value != undefined)
                    href = href.replace(paran[1], value);
                else {

                    href = href.replace(parans[i], "");

                    if (href.endsWith('&'))
                        href = href.substring(0, href.length - 3);

                }
            }

        }

        return href;

    }

    var OnExecuteFuncaoAntesEditar = (id) => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](id); }
            catch { }

        }, 2000);

    }

    var OnExecuteFuncaoAntesAdicionar = () => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](); }
            catch { }

        }, 2000);

    }

    var setaValoresSelect2 = function (campoForm, id, form, urlPesquisa, urlRetorno, campoDependente, valorDependente) {

        var campoFormulario = "#" + form + " #" + campoForm;
        var novoId = id.toString();

        $.ajax({
            url: urlPesquisa,
            data: {
                pesquisa: id,
                campoDependente: campoDependente,
                valorDependente: valorDependente,
                selecao: true
            },
            dataType: 'json',
            success: function (dados) {

                var cont = 0;

                for (var cont = 0; cont < dados.Retorno.length; cont++) {

                    var retorno = dados.Retorno[cont];

                    if (Number(novoId) == Number(retorno.id)) {

                        $(campoFormulario).select2("val", '');
                        $(campoFormulario).append(new Option(retorno.text, retorno.id, true, true)).trigger('change');

                    }

                }

            },
            error: function (message) { console.log(message); }
        });

    }

});</script><script type="text/javascript">var ModalPesquisar150407 = function (e, selecionados) {
    $("#ModalPesquisar150407").modal("hide");
};

var MontarUrlbtnPesquisarPessoaLancamentoId268990 = function (componente) {

    var valor = "";
    var camposdependecia = "";

    if (camposdependecia != "") {
        var qtdDependencias = camposdependecia.split(";");
        for (var i = 0; i < qtdDependencias.length; i++) {

            var campoDependente = $("#frmLancamento #" + qtdDependencias[i]);
            if (campoDependente)
                valor += (valor != "" ? ";" : "") + campoDependente.val();
        }
    }

    var url = componente.attr("href");
    if (valor !== "" && valor !== undefined) {
        if (url.indexOf('filtropesquisa=') !== -1)
            url = url.replace(/(filtropesquisa=).*?(&)/, '$1' + valor + '$2');
        else
            url = url + "?filtropesquisa=" + valor;
    }

    return url;

};

$("document").ready(function () {

    var pesquisaDialog = function (e) {

        e.preventDefault();

        if ($("#btnPesquisarPessoaLancamentoId268990").hasClass('m8-btn-desabilitado'))
            return false;

        var href = $("#btnPesquisarPessoaLancamentoId268990").attr("href");
        $("#btnPesquisarPessoaLancamentoId268990").attr("disabled", "disabled");
        $("#btnPesquisarPessoaLancamentoId268990").css("pointer-events", "none");
        $("#btnPesquisarPessoaLancamentoId268990").unbind("click");
        ConstruirModal(
            "ModalPesquisar150407",
            "btnPesquisarPessoaLancamentoId268990",
            "Seleção de Pessoa",
            MontarUrlbtnPesquisarPessoaLancamentoId268990($(this)),
            { funcaoRetorno: "ModalPesquisar150407" },
            function (e) {  

                $("#btnPesquisarPessoaLancamentoId268990").attr("href", "#");
                setTimeout(() => {

                    try {
                        ModalPesquisarShow(e, "ModalPesquisar150407", "btnPesquisarPessoaLancamentoId268990");                        
                    } catch (c) { }

                    try {
                        $("#ModalPesquisar150407").attr("data-formulario-chamou", "#frmLancamento");
                        $("#ModalPesquisar150407").attr("data-formulario-chamou-extras-grid", "_FuncaoAntesEditar_");
                        $("#ModalPesquisar150407").attr("data-formulario-chamou-extras-form", "_FuncaoAntesEditar_");
                    } catch (e) { }

                }, 500);
                
            },
            function (e) {
                
                var seletorRetorno = $(".btnPesquisarPessoaLancamentoId268990").attr("data-form") + " #Id";
                var retorno = "";

                if (selecionados && selecionados.length == 1)
                    retorno = selecionados[0];
                else if (selecionados && selecionados.length > 1)
                    retorno = selecionados.toString();

                if (true) {
                    if (retorno !== "" && retorno != undefined) {

                        let campoDependente = ($(".PessoaLancamentoId269854").attr("data-dependente") ? $(".PessoaLancamentoId269854").attr("data-dependente") : "");
                        let valorDependente = ($(".PessoaLancamentoId269854").attr("data-valordependente") ? $(".PessoaLancamentoId269854").attr("data-valordependente") :
                                               $(".PessoaLancamentoId269854").attr("data-dependente") ? buscarValoresDependentes($(".PessoaLancamentoId269854"), $(".PessoaLancamentoId269854").closest("form").attr("id")) : "")

                        let urlDadosSelectDois = $("#btnPesquisarPessoaLancamentoId268990").attr("data-url-dados-select-dois") || "/treinamento/Pessoa/PessoasListaSelecaoDetalhes";
                        if (Array.isArray(valorDependente)) 
                            valorDependente = valorDependente.join(";");

                        $.ajax({
                            url: urlDadosSelectDois,
                            type: "POST",
                            data: {
                                pesquisa: retorno,
                                pagina: 0,
                                campoDependente: campoDependente,
                                valorDependente: valorDependente,
                                selecao: true
                            },
                            dataType: 'json',
                            success: function (dados) {
                                if (dados.Retorno.length > 0) {
                                    $.each(dados.Retorno, function (idx, val) {
                                        var newOption = new Option(val.text, val.id, true, true);
                                        $(".PessoaLancamentoId269854").append(newOption);
                                    });
                                    $(".PessoaLancamentoId269854").trigger('change');
                                    SetarFoco($("#frmLancamento .PessoaLancamentoId269854"));
                                    AvancarFocus(e, "#frmLancamento", $(".PessoaLancamentoId269854"), true);
                                }
                            }
                        });
                    }
                    if (typeof funcaoAposSelecao === "function") {
                        funcaoAposSelecao(selecionados);
                    }
                } else if (typeof funcaoAposSelecao === "function") {
                    funcaoAposSelecao(selecionados);
                }
                else {
                    $(".PessoaLancamentoId269854").val(retorno);
                    SetarFoco($("#frmLancamento .PessoaLancamentoId269854"));
                }

                $("#btnPesquisarPessoaLancamentoId268990").css("pointer-events", "initial");
                $("#btnPesquisarPessoaLancamentoId268990").removeAttr("disabled");
                $("#btnPesquisarPessoaLancamentoId268990").attr("href", href);
                $("#btnPesquisarPessoaLancamentoId268990").bind('click', pesquisaDialog);

            },
            $("#frmLancamento").attr("data-ajax-load"),
            {
                success: {
                    label: "Selecionar",
                    className: "btn-success",
                    callback: function () {

                        if (!selecionados || selecionados.length == 0) {

                            Notificacao.Aviso("Nenhum registro selecionado");
                            return false;

                        } else
                            $("#ModalPesquisar150407").modal("hide");
                        
                    }
                },
                close: {
                    label: "Fechar",
                    className: "btn-danger ",
                    callback: function () {
                        selecionados = "";
                        $("#ModalPesquisar150407").modal("hide");
                    }
                }
            },
            "modalPesquisa"
        );

    };

    $("#btnPesquisarPessoaLancamentoId268990").on("click", pesquisaDialog);

});</script><script type="text/javascript">$("document").ready(function () {

    var listenerValue = function (key) {

        let valor = "";

        setTimeout(() => {

            let item = localStorage.getItem(key);

            item = JSON.parse(item);

            if (item) {

                if (item.valor != "") {

                    if (item.valor !== "0") {

                        if (item.campoDependente != "" && item.valorDependente != "")
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, item.campoDependente, item.valorDependente);
                        else
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, null, null);

                        return item.valor;

                    }
                    else
                        return valor;

                } else
                    listenerValue(key);

            }
        }, 1000);
    }

    var processValue = function (key, e) {

        listenerValue(key);

    }

    $("#btnAdicionarPessoaLancamentoId349425").on("click", function (e) {

        e.preventDefault();


        var href = $(this).attr("href");
        var urlValidar = $(this).data("url_validar_usuario");
        var urlPermissaoValidar = $(this).data("url_permissao_validar");
        var urlDados = $(this).data("url_dados");
        var acaoAdicionarCustomizada = $(this).data("acao_adicionar_customizada");
        var id = $($(this).parent().parent().children()[0]).val();
        var campo = ($(this).parent().parent().children()[0]).name;
        var hasCampoId = "null" != "null";
        var campoId = $("#" + $(this).parents("form").first().attr("Id") + " #null").val();

        if (hasCampoId && (campoId == null || campoId == undefined)) {

            var msgCampoId = "null" == "null" ? "Campo dependência não informado: 'null'" : "null";
            Notificacao.Alerta(msgCampoId);

            return;
        }

        if (campoId != null)
            id = campoId;

        var campoDependente = "";
        var valorDependente = "";

        if ($('#' + campo).data('dependente') != null) {

            campoDependente = $('#' + campo).data('dependente');
            valorDependente = $('#' + $('#' + campo).data('dependente').split(';')[0]).val();

        }

        var idString = id ? id.toString() : "";

        if (idString === "") {

            idString = $($(this).parent().parent().children()[0]).attr('data-idConsulta') + "";
            id = $($(this).parent().parent().children()[0]).attr('data-idConsulta');

        }

        var hrefAux = "";
        var formName = $($("li.active a").attr("href")).find("form").attr("id");

        if (formName === undefined || formName == null)
            formName = (document.getElementsByTagName("form")[0]).id;

        var hashAbaAtual = ($(".nav li.active a").attr("data-m8-hash"));

        let storageAba = {
            hashPai: hashAbaAtual
        };


        var hrefUrlValidar = href;

        if (acaoAdicionarCustomizada) {
            hrefUrlValidar = decodeURIComponent(hrefUrlValidar);
        }
        else {
            if (decodeURIComponent(hrefUrlValidar).indexOf("?"))
                hrefUrlValidar = decodeURIComponent(hrefUrlValidar).split('?')[0];
        }

        if (urlPermissaoValidar != undefined && urlPermissaoValidar != null)
            hrefUrlValidar = urlPermissaoValidar;

        $.ajax({
            url: urlValidar,
            data: { urlValidar: hrefUrlValidar },
            dataType: 'json',
            async: false,
            success: function (res) {

                if (res.Data == true) {

                    let element = {
                        href: href,
                        campo: campo,
                        urlDados: urlDados,
                        formName: formName,
                        valorDependente: valorDependente,
                        campoDependente: campoDependente,
                        id: idString,
                        valor: ""
                    };

                    href = SetAnsii(href);

                    if (href.toLowerCase().endsWith('modal'))
                        hrefAux = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

                    if (idString && idString.length > 0)
                        hrefAux += '/' + id;

                    localStorage.setItem(hrefAux.hashCode() + "1", JSON.stringify(storageAba));
                    localStorage.setItem(hrefAux.hashCode(), JSON.stringify(element));
                    processValue(hrefAux.hashCode(), e);

                    ChamarAbaAdicionarEditar(e, href, id, acaoAdicionarCustomizada);

                }
                else
                    Notificacao.Alerta("Usuário sem permissão de acesso.");

            }
        });
    });

    var SetAnsii = (href) => {

        href = href.replace("%3f", "?");
        href = href.replace("%3d", "=");
        href = href.replace("%23", "#");
        href = href.replace("%26", "&");

        return href;
    }

    var ChamarAbaAdicionarEditar = function (e, href, id, acaoAdicionarCustomizada) {

        var eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesAdicionar() };

        if (href.toLowerCase().endsWith('modal'))
            href = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

        if (id && id.length > 0) {

            if (acaoAdicionarCustomizada) {
                href += id
            } else {
                var parans = href.split('?');
                href = parans[0] + '/' + id;
                if (parans.length > 1)
                    href += '?' + parans[1];
            }

            eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesEditar(id) };

        }

        var paginaPrincipal = window.parent;

        href = GetUrlParamValues(href, acaoAdicionarCustomizada);

        if (typeof paginaPrincipal.AbrirNovaAba === "function")
            paginaPrincipal.AbrirNovaAba("...", href, undefined, undefined, undefined, true, eventoAposAbrirAbaNova);

    }

    var GetUrlParamValues = (href, acaoAdicionarCustomizada) => {

        var hasParans = href.includes('?') && (href.includes('#') || href.includes('.'));

        if (!acaoAdicionarCustomizada && hasParans) {

            var parans = href.split('?')[1].split('&');

            for (var i = 0; i < parans.length; i++) {

                var paran = parans[i].split('=');
                var value = $(paran[1]).val();

                if (value != undefined)
                    href = href.replace(paran[1], value);
                else {

                    href = href.replace(parans[i], "");

                    if (href.endsWith('&'))
                        href = href.substring(0, href.length - 3);

                }
            }

        }

        return href;

    }

    var OnExecuteFuncaoAntesEditar = (id) => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](id); }
            catch { }

        }, 2000);

    }

    var OnExecuteFuncaoAntesAdicionar = () => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](); }
            catch { }

        }, 2000);

    }

    var setaValoresSelect2 = function (campoForm, id, form, urlPesquisa, urlRetorno, campoDependente, valorDependente) {

        var campoFormulario = "#" + form + " #" + campoForm;
        var novoId = id.toString();

        $.ajax({
            url: urlPesquisa,
            data: {
                pesquisa: id,
                campoDependente: campoDependente,
                valorDependente: valorDependente,
                selecao: true
            },
            dataType: 'json',
            success: function (dados) {

                var cont = 0;

                for (var cont = 0; cont < dados.Retorno.length; cont++) {

                    var retorno = dados.Retorno[cont];

                    if (Number(novoId) == Number(retorno.id)) {

                        $(campoFormulario).select2("val", '');
                        $(campoFormulario).append(new Option(retorno.text, retorno.id, true, true)).trigger('change');

                    }

                }

            },
            error: function (message) { console.log(message); }
        });

    }

});</script><script type="text/javascript">var ModalPesquisar606002 = function (e, selecionados) {
    $("#ModalPesquisar606002").modal("hide");
};

var MontarUrlbtnPesquisarOperacaoFinanceiraId657418 = function (componente) {

    var valor = "";
    var camposdependecia = "";

    if (camposdependecia != "") {
        var qtdDependencias = camposdependecia.split(";");
        for (var i = 0; i < qtdDependencias.length; i++) {

            var campoDependente = $("#frmLancamento #" + qtdDependencias[i]);
            if (campoDependente)
                valor += (valor != "" ? ";" : "") + campoDependente.val();
        }
    }

    var url = componente.attr("href");
    if (valor !== "" && valor !== undefined) {
        if (url.indexOf('filtropesquisa=') !== -1)
            url = url.replace(/(filtropesquisa=).*?(&)/, '$1' + valor + '$2');
        else
            url = url + "?filtropesquisa=" + valor;
    }

    return url;

};

$("document").ready(function () {

    var pesquisaDialog = function (e) {

        e.preventDefault();

        if ($("#btnPesquisarOperacaoFinanceiraId657418").hasClass('m8-btn-desabilitado'))
            return false;

        var href = $("#btnPesquisarOperacaoFinanceiraId657418").attr("href");
        $("#btnPesquisarOperacaoFinanceiraId657418").attr("disabled", "disabled");
        $("#btnPesquisarOperacaoFinanceiraId657418").css("pointer-events", "none");
        $("#btnPesquisarOperacaoFinanceiraId657418").unbind("click");
        ConstruirModal(
            "ModalPesquisar606002",
            "btnPesquisarOperacaoFinanceiraId657418",
            "Seleção de Plano de Contas Financeiro",
            MontarUrlbtnPesquisarOperacaoFinanceiraId657418($(this)),
            { funcaoRetorno: "ModalPesquisar606002" },
            function (e) {  

                $("#btnPesquisarOperacaoFinanceiraId657418").attr("href", "#");
                setTimeout(() => {

                    try {
                        ModalPesquisarShow(e, "ModalPesquisar606002", "btnPesquisarOperacaoFinanceiraId657418");                        
                    } catch (c) { }

                    try {
                        $("#ModalPesquisar606002").attr("data-formulario-chamou", "#frmLancamento");
                        $("#ModalPesquisar606002").attr("data-formulario-chamou-extras-grid", "_FuncaoAntesEditar_");
                        $("#ModalPesquisar606002").attr("data-formulario-chamou-extras-form", "_FuncaoAntesEditar_");
                    } catch (e) { }

                }, 500);
                
            },
            function (e) {
                
                var seletorRetorno = $(".btnPesquisarOperacaoFinanceiraId657418").attr("data-form") + " #Id";
                var retorno = "";

                if (selecionados && selecionados.length == 1)
                    retorno = selecionados[0];
                else if (selecionados && selecionados.length > 1)
                    retorno = selecionados.toString();

                if (true) {
                    if (retorno !== "" && retorno != undefined) {

                        let campoDependente = ($(".OperacaoFinanceiraId63986").attr("data-dependente") ? $(".OperacaoFinanceiraId63986").attr("data-dependente") : "");
                        let valorDependente = ($(".OperacaoFinanceiraId63986").attr("data-valordependente") ? $(".OperacaoFinanceiraId63986").attr("data-valordependente") :
                                               $(".OperacaoFinanceiraId63986").attr("data-dependente") ? buscarValoresDependentes($(".OperacaoFinanceiraId63986"), $(".OperacaoFinanceiraId63986").closest("form").attr("id")) : "")

                        let urlDadosSelectDois = $("#btnPesquisarOperacaoFinanceiraId657418").attr("data-url-dados-select-dois") || "/treinamento/Financeiro/OperacaoFinanceirasReceberListaSelecao";
                        if (Array.isArray(valorDependente)) 
                            valorDependente = valorDependente.join(";");

                        $.ajax({
                            url: urlDadosSelectDois,
                            type: "POST",
                            data: {
                                pesquisa: retorno,
                                pagina: 0,
                                campoDependente: campoDependente,
                                valorDependente: valorDependente,
                                selecao: true
                            },
                            dataType: 'json',
                            success: function (dados) {
                                if (dados.Retorno.length > 0) {
                                    $.each(dados.Retorno, function (idx, val) {
                                        var newOption = new Option(val.text, val.id, true, true);
                                        $(".OperacaoFinanceiraId63986").append(newOption);
                                    });
                                    $(".OperacaoFinanceiraId63986").trigger('change');
                                    SetarFoco($("#frmLancamento .OperacaoFinanceiraId63986"));
                                    AvancarFocus(e, "#frmLancamento", $(".OperacaoFinanceiraId63986"), true);
                                }
                            }
                        });
                    }
                    if (typeof funcaoAposSelecao === "function") {
                        funcaoAposSelecao(selecionados);
                    }
                } else if (typeof funcaoAposSelecao === "function") {
                    funcaoAposSelecao(selecionados);
                }
                else {
                    $(".OperacaoFinanceiraId63986").val(retorno);
                    SetarFoco($("#frmLancamento .OperacaoFinanceiraId63986"));
                }

                $("#btnPesquisarOperacaoFinanceiraId657418").css("pointer-events", "initial");
                $("#btnPesquisarOperacaoFinanceiraId657418").removeAttr("disabled");
                $("#btnPesquisarOperacaoFinanceiraId657418").attr("href", href);
                $("#btnPesquisarOperacaoFinanceiraId657418").bind('click', pesquisaDialog);

            },
            $("#frmLancamento").attr("data-ajax-load"),
            {
                success: {
                    label: "Selecionar",
                    className: "btn-success",
                    callback: function () {

                        if (!selecionados || selecionados.length == 0) {

                            Notificacao.Aviso("Nenhum registro selecionado");
                            return false;

                        } else
                            $("#ModalPesquisar606002").modal("hide");
                        
                    }
                },
                close: {
                    label: "Fechar",
                    className: "btn-danger ",
                    callback: function () {
                        selecionados = "";
                        $("#ModalPesquisar606002").modal("hide");
                    }
                }
            },
            "modalPesquisa"
        );

    };

    $("#btnPesquisarOperacaoFinanceiraId657418").on("click", pesquisaDialog);

});</script><script type="text/javascript">$("document").ready(function () {

    var listenerValue = function (key) {

        let valor = "";

        setTimeout(() => {

            let item = localStorage.getItem(key);

            item = JSON.parse(item);

            if (item) {

                if (item.valor != "") {

                    if (item.valor !== "0") {

                        if (item.campoDependente != "" && item.valorDependente != "")
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, item.campoDependente, item.valorDependente);
                        else
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, null, null);

                        return item.valor;

                    }
                    else
                        return valor;

                } else
                    listenerValue(key);

            }
        }, 1000);
    }

    var processValue = function (key, e) {

        listenerValue(key);

    }

    $("#btnAdicionarOperacaoFinanceiraId677100").on("click", function (e) {

        e.preventDefault();


        var href = $(this).attr("href");
        var urlValidar = $(this).data("url_validar_usuario");
        var urlPermissaoValidar = $(this).data("url_permissao_validar");
        var urlDados = $(this).data("url_dados");
        var acaoAdicionarCustomizada = $(this).data("acao_adicionar_customizada");
        var id = $($(this).parent().parent().children()[0]).val();
        var campo = ($(this).parent().parent().children()[0]).name;
        var hasCampoId = "null" != "null";
        var campoId = $("#" + $(this).parents("form").first().attr("Id") + " #null").val();

        if (hasCampoId && (campoId == null || campoId == undefined)) {

            var msgCampoId = "null" == "null" ? "Campo dependência não informado: 'null'" : "null";
            Notificacao.Alerta(msgCampoId);

            return;
        }

        if (campoId != null)
            id = campoId;

        var campoDependente = "";
        var valorDependente = "";

        if ($('#' + campo).data('dependente') != null) {

            campoDependente = $('#' + campo).data('dependente');
            valorDependente = $('#' + $('#' + campo).data('dependente').split(';')[0]).val();

        }

        var idString = id ? id.toString() : "";

        if (idString === "") {

            idString = $($(this).parent().parent().children()[0]).attr('data-idConsulta') + "";
            id = $($(this).parent().parent().children()[0]).attr('data-idConsulta');

        }

        var hrefAux = "";
        var formName = $($("li.active a").attr("href")).find("form").attr("id");

        if (formName === undefined || formName == null)
            formName = (document.getElementsByTagName("form")[0]).id;

        var hashAbaAtual = ($(".nav li.active a").attr("data-m8-hash"));

        let storageAba = {
            hashPai: hashAbaAtual
        };


        var hrefUrlValidar = href;

        if (acaoAdicionarCustomizada) {
            hrefUrlValidar = decodeURIComponent(hrefUrlValidar);
        }
        else {
            if (decodeURIComponent(hrefUrlValidar).indexOf("?"))
                hrefUrlValidar = decodeURIComponent(hrefUrlValidar).split('?')[0];
        }

        if (urlPermissaoValidar != undefined && urlPermissaoValidar != null)
            hrefUrlValidar = urlPermissaoValidar;

        $.ajax({
            url: urlValidar,
            data: { urlValidar: hrefUrlValidar },
            dataType: 'json',
            async: false,
            success: function (res) {

                if (res.Data == true) {

                    let element = {
                        href: href,
                        campo: campo,
                        urlDados: urlDados,
                        formName: formName,
                        valorDependente: valorDependente,
                        campoDependente: campoDependente,
                        id: idString,
                        valor: ""
                    };

                    href = SetAnsii(href);

                    if (href.toLowerCase().endsWith('modal'))
                        hrefAux = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

                    if (idString && idString.length > 0)
                        hrefAux += '/' + id;

                    localStorage.setItem(hrefAux.hashCode() + "1", JSON.stringify(storageAba));
                    localStorage.setItem(hrefAux.hashCode(), JSON.stringify(element));
                    processValue(hrefAux.hashCode(), e);

                    ChamarAbaAdicionarEditar(e, href, id, acaoAdicionarCustomizada);

                }
                else
                    Notificacao.Alerta("Usuário sem permissão de acesso.");

            }
        });
    });

    var SetAnsii = (href) => {

        href = href.replace("%3f", "?");
        href = href.replace("%3d", "=");
        href = href.replace("%23", "#");
        href = href.replace("%26", "&");

        return href;
    }

    var ChamarAbaAdicionarEditar = function (e, href, id, acaoAdicionarCustomizada) {

        var eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesAdicionar() };

        if (href.toLowerCase().endsWith('modal'))
            href = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

        if (id && id.length > 0) {

            if (acaoAdicionarCustomizada) {
                href += id
            } else {
                var parans = href.split('?');
                href = parans[0] + '/' + id;
                if (parans.length > 1)
                    href += '?' + parans[1];
            }

            eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesEditar(id) };

        }

        var paginaPrincipal = window.parent;

        href = GetUrlParamValues(href, acaoAdicionarCustomizada);

        if (typeof paginaPrincipal.AbrirNovaAba === "function")
            paginaPrincipal.AbrirNovaAba("...", href, undefined, undefined, undefined, true, eventoAposAbrirAbaNova);

    }

    var GetUrlParamValues = (href, acaoAdicionarCustomizada) => {

        var hasParans = href.includes('?') && (href.includes('#') || href.includes('.'));

        if (!acaoAdicionarCustomizada && hasParans) {

            var parans = href.split('?')[1].split('&');

            for (var i = 0; i < parans.length; i++) {

                var paran = parans[i].split('=');
                var value = $(paran[1]).val();

                if (value != undefined)
                    href = href.replace(paran[1], value);
                else {

                    href = href.replace(parans[i], "");

                    if (href.endsWith('&'))
                        href = href.substring(0, href.length - 3);

                }
            }

        }

        return href;

    }

    var OnExecuteFuncaoAntesEditar = (id) => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](id); }
            catch { }

        }, 2000);

    }

    var OnExecuteFuncaoAntesAdicionar = () => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](); }
            catch { }

        }, 2000);

    }

    var setaValoresSelect2 = function (campoForm, id, form, urlPesquisa, urlRetorno, campoDependente, valorDependente) {

        var campoFormulario = "#" + form + " #" + campoForm;
        var novoId = id.toString();

        $.ajax({
            url: urlPesquisa,
            data: {
                pesquisa: id,
                campoDependente: campoDependente,
                valorDependente: valorDependente,
                selecao: true
            },
            dataType: 'json',
            success: function (dados) {

                var cont = 0;

                for (var cont = 0; cont < dados.Retorno.length; cont++) {

                    var retorno = dados.Retorno[cont];

                    if (Number(novoId) == Number(retorno.id)) {

                        $(campoFormulario).select2("val", '');
                        $(campoFormulario).append(new Option(retorno.text, retorno.id, true, true)).trigger('change');

                    }

                }

            },
            error: function (message) { console.log(message); }
        });

    }

});</script><script type="text/javascript">var ModalPesquisar632584 = function (e, selecionados) {
    $("#ModalPesquisar632584").modal("hide");
};

var MontarUrlbtnPesquisarMeioPagamentoId949607 = function (componente) {

    var valor = "";
    var camposdependecia = "";

    if (camposdependecia != "") {
        var qtdDependencias = camposdependecia.split(";");
        for (var i = 0; i < qtdDependencias.length; i++) {

            var campoDependente = $("#frmLancamento #" + qtdDependencias[i]);
            if (campoDependente)
                valor += (valor != "" ? ";" : "") + campoDependente.val();
        }
    }

    var url = componente.attr("href");
    if (valor !== "" && valor !== undefined) {
        if (url.indexOf('filtropesquisa=') !== -1)
            url = url.replace(/(filtropesquisa=).*?(&)/, '$1' + valor + '$2');
        else
            url = url + "?filtropesquisa=" + valor;
    }

    return url;

};

$("document").ready(function () {

    var pesquisaDialog = function (e) {

        e.preventDefault();

        if ($("#btnPesquisarMeioPagamentoId949607").hasClass('m8-btn-desabilitado'))
            return false;

        var href = $("#btnPesquisarMeioPagamentoId949607").attr("href");
        $("#btnPesquisarMeioPagamentoId949607").attr("disabled", "disabled");
        $("#btnPesquisarMeioPagamentoId949607").css("pointer-events", "none");
        $("#btnPesquisarMeioPagamentoId949607").unbind("click");
        ConstruirModal(
            "ModalPesquisar632584",
            "btnPesquisarMeioPagamentoId949607",
            "Seleção do Meio Pagamento",
            MontarUrlbtnPesquisarMeioPagamentoId949607($(this)),
            { funcaoRetorno: "ModalPesquisar632584" },
            function (e) {  

                $("#btnPesquisarMeioPagamentoId949607").attr("href", "#");
                setTimeout(() => {

                    try {
                        ModalPesquisarShow(e, "ModalPesquisar632584", "btnPesquisarMeioPagamentoId949607");                        
                    } catch (c) { }

                    try {
                        $("#ModalPesquisar632584").attr("data-formulario-chamou", "#frmLancamento");
                        $("#ModalPesquisar632584").attr("data-formulario-chamou-extras-grid", "_FuncaoAntesEditar_");
                        $("#ModalPesquisar632584").attr("data-formulario-chamou-extras-form", "_FuncaoAntesEditar_");
                    } catch (e) { }

                }, 500);
                
            },
            function (e) {
                
                var seletorRetorno = $(".btnPesquisarMeioPagamentoId949607").attr("data-form") + " #Id";
                var retorno = "";

                if (selecionados && selecionados.length == 1)
                    retorno = selecionados[0];
                else if (selecionados && selecionados.length > 1)
                    retorno = selecionados.toString();

                if (true) {
                    if (retorno !== "" && retorno != undefined) {

                        let campoDependente = ($(".MeioPagamentoId430226").attr("data-dependente") ? $(".MeioPagamentoId430226").attr("data-dependente") : "");
                        let valorDependente = ($(".MeioPagamentoId430226").attr("data-valordependente") ? $(".MeioPagamentoId430226").attr("data-valordependente") :
                                               $(".MeioPagamentoId430226").attr("data-dependente") ? buscarValoresDependentes($(".MeioPagamentoId430226"), $(".MeioPagamentoId430226").closest("form").attr("id")) : "")

                        let urlDadosSelectDois = $("#btnPesquisarMeioPagamentoId949607").attr("data-url-dados-select-dois") || "/treinamento/Financeiro/MeioPagamentosListaSelecao";
                        if (Array.isArray(valorDependente)) 
                            valorDependente = valorDependente.join(";");

                        $.ajax({
                            url: urlDadosSelectDois,
                            type: "POST",
                            data: {
                                pesquisa: retorno,
                                pagina: 0,
                                campoDependente: campoDependente,
                                valorDependente: valorDependente,
                                selecao: true
                            },
                            dataType: 'json',
                            success: function (dados) {
                                if (dados.Retorno.length > 0) {
                                    $.each(dados.Retorno, function (idx, val) {
                                        var newOption = new Option(val.text, val.id, true, true);
                                        $(".MeioPagamentoId430226").append(newOption);
                                    });
                                    $(".MeioPagamentoId430226").trigger('change');
                                    SetarFoco($("#frmLancamento .MeioPagamentoId430226"));
                                    AvancarFocus(e, "#frmLancamento", $(".MeioPagamentoId430226"), true);
                                }
                            }
                        });
                    }
                    if (typeof funcaoAposSelecao === "function") {
                        funcaoAposSelecao(selecionados);
                    }
                } else if (typeof funcaoAposSelecao === "function") {
                    funcaoAposSelecao(selecionados);
                }
                else {
                    $(".MeioPagamentoId430226").val(retorno);
                    SetarFoco($("#frmLancamento .MeioPagamentoId430226"));
                }

                $("#btnPesquisarMeioPagamentoId949607").css("pointer-events", "initial");
                $("#btnPesquisarMeioPagamentoId949607").removeAttr("disabled");
                $("#btnPesquisarMeioPagamentoId949607").attr("href", href);
                $("#btnPesquisarMeioPagamentoId949607").bind('click', pesquisaDialog);

            },
            $("#frmLancamento").attr("data-ajax-load"),
            {
                success: {
                    label: "Selecionar",
                    className: "btn-success",
                    callback: function () {

                        if (!selecionados || selecionados.length == 0) {

                            Notificacao.Aviso("Nenhum registro selecionado");
                            return false;

                        } else
                            $("#ModalPesquisar632584").modal("hide");
                        
                    }
                },
                close: {
                    label: "Fechar",
                    className: "btn-danger ",
                    callback: function () {
                        selecionados = "";
                        $("#ModalPesquisar632584").modal("hide");
                    }
                }
            },
            "modalPesquisa"
        );

    };

    $("#btnPesquisarMeioPagamentoId949607").on("click", pesquisaDialog);

});</script><script type="text/javascript">var ModalPesquisar89341 = function (e, selecionados) {
    $("#ModalPesquisar89341").modal("hide");
};

var MontarUrlbtnPesquisarContaCaixaBancoOrigemId820981 = function (componente) {

    var valor = "";
    var camposdependecia = "OperacaoFinanceiraId";

    if (camposdependecia != "") {
        var qtdDependencias = camposdependecia.split(";");
        for (var i = 0; i < qtdDependencias.length; i++) {

            var campoDependente = $("#frmLancamento #" + qtdDependencias[i]);
            if (campoDependente)
                valor += (valor != "" ? ";" : "") + campoDependente.val();
        }
    }

    var url = componente.attr("href");
    if (valor !== "" && valor !== undefined) {
        if (url.indexOf('filtropesquisa=') !== -1)
            url = url.replace(/(filtropesquisa=).*?(&)/, '$1' + valor + '$2');
        else
            url = url + "?filtropesquisa=" + valor;
    }

    return url;

};

$("document").ready(function () {

    var pesquisaDialog = function (e) {

        e.preventDefault();

        if ($("#btnPesquisarContaCaixaBancoOrigemId820981").hasClass('m8-btn-desabilitado'))
            return false;

        var href = $("#btnPesquisarContaCaixaBancoOrigemId820981").attr("href");
        $("#btnPesquisarContaCaixaBancoOrigemId820981").attr("disabled", "disabled");
        $("#btnPesquisarContaCaixaBancoOrigemId820981").css("pointer-events", "none");
        $("#btnPesquisarContaCaixaBancoOrigemId820981").unbind("click");
        ConstruirModal(
            "ModalPesquisar89341",
            "btnPesquisarContaCaixaBancoOrigemId820981",
            "Pesquisar Conta Origem",
            MontarUrlbtnPesquisarContaCaixaBancoOrigemId820981($(this)),
            { funcaoRetorno: "ModalPesquisar89341" },
            function (e) {  

                $("#btnPesquisarContaCaixaBancoOrigemId820981").attr("href", "#");
                setTimeout(() => {

                    try {
                        ModalPesquisarShow(e, "ModalPesquisar89341", "btnPesquisarContaCaixaBancoOrigemId820981");                        
                    } catch (c) { }

                    try {
                        $("#ModalPesquisar89341").attr("data-formulario-chamou", "#frmLancamento");
                        $("#ModalPesquisar89341").attr("data-formulario-chamou-extras-grid", "_FuncaoAntesEditar_");
                        $("#ModalPesquisar89341").attr("data-formulario-chamou-extras-form", "_FuncaoAntesEditar_");
                    } catch (e) { }

                }, 500);
                
            },
            function (e) {
                
                var seletorRetorno = $(".btnPesquisarContaCaixaBancoOrigemId820981").attr("data-form") + " #Id";
                var retorno = "";

                if (selecionados && selecionados.length == 1)
                    retorno = selecionados[0];
                else if (selecionados && selecionados.length > 1)
                    retorno = selecionados.toString();

                if (true) {
                    if (retorno !== "" && retorno != undefined) {

                        let campoDependente = ($(".ContaCaixaBancoOrigemId531015").attr("data-dependente") ? $(".ContaCaixaBancoOrigemId531015").attr("data-dependente") : "");
                        let valorDependente = ($(".ContaCaixaBancoOrigemId531015").attr("data-valordependente") ? $(".ContaCaixaBancoOrigemId531015").attr("data-valordependente") :
                                               $(".ContaCaixaBancoOrigemId531015").attr("data-dependente") ? buscarValoresDependentes($(".ContaCaixaBancoOrigemId531015"), $(".ContaCaixaBancoOrigemId531015").closest("form").attr("id")) : "")

                        let urlDadosSelectDois = $("#btnPesquisarContaCaixaBancoOrigemId820981").attr("data-url-dados-select-dois") || "/treinamento/Contabil/ContaContabeisLancamentoFinanceiroListaSelecao";
                        if (Array.isArray(valorDependente)) 
                            valorDependente = valorDependente.join(";");

                        $.ajax({
                            url: urlDadosSelectDois,
                            type: "POST",
                            data: {
                                pesquisa: retorno,
                                pagina: 0,
                                campoDependente: campoDependente,
                                valorDependente: valorDependente,
                                selecao: true
                            },
                            dataType: 'json',
                            success: function (dados) {
                                if (dados.Retorno.length > 0) {
                                    $.each(dados.Retorno, function (idx, val) {
                                        var newOption = new Option(val.text, val.id, true, true);
                                        $(".ContaCaixaBancoOrigemId531015").append(newOption);
                                    });
                                    $(".ContaCaixaBancoOrigemId531015").trigger('change');
                                    SetarFoco($("#frmLancamento .ContaCaixaBancoOrigemId531015"));
                                    AvancarFocus(e, "#frmLancamento", $(".ContaCaixaBancoOrigemId531015"), true);
                                }
                            }
                        });
                    }
                    if (typeof funcaoAposSelecao === "function") {
                        funcaoAposSelecao(selecionados);
                    }
                } else if (typeof funcaoAposSelecao === "function") {
                    funcaoAposSelecao(selecionados);
                }
                else {
                    $(".ContaCaixaBancoOrigemId531015").val(retorno);
                    SetarFoco($("#frmLancamento .ContaCaixaBancoOrigemId531015"));
                }

                $("#btnPesquisarContaCaixaBancoOrigemId820981").css("pointer-events", "initial");
                $("#btnPesquisarContaCaixaBancoOrigemId820981").removeAttr("disabled");
                $("#btnPesquisarContaCaixaBancoOrigemId820981").attr("href", href);
                $("#btnPesquisarContaCaixaBancoOrigemId820981").bind('click', pesquisaDialog);

            },
            $("#frmLancamento").attr("data-ajax-load"),
            {
                success: {
                    label: "Selecionar",
                    className: "btn-success",
                    callback: function () {

                        if (!selecionados || selecionados.length == 0) {

                            Notificacao.Aviso("Nenhum registro selecionado");
                            return false;

                        } else
                            $("#ModalPesquisar89341").modal("hide");
                        
                    }
                },
                close: {
                    label: "Fechar",
                    className: "btn-danger ",
                    callback: function () {
                        selecionados = "";
                        $("#ModalPesquisar89341").modal("hide");
                    }
                }
            },
            "modalPesquisa"
        );

    };

    $("#btnPesquisarContaCaixaBancoOrigemId820981").on("click", pesquisaDialog);

});</script><script type="text/javascript">$("document").ready(function () {

    var listenerValue = function (key) {

        let valor = "";

        setTimeout(() => {

            let item = localStorage.getItem(key);

            item = JSON.parse(item);

            if (item) {

                if (item.valor != "") {

                    if (item.valor !== "0") {

                        if (item.campoDependente != "" && item.valorDependente != "")
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, item.campoDependente, item.valorDependente);
                        else
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, null, null);

                        return item.valor;

                    }
                    else
                        return valor;

                } else
                    listenerValue(key);

            }
        }, 1000);
    }

    var processValue = function (key, e) {

        listenerValue(key);

    }

    $("#btnAdicionarContaCaixaBancoOrigemId613282").on("click", function (e) {

        e.preventDefault();


        var href = $(this).attr("href");
        var urlValidar = $(this).data("url_validar_usuario");
        var urlPermissaoValidar = $(this).data("url_permissao_validar");
        var urlDados = $(this).data("url_dados");
        var acaoAdicionarCustomizada = $(this).data("acao_adicionar_customizada");
        var id = $($(this).parent().parent().children()[0]).val();
        var campo = ($(this).parent().parent().children()[0]).name;
        var hasCampoId = "null" != "null";
        var campoId = $("#" + $(this).parents("form").first().attr("Id") + " #null").val();

        if (hasCampoId && (campoId == null || campoId == undefined)) {

            var msgCampoId = "null" == "null" ? "Campo dependência não informado: 'null'" : "null";
            Notificacao.Alerta(msgCampoId);

            return;
        }

        if (campoId != null)
            id = campoId;

        var campoDependente = "";
        var valorDependente = "";

        if ($('#' + campo).data('dependente') != null) {

            campoDependente = $('#' + campo).data('dependente');
            valorDependente = $('#' + $('#' + campo).data('dependente').split(';')[0]).val();

        }

        var idString = id ? id.toString() : "";

        if (idString === "") {

            idString = $($(this).parent().parent().children()[0]).attr('data-idConsulta') + "";
            id = $($(this).parent().parent().children()[0]).attr('data-idConsulta');

        }

        var hrefAux = "";
        var formName = $($("li.active a").attr("href")).find("form").attr("id");

        if (formName === undefined || formName == null)
            formName = (document.getElementsByTagName("form")[0]).id;

        var hashAbaAtual = ($(".nav li.active a").attr("data-m8-hash"));

        let storageAba = {
            hashPai: hashAbaAtual
        };


        var hrefUrlValidar = href;

        if (acaoAdicionarCustomizada) {
            hrefUrlValidar = decodeURIComponent(hrefUrlValidar);
        }
        else {
            if (decodeURIComponent(hrefUrlValidar).indexOf("?"))
                hrefUrlValidar = decodeURIComponent(hrefUrlValidar).split('?')[0];
        }

        if (urlPermissaoValidar != undefined && urlPermissaoValidar != null)
            hrefUrlValidar = urlPermissaoValidar;

        $.ajax({
            url: urlValidar,
            data: { urlValidar: hrefUrlValidar },
            dataType: 'json',
            async: false,
            success: function (res) {

                if (res.Data == true) {

                    let element = {
                        href: href,
                        campo: campo,
                        urlDados: urlDados,
                        formName: formName,
                        valorDependente: valorDependente,
                        campoDependente: campoDependente,
                        id: idString,
                        valor: ""
                    };

                    href = SetAnsii(href);

                    if (href.toLowerCase().endsWith('modal'))
                        hrefAux = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

                    if (idString && idString.length > 0)
                        hrefAux += '/' + id;

                    localStorage.setItem(hrefAux.hashCode() + "1", JSON.stringify(storageAba));
                    localStorage.setItem(hrefAux.hashCode(), JSON.stringify(element));
                    processValue(hrefAux.hashCode(), e);

                    ChamarAbaAdicionarEditar(e, href, id, acaoAdicionarCustomizada);

                }
                else
                    Notificacao.Alerta("Usuário sem permissão de acesso.");

            }
        });
    });

    var SetAnsii = (href) => {

        href = href.replace("%3f", "?");
        href = href.replace("%3d", "=");
        href = href.replace("%23", "#");
        href = href.replace("%26", "&");

        return href;
    }

    var ChamarAbaAdicionarEditar = function (e, href, id, acaoAdicionarCustomizada) {

        var eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesAdicionar() };

        if (href.toLowerCase().endsWith('modal'))
            href = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

        if (id && id.length > 0) {

            if (acaoAdicionarCustomizada) {
                href += id
            } else {
                var parans = href.split('?');
                href = parans[0] + '/' + id;
                if (parans.length > 1)
                    href += '?' + parans[1];
            }

            eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesEditar(id) };

        }

        var paginaPrincipal = window.parent;

        href = GetUrlParamValues(href, acaoAdicionarCustomizada);

        if (typeof paginaPrincipal.AbrirNovaAba === "function")
            paginaPrincipal.AbrirNovaAba("...", href, undefined, undefined, undefined, true, eventoAposAbrirAbaNova);

    }

    var GetUrlParamValues = (href, acaoAdicionarCustomizada) => {

        var hasParans = href.includes('?') && (href.includes('#') || href.includes('.'));

        if (!acaoAdicionarCustomizada && hasParans) {

            var parans = href.split('?')[1].split('&');

            for (var i = 0; i < parans.length; i++) {

                var paran = parans[i].split('=');
                var value = $(paran[1]).val();

                if (value != undefined)
                    href = href.replace(paran[1], value);
                else {

                    href = href.replace(parans[i], "");

                    if (href.endsWith('&'))
                        href = href.substring(0, href.length - 3);

                }
            }

        }

        return href;

    }

    var OnExecuteFuncaoAntesEditar = (id) => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](id); }
            catch { }

        }, 2000);

    }

    var OnExecuteFuncaoAntesAdicionar = () => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](); }
            catch { }

        }, 2000);

    }

    var setaValoresSelect2 = function (campoForm, id, form, urlPesquisa, urlRetorno, campoDependente, valorDependente) {

        var campoFormulario = "#" + form + " #" + campoForm;
        var novoId = id.toString();

        $.ajax({
            url: urlPesquisa,
            data: {
                pesquisa: id,
                campoDependente: campoDependente,
                valorDependente: valorDependente,
                selecao: true
            },
            dataType: 'json',
            success: function (dados) {

                var cont = 0;

                for (var cont = 0; cont < dados.Retorno.length; cont++) {

                    var retorno = dados.Retorno[cont];

                    if (Number(novoId) == Number(retorno.id)) {

                        $(campoFormulario).select2("val", '');
                        $(campoFormulario).append(new Option(retorno.text, retorno.id, true, true)).trigger('change');

                    }

                }

            },
            error: function (message) { console.log(message); }
        });

    }

});</script><script type="text/javascript">var ModalPesquisar158905 = function (e, selecionados) {
    $("#ModalPesquisar158905").modal("hide");
};

var MontarUrlbtnPesquisarContaCaixaBancoDestinoId629301 = function (componente) {

    var valor = "";
    var camposdependecia = "";

    if (camposdependecia != "") {
        var qtdDependencias = camposdependecia.split(";");
        for (var i = 0; i < qtdDependencias.length; i++) {

            var campoDependente = $("#frmLancamento #" + qtdDependencias[i]);
            if (campoDependente)
                valor += (valor != "" ? ";" : "") + campoDependente.val();
        }
    }

    var url = componente.attr("href");
    if (valor !== "" && valor !== undefined) {
        if (url.indexOf('filtropesquisa=') !== -1)
            url = url.replace(/(filtropesquisa=).*?(&)/, '$1' + valor + '$2');
        else
            url = url + "?filtropesquisa=" + valor;
    }

    return url;

};

$("document").ready(function () {

    var pesquisaDialog = function (e) {

        e.preventDefault();

        if ($("#btnPesquisarContaCaixaBancoDestinoId629301").hasClass('m8-btn-desabilitado'))
            return false;

        var href = $("#btnPesquisarContaCaixaBancoDestinoId629301").attr("href");
        $("#btnPesquisarContaCaixaBancoDestinoId629301").attr("disabled", "disabled");
        $("#btnPesquisarContaCaixaBancoDestinoId629301").css("pointer-events", "none");
        $("#btnPesquisarContaCaixaBancoDestinoId629301").unbind("click");
        ConstruirModal(
            "ModalPesquisar158905",
            "btnPesquisarContaCaixaBancoDestinoId629301",
            "Seleção de Conta Destino",
            MontarUrlbtnPesquisarContaCaixaBancoDestinoId629301($(this)),
            { funcaoRetorno: "ModalPesquisar158905" },
            function (e) {  

                $("#btnPesquisarContaCaixaBancoDestinoId629301").attr("href", "#");
                setTimeout(() => {

                    try {
                        ModalPesquisarShow(e, "ModalPesquisar158905", "btnPesquisarContaCaixaBancoDestinoId629301");                        
                    } catch (c) { }

                    try {
                        $("#ModalPesquisar158905").attr("data-formulario-chamou", "#frmLancamento");
                        $("#ModalPesquisar158905").attr("data-formulario-chamou-extras-grid", "_FuncaoAntesEditar_");
                        $("#ModalPesquisar158905").attr("data-formulario-chamou-extras-form", "_FuncaoAntesEditar_");
                    } catch (e) { }

                }, 500);
                
            },
            function (e) {
                
                var seletorRetorno = $(".btnPesquisarContaCaixaBancoDestinoId629301").attr("data-form") + " #Id";
                var retorno = "";

                if (selecionados && selecionados.length == 1)
                    retorno = selecionados[0];
                else if (selecionados && selecionados.length > 1)
                    retorno = selecionados.toString();

                if (true) {
                    if (retorno !== "" && retorno != undefined) {

                        let campoDependente = ($(".ContaCaixaBancoDestinoId905460").attr("data-dependente") ? $(".ContaCaixaBancoDestinoId905460").attr("data-dependente") : "");
                        let valorDependente = ($(".ContaCaixaBancoDestinoId905460").attr("data-valordependente") ? $(".ContaCaixaBancoDestinoId905460").attr("data-valordependente") :
                                               $(".ContaCaixaBancoDestinoId905460").attr("data-dependente") ? buscarValoresDependentes($(".ContaCaixaBancoDestinoId905460"), $(".ContaCaixaBancoDestinoId905460").closest("form").attr("id")) : "")

                        let urlDadosSelectDois = $("#btnPesquisarContaCaixaBancoDestinoId629301").attr("data-url-dados-select-dois") || "/treinamento/Contabil/ContaContabeisListaSelecao";
                        if (Array.isArray(valorDependente)) 
                            valorDependente = valorDependente.join(";");

                        $.ajax({
                            url: urlDadosSelectDois,
                            type: "POST",
                            data: {
                                pesquisa: retorno,
                                pagina: 0,
                                campoDependente: campoDependente,
                                valorDependente: valorDependente,
                                selecao: true
                            },
                            dataType: 'json',
                            success: function (dados) {
                                if (dados.Retorno.length > 0) {
                                    $.each(dados.Retorno, function (idx, val) {
                                        var newOption = new Option(val.text, val.id, true, true);
                                        $(".ContaCaixaBancoDestinoId905460").append(newOption);
                                    });
                                    $(".ContaCaixaBancoDestinoId905460").trigger('change');
                                    SetarFoco($("#frmLancamento .ContaCaixaBancoDestinoId905460"));
                                    AvancarFocus(e, "#frmLancamento", $(".ContaCaixaBancoDestinoId905460"), true);
                                }
                            }
                        });
                    }
                    if (typeof funcaoAposSelecao === "function") {
                        funcaoAposSelecao(selecionados);
                    }
                } else if (typeof funcaoAposSelecao === "function") {
                    funcaoAposSelecao(selecionados);
                }
                else {
                    $(".ContaCaixaBancoDestinoId905460").val(retorno);
                    SetarFoco($("#frmLancamento .ContaCaixaBancoDestinoId905460"));
                }

                $("#btnPesquisarContaCaixaBancoDestinoId629301").css("pointer-events", "initial");
                $("#btnPesquisarContaCaixaBancoDestinoId629301").removeAttr("disabled");
                $("#btnPesquisarContaCaixaBancoDestinoId629301").attr("href", href);
                $("#btnPesquisarContaCaixaBancoDestinoId629301").bind('click', pesquisaDialog);

            },
            $("#frmLancamento").attr("data-ajax-load"),
            {
                success: {
                    label: "Selecionar",
                    className: "btn-success",
                    callback: function () {

                        if (!selecionados || selecionados.length == 0) {

                            Notificacao.Aviso("Nenhum registro selecionado");
                            return false;

                        } else
                            $("#ModalPesquisar158905").modal("hide");
                        
                    }
                },
                close: {
                    label: "Fechar",
                    className: "btn-danger ",
                    callback: function () {
                        selecionados = "";
                        $("#ModalPesquisar158905").modal("hide");
                    }
                }
            },
            "modalPesquisa"
        );

    };

    $("#btnPesquisarContaCaixaBancoDestinoId629301").on("click", pesquisaDialog);

});</script><script type="text/javascript">$("document").ready(function () {

    var listenerValue = function (key) {

        let valor = "";

        setTimeout(() => {

            let item = localStorage.getItem(key);

            item = JSON.parse(item);

            if (item) {

                if (item.valor != "") {

                    if (item.valor !== "0") {

                        if (item.campoDependente != "" && item.valorDependente != "")
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, item.campoDependente, item.valorDependente);
                        else
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, null, null);

                        return item.valor;

                    }
                    else
                        return valor;

                } else
                    listenerValue(key);

            }
        }, 1000);
    }

    var processValue = function (key, e) {

        listenerValue(key);

    }

    $("#btnAdicionarContaCaixaBancoDestinoId12068").on("click", function (e) {

        e.preventDefault();


        var href = $(this).attr("href");
        var urlValidar = $(this).data("url_validar_usuario");
        var urlPermissaoValidar = $(this).data("url_permissao_validar");
        var urlDados = $(this).data("url_dados");
        var acaoAdicionarCustomizada = $(this).data("acao_adicionar_customizada");
        var id = $($(this).parent().parent().children()[0]).val();
        var campo = ($(this).parent().parent().children()[0]).name;
        var hasCampoId = "null" != "null";
        var campoId = $("#" + $(this).parents("form").first().attr("Id") + " #null").val();

        if (hasCampoId && (campoId == null || campoId == undefined)) {

            var msgCampoId = "null" == "null" ? "Campo dependência não informado: 'null'" : "null";
            Notificacao.Alerta(msgCampoId);

            return;
        }

        if (campoId != null)
            id = campoId;

        var campoDependente = "";
        var valorDependente = "";

        if ($('#' + campo).data('dependente') != null) {

            campoDependente = $('#' + campo).data('dependente');
            valorDependente = $('#' + $('#' + campo).data('dependente').split(';')[0]).val();

        }

        var idString = id ? id.toString() : "";

        if (idString === "") {

            idString = $($(this).parent().parent().children()[0]).attr('data-idConsulta') + "";
            id = $($(this).parent().parent().children()[0]).attr('data-idConsulta');

        }

        var hrefAux = "";
        var formName = $($("li.active a").attr("href")).find("form").attr("id");

        if (formName === undefined || formName == null)
            formName = (document.getElementsByTagName("form")[0]).id;

        var hashAbaAtual = ($(".nav li.active a").attr("data-m8-hash"));

        let storageAba = {
            hashPai: hashAbaAtual
        };


        var hrefUrlValidar = href;

        if (acaoAdicionarCustomizada) {
            hrefUrlValidar = decodeURIComponent(hrefUrlValidar);
        }
        else {
            if (decodeURIComponent(hrefUrlValidar).indexOf("?"))
                hrefUrlValidar = decodeURIComponent(hrefUrlValidar).split('?')[0];
        }

        if (urlPermissaoValidar != undefined && urlPermissaoValidar != null)
            hrefUrlValidar = urlPermissaoValidar;

        $.ajax({
            url: urlValidar,
            data: { urlValidar: hrefUrlValidar },
            dataType: 'json',
            async: false,
            success: function (res) {

                if (res.Data == true) {

                    let element = {
                        href: href,
                        campo: campo,
                        urlDados: urlDados,
                        formName: formName,
                        valorDependente: valorDependente,
                        campoDependente: campoDependente,
                        id: idString,
                        valor: ""
                    };

                    href = SetAnsii(href);

                    if (href.toLowerCase().endsWith('modal'))
                        hrefAux = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

                    if (idString && idString.length > 0)
                        hrefAux += '/' + id;

                    localStorage.setItem(hrefAux.hashCode() + "1", JSON.stringify(storageAba));
                    localStorage.setItem(hrefAux.hashCode(), JSON.stringify(element));
                    processValue(hrefAux.hashCode(), e);

                    ChamarAbaAdicionarEditar(e, href, id, acaoAdicionarCustomizada);

                }
                else
                    Notificacao.Alerta("Usuário sem permissão de acesso.");

            }
        });
    });

    var SetAnsii = (href) => {

        href = href.replace("%3f", "?");
        href = href.replace("%3d", "=");
        href = href.replace("%23", "#");
        href = href.replace("%26", "&");

        return href;
    }

    var ChamarAbaAdicionarEditar = function (e, href, id, acaoAdicionarCustomizada) {

        var eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesAdicionar() };

        if (href.toLowerCase().endsWith('modal'))
            href = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

        if (id && id.length > 0) {

            if (acaoAdicionarCustomizada) {
                href += id
            } else {
                var parans = href.split('?');
                href = parans[0] + '/' + id;
                if (parans.length > 1)
                    href += '?' + parans[1];
            }

            eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesEditar(id) };

        }

        var paginaPrincipal = window.parent;

        href = GetUrlParamValues(href, acaoAdicionarCustomizada);

        if (typeof paginaPrincipal.AbrirNovaAba === "function")
            paginaPrincipal.AbrirNovaAba("...", href, undefined, undefined, undefined, true, eventoAposAbrirAbaNova);

    }

    var GetUrlParamValues = (href, acaoAdicionarCustomizada) => {

        var hasParans = href.includes('?') && (href.includes('#') || href.includes('.'));

        if (!acaoAdicionarCustomizada && hasParans) {

            var parans = href.split('?')[1].split('&');

            for (var i = 0; i < parans.length; i++) {

                var paran = parans[i].split('=');
                var value = $(paran[1]).val();

                if (value != undefined)
                    href = href.replace(paran[1], value);
                else {

                    href = href.replace(parans[i], "");

                    if (href.endsWith('&'))
                        href = href.substring(0, href.length - 3);

                }
            }

        }

        return href;

    }

    var OnExecuteFuncaoAntesEditar = (id) => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](id); }
            catch { }

        }, 2000);

    }

    var OnExecuteFuncaoAntesAdicionar = () => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](); }
            catch { }

        }, 2000);

    }

    var setaValoresSelect2 = function (campoForm, id, form, urlPesquisa, urlRetorno, campoDependente, valorDependente) {

        var campoFormulario = "#" + form + " #" + campoForm;
        var novoId = id.toString();

        $.ajax({
            url: urlPesquisa,
            data: {
                pesquisa: id,
                campoDependente: campoDependente,
                valorDependente: valorDependente,
                selecao: true
            },
            dataType: 'json',
            success: function (dados) {

                var cont = 0;

                for (var cont = 0; cont < dados.Retorno.length; cont++) {

                    var retorno = dados.Retorno[cont];

                    if (Number(novoId) == Number(retorno.id)) {

                        $(campoFormulario).select2("val", '');
                        $(campoFormulario).append(new Option(retorno.text, retorno.id, true, true)).trigger('change');

                    }

                }

            },
            error: function (message) { console.log(message); }
        });

    }

});</script><script type="text/javascript">var ModalPesquisar333703 = function (e, selecionados) {
    $("#ModalPesquisar333703").modal("hide");
};

var MontarUrlbtnPesquisarHistoricoContabilId540827 = function (componente) {

    var valor = "";
    var camposdependecia = "";

    if (camposdependecia != "") {
        var qtdDependencias = camposdependecia.split(";");
        for (var i = 0; i < qtdDependencias.length; i++) {

            var campoDependente = $("#frmLancamento #" + qtdDependencias[i]);
            if (campoDependente)
                valor += (valor != "" ? ";" : "") + campoDependente.val();
        }
    }

    var url = componente.attr("href");
    if (valor !== "" && valor !== undefined) {
        if (url.indexOf('filtropesquisa=') !== -1)
            url = url.replace(/(filtropesquisa=).*?(&)/, '$1' + valor + '$2');
        else
            url = url + "?filtropesquisa=" + valor;
    }

    return url;

};

$("document").ready(function () {

    var pesquisaDialog = function (e) {

        e.preventDefault();

        if ($("#btnPesquisarHistoricoContabilId540827").hasClass('m8-btn-desabilitado'))
            return false;

        var href = $("#btnPesquisarHistoricoContabilId540827").attr("href");
        $("#btnPesquisarHistoricoContabilId540827").attr("disabled", "disabled");
        $("#btnPesquisarHistoricoContabilId540827").css("pointer-events", "none");
        $("#btnPesquisarHistoricoContabilId540827").unbind("click");
        ConstruirModal(
            "ModalPesquisar333703",
            "btnPesquisarHistoricoContabilId540827",
            "Seleção de Histórico Contábil",
            MontarUrlbtnPesquisarHistoricoContabilId540827($(this)),
            { funcaoRetorno: "ModalPesquisar333703" },
            function (e) {  

                $("#btnPesquisarHistoricoContabilId540827").attr("href", "#");
                setTimeout(() => {

                    try {
                        ModalPesquisarShow(e, "ModalPesquisar333703", "btnPesquisarHistoricoContabilId540827");                        
                    } catch (c) { }

                    try {
                        $("#ModalPesquisar333703").attr("data-formulario-chamou", "#frmLancamento");
                        $("#ModalPesquisar333703").attr("data-formulario-chamou-extras-grid", "_FuncaoAntesEditar_");
                        $("#ModalPesquisar333703").attr("data-formulario-chamou-extras-form", "_FuncaoAntesEditar_");
                    } catch (e) { }

                }, 500);
                
            },
            function (e) {
                
                var seletorRetorno = $(".btnPesquisarHistoricoContabilId540827").attr("data-form") + " #Id";
                var retorno = "";

                if (selecionados && selecionados.length == 1)
                    retorno = selecionados[0];
                else if (selecionados && selecionados.length > 1)
                    retorno = selecionados.toString();

                if (true) {
                    if (retorno !== "" && retorno != undefined) {

                        let campoDependente = ($(".HistoricoContabilId110176").attr("data-dependente") ? $(".HistoricoContabilId110176").attr("data-dependente") : "");
                        let valorDependente = ($(".HistoricoContabilId110176").attr("data-valordependente") ? $(".HistoricoContabilId110176").attr("data-valordependente") :
                                               $(".HistoricoContabilId110176").attr("data-dependente") ? buscarValoresDependentes($(".HistoricoContabilId110176"), $(".HistoricoContabilId110176").closest("form").attr("id")) : "")

                        let urlDadosSelectDois = $("#btnPesquisarHistoricoContabilId540827").attr("data-url-dados-select-dois") || "/treinamento/Contabil/HistoricosContabeisListaSelecao";
                        if (Array.isArray(valorDependente)) 
                            valorDependente = valorDependente.join(";");

                        $.ajax({
                            url: urlDadosSelectDois,
                            type: "POST",
                            data: {
                                pesquisa: retorno,
                                pagina: 0,
                                campoDependente: campoDependente,
                                valorDependente: valorDependente,
                                selecao: true
                            },
                            dataType: 'json',
                            success: function (dados) {
                                if (dados.Retorno.length > 0) {
                                    $.each(dados.Retorno, function (idx, val) {
                                        var newOption = new Option(val.text, val.id, true, true);
                                        $(".HistoricoContabilId110176").append(newOption);
                                    });
                                    $(".HistoricoContabilId110176").trigger('change');
                                    SetarFoco($("#frmLancamento .HistoricoContabilId110176"));
                                    AvancarFocus(e, "#frmLancamento", $(".HistoricoContabilId110176"), true);
                                }
                            }
                        });
                    }
                    if (typeof funcaoAposSelecao === "function") {
                        funcaoAposSelecao(selecionados);
                    }
                } else if (typeof funcaoAposSelecao === "function") {
                    funcaoAposSelecao(selecionados);
                }
                else {
                    $(".HistoricoContabilId110176").val(retorno);
                    SetarFoco($("#frmLancamento .HistoricoContabilId110176"));
                }

                $("#btnPesquisarHistoricoContabilId540827").css("pointer-events", "initial");
                $("#btnPesquisarHistoricoContabilId540827").removeAttr("disabled");
                $("#btnPesquisarHistoricoContabilId540827").attr("href", href);
                $("#btnPesquisarHistoricoContabilId540827").bind('click', pesquisaDialog);

            },
            $("#frmLancamento").attr("data-ajax-load"),
            {
                success: {
                    label: "Selecionar",
                    className: "btn-success",
                    callback: function () {

                        if (!selecionados || selecionados.length == 0) {

                            Notificacao.Aviso("Nenhum registro selecionado");
                            return false;

                        } else
                            $("#ModalPesquisar333703").modal("hide");
                        
                    }
                },
                close: {
                    label: "Fechar",
                    className: "btn-danger ",
                    callback: function () {
                        selecionados = "";
                        $("#ModalPesquisar333703").modal("hide");
                    }
                }
            },
            "modalPesquisa"
        );

    };

    $("#btnPesquisarHistoricoContabilId540827").on("click", pesquisaDialog);

});</script><script type="text/javascript">$("document").ready(function () {

    var listenerValue = function (key) {

        let valor = "";

        setTimeout(() => {

            let item = localStorage.getItem(key);

            item = JSON.parse(item);

            if (item) {

                if (item.valor != "") {

                    if (item.valor !== "0") {

                        if (item.campoDependente != "" && item.valorDependente != "")
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, item.campoDependente, item.valorDependente);
                        else
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, null, null);

                        return item.valor;

                    }
                    else
                        return valor;

                } else
                    listenerValue(key);

            }
        }, 1000);
    }

    var processValue = function (key, e) {

        listenerValue(key);

    }

    $("#btnAdicionarHistoricoContabilId633714").on("click", function (e) {

        e.preventDefault();


        var href = $(this).attr("href");
        var urlValidar = $(this).data("url_validar_usuario");
        var urlPermissaoValidar = $(this).data("url_permissao_validar");
        var urlDados = $(this).data("url_dados");
        var acaoAdicionarCustomizada = $(this).data("acao_adicionar_customizada");
        var id = $($(this).parent().parent().children()[0]).val();
        var campo = ($(this).parent().parent().children()[0]).name;
        var hasCampoId = "null" != "null";
        var campoId = $("#" + $(this).parents("form").first().attr("Id") + " #null").val();

        if (hasCampoId && (campoId == null || campoId == undefined)) {

            var msgCampoId = "null" == "null" ? "Campo dependência não informado: 'null'" : "null";
            Notificacao.Alerta(msgCampoId);

            return;
        }

        if (campoId != null)
            id = campoId;

        var campoDependente = "";
        var valorDependente = "";

        if ($('#' + campo).data('dependente') != null) {

            campoDependente = $('#' + campo).data('dependente');
            valorDependente = $('#' + $('#' + campo).data('dependente').split(';')[0]).val();

        }

        var idString = id ? id.toString() : "";

        if (idString === "") {

            idString = $($(this).parent().parent().children()[0]).attr('data-idConsulta') + "";
            id = $($(this).parent().parent().children()[0]).attr('data-idConsulta');

        }

        var hrefAux = "";
        var formName = $($("li.active a").attr("href")).find("form").attr("id");

        if (formName === undefined || formName == null)
            formName = (document.getElementsByTagName("form")[0]).id;

        var hashAbaAtual = ($(".nav li.active a").attr("data-m8-hash"));

        let storageAba = {
            hashPai: hashAbaAtual
        };


        var hrefUrlValidar = href;

        if (acaoAdicionarCustomizada) {
            hrefUrlValidar = decodeURIComponent(hrefUrlValidar);
        }
        else {
            if (decodeURIComponent(hrefUrlValidar).indexOf("?"))
                hrefUrlValidar = decodeURIComponent(hrefUrlValidar).split('?')[0];
        }

        if (urlPermissaoValidar != undefined && urlPermissaoValidar != null)
            hrefUrlValidar = urlPermissaoValidar;

        $.ajax({
            url: urlValidar,
            data: { urlValidar: hrefUrlValidar },
            dataType: 'json',
            async: false,
            success: function (res) {

                if (res.Data == true) {

                    let element = {
                        href: href,
                        campo: campo,
                        urlDados: urlDados,
                        formName: formName,
                        valorDependente: valorDependente,
                        campoDependente: campoDependente,
                        id: idString,
                        valor: ""
                    };

                    href = SetAnsii(href);

                    if (href.toLowerCase().endsWith('modal'))
                        hrefAux = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

                    if (idString && idString.length > 0)
                        hrefAux += '/' + id;

                    localStorage.setItem(hrefAux.hashCode() + "1", JSON.stringify(storageAba));
                    localStorage.setItem(hrefAux.hashCode(), JSON.stringify(element));
                    processValue(hrefAux.hashCode(), e);

                    ChamarAbaAdicionarEditar(e, href, id, acaoAdicionarCustomizada);

                }
                else
                    Notificacao.Alerta("Usuário sem permissão de acesso.");

            }
        });
    });

    var SetAnsii = (href) => {

        href = href.replace("%3f", "?");
        href = href.replace("%3d", "=");
        href = href.replace("%23", "#");
        href = href.replace("%26", "&");

        return href;
    }

    var ChamarAbaAdicionarEditar = function (e, href, id, acaoAdicionarCustomizada) {

        var eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesAdicionar() };

        if (href.toLowerCase().endsWith('modal'))
            href = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

        if (id && id.length > 0) {

            if (acaoAdicionarCustomizada) {
                href += id
            } else {
                var parans = href.split('?');
                href = parans[0] + '/' + id;
                if (parans.length > 1)
                    href += '?' + parans[1];
            }

            eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesEditar(id) };

        }

        var paginaPrincipal = window.parent;

        href = GetUrlParamValues(href, acaoAdicionarCustomizada);

        if (typeof paginaPrincipal.AbrirNovaAba === "function")
            paginaPrincipal.AbrirNovaAba("...", href, undefined, undefined, undefined, true, eventoAposAbrirAbaNova);

    }

    var GetUrlParamValues = (href, acaoAdicionarCustomizada) => {

        var hasParans = href.includes('?') && (href.includes('#') || href.includes('.'));

        if (!acaoAdicionarCustomizada && hasParans) {

            var parans = href.split('?')[1].split('&');

            for (var i = 0; i < parans.length; i++) {

                var paran = parans[i].split('=');
                var value = $(paran[1]).val();

                if (value != undefined)
                    href = href.replace(paran[1], value);
                else {

                    href = href.replace(parans[i], "");

                    if (href.endsWith('&'))
                        href = href.substring(0, href.length - 3);

                }
            }

        }

        return href;

    }

    var OnExecuteFuncaoAntesEditar = (id) => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](id); }
            catch { }

        }, 2000);

    }

    var OnExecuteFuncaoAntesAdicionar = () => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](); }
            catch { }

        }, 2000);

    }

    var setaValoresSelect2 = function (campoForm, id, form, urlPesquisa, urlRetorno, campoDependente, valorDependente) {

        var campoFormulario = "#" + form + " #" + campoForm;
        var novoId = id.toString();

        $.ajax({
            url: urlPesquisa,
            data: {
                pesquisa: id,
                campoDependente: campoDependente,
                valorDependente: valorDependente,
                selecao: true
            },
            dataType: 'json',
            success: function (dados) {

                var cont = 0;

                for (var cont = 0; cont < dados.Retorno.length; cont++) {

                    var retorno = dados.Retorno[cont];

                    if (Number(novoId) == Number(retorno.id)) {

                        $(campoFormulario).select2("val", '');
                        $(campoFormulario).append(new Option(retorno.text, retorno.id, true, true)).trigger('change');

                    }

                }

            },
            error: function (message) { console.log(message); }
        });

    }

});</script><script type="text/javascript">var ModalPesquisar702466 = function (e, selecionados) {
    $("#ModalPesquisar702466").modal("hide");
};

var MontarUrlbtnPesquisarEspecieId796150 = function (componente) {

    var valor = "";
    var camposdependecia = "";

    if (camposdependecia != "") {
        var qtdDependencias = camposdependecia.split(";");
        for (var i = 0; i < qtdDependencias.length; i++) {

            var campoDependente = $("#frmLancamento #" + qtdDependencias[i]);
            if (campoDependente)
                valor += (valor != "" ? ";" : "") + campoDependente.val();
        }
    }

    var url = componente.attr("href");
    if (valor !== "" && valor !== undefined) {
        if (url.indexOf('filtropesquisa=') !== -1)
            url = url.replace(/(filtropesquisa=).*?(&)/, '$1' + valor + '$2');
        else
            url = url + "?filtropesquisa=" + valor;
    }

    return url;

};

$("document").ready(function () {

    var pesquisaDialog = function (e) {

        e.preventDefault();

        if ($("#btnPesquisarEspecieId796150").hasClass('m8-btn-desabilitado'))
            return false;

        var href = $("#btnPesquisarEspecieId796150").attr("href");
        $("#btnPesquisarEspecieId796150").attr("disabled", "disabled");
        $("#btnPesquisarEspecieId796150").css("pointer-events", "none");
        $("#btnPesquisarEspecieId796150").unbind("click");
        ConstruirModal(
            "ModalPesquisar702466",
            "btnPesquisarEspecieId796150",
            "Seleção de Espécie",
            MontarUrlbtnPesquisarEspecieId796150($(this)),
            { funcaoRetorno: "ModalPesquisar702466" },
            function (e) {  

                $("#btnPesquisarEspecieId796150").attr("href", "#");
                setTimeout(() => {

                    try {
                        ModalPesquisarShow(e, "ModalPesquisar702466", "btnPesquisarEspecieId796150");                        
                    } catch (c) { }

                    try {
                        $("#ModalPesquisar702466").attr("data-formulario-chamou", "#frmLancamento");
                        $("#ModalPesquisar702466").attr("data-formulario-chamou-extras-grid", "_FuncaoAntesEditar_");
                        $("#ModalPesquisar702466").attr("data-formulario-chamou-extras-form", "_FuncaoAntesEditar_");
                    } catch (e) { }

                }, 500);
                
            },
            function (e) {
                
                var seletorRetorno = $(".btnPesquisarEspecieId796150").attr("data-form") + " #Id";
                var retorno = "";

                if (selecionados && selecionados.length == 1)
                    retorno = selecionados[0];
                else if (selecionados && selecionados.length > 1)
                    retorno = selecionados.toString();

                if (true) {
                    if (retorno !== "" && retorno != undefined) {

                        let campoDependente = ($(".EspecieId936531").attr("data-dependente") ? $(".EspecieId936531").attr("data-dependente") : "");
                        let valorDependente = ($(".EspecieId936531").attr("data-valordependente") ? $(".EspecieId936531").attr("data-valordependente") :
                                               $(".EspecieId936531").attr("data-dependente") ? buscarValoresDependentes($(".EspecieId936531"), $(".EspecieId936531").closest("form").attr("id")) : "")

                        let urlDadosSelectDois = $("#btnPesquisarEspecieId796150").attr("data-url-dados-select-dois") || "/treinamento/Financeiro/EspecieTitulosListaSelecao";
                        if (Array.isArray(valorDependente)) 
                            valorDependente = valorDependente.join(";");

                        $.ajax({
                            url: urlDadosSelectDois,
                            type: "POST",
                            data: {
                                pesquisa: retorno,
                                pagina: 0,
                                campoDependente: campoDependente,
                                valorDependente: valorDependente,
                                selecao: true
                            },
                            dataType: 'json',
                            success: function (dados) {
                                if (dados.Retorno.length > 0) {
                                    $.each(dados.Retorno, function (idx, val) {
                                        var newOption = new Option(val.text, val.id, true, true);
                                        $(".EspecieId936531").append(newOption);
                                    });
                                    $(".EspecieId936531").trigger('change');
                                    SetarFoco($("#frmLancamento .EspecieId936531"));
                                    AvancarFocus(e, "#frmLancamento", $(".EspecieId936531"), true);
                                }
                            }
                        });
                    }
                    if (typeof funcaoAposSelecao === "function") {
                        funcaoAposSelecao(selecionados);
                    }
                } else if (typeof funcaoAposSelecao === "function") {
                    funcaoAposSelecao(selecionados);
                }
                else {
                    $(".EspecieId936531").val(retorno);
                    SetarFoco($("#frmLancamento .EspecieId936531"));
                }

                $("#btnPesquisarEspecieId796150").css("pointer-events", "initial");
                $("#btnPesquisarEspecieId796150").removeAttr("disabled");
                $("#btnPesquisarEspecieId796150").attr("href", href);
                $("#btnPesquisarEspecieId796150").bind('click', pesquisaDialog);

            },
            $("#frmLancamento").attr("data-ajax-load"),
            {
                success: {
                    label: "Selecionar",
                    className: "btn-success",
                    callback: function () {

                        if (!selecionados || selecionados.length == 0) {

                            Notificacao.Aviso("Nenhum registro selecionado");
                            return false;

                        } else
                            $("#ModalPesquisar702466").modal("hide");
                        
                    }
                },
                close: {
                    label: "Fechar",
                    className: "btn-danger ",
                    callback: function () {
                        selecionados = "";
                        $("#ModalPesquisar702466").modal("hide");
                    }
                }
            },
            "modalPesquisa"
        );

    };

    $("#btnPesquisarEspecieId796150").on("click", pesquisaDialog);

});</script><script type="text/javascript">$("document").ready(function () {

    var listenerValue = function (key) {

        let valor = "";

        setTimeout(() => {

            let item = localStorage.getItem(key);

            item = JSON.parse(item);

            if (item) {

                if (item.valor != "") {

                    if (item.valor !== "0") {

                        if (item.campoDependente != "" && item.valorDependente != "")
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, item.campoDependente, item.valorDependente);
                        else
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, null, null);

                        return item.valor;

                    }
                    else
                        return valor;

                } else
                    listenerValue(key);

            }
        }, 1000);
    }

    var processValue = function (key, e) {

        listenerValue(key);

    }

    $("#btnAdicionarEspecieId686910").on("click", function (e) {

        e.preventDefault();


        var href = $(this).attr("href");
        var urlValidar = $(this).data("url_validar_usuario");
        var urlPermissaoValidar = $(this).data("url_permissao_validar");
        var urlDados = $(this).data("url_dados");
        var acaoAdicionarCustomizada = $(this).data("acao_adicionar_customizada");
        var id = $($(this).parent().parent().children()[0]).val();
        var campo = ($(this).parent().parent().children()[0]).name;
        var hasCampoId = "null" != "null";
        var campoId = $("#" + $(this).parents("form").first().attr("Id") + " #null").val();

        if (hasCampoId && (campoId == null || campoId == undefined)) {

            var msgCampoId = "null" == "null" ? "Campo dependência não informado: 'null'" : "null";
            Notificacao.Alerta(msgCampoId);

            return;
        }

        if (campoId != null)
            id = campoId;

        var campoDependente = "";
        var valorDependente = "";

        if ($('#' + campo).data('dependente') != null) {

            campoDependente = $('#' + campo).data('dependente');
            valorDependente = $('#' + $('#' + campo).data('dependente').split(';')[0]).val();

        }

        var idString = id ? id.toString() : "";

        if (idString === "") {

            idString = $($(this).parent().parent().children()[0]).attr('data-idConsulta') + "";
            id = $($(this).parent().parent().children()[0]).attr('data-idConsulta');

        }

        var hrefAux = "";
        var formName = $($("li.active a").attr("href")).find("form").attr("id");

        if (formName === undefined || formName == null)
            formName = (document.getElementsByTagName("form")[0]).id;

        var hashAbaAtual = ($(".nav li.active a").attr("data-m8-hash"));

        let storageAba = {
            hashPai: hashAbaAtual
        };


        var hrefUrlValidar = href;

        if (acaoAdicionarCustomizada) {
            hrefUrlValidar = decodeURIComponent(hrefUrlValidar);
        }
        else {
            if (decodeURIComponent(hrefUrlValidar).indexOf("?"))
                hrefUrlValidar = decodeURIComponent(hrefUrlValidar).split('?')[0];
        }

        if (urlPermissaoValidar != undefined && urlPermissaoValidar != null)
            hrefUrlValidar = urlPermissaoValidar;

        $.ajax({
            url: urlValidar,
            data: { urlValidar: hrefUrlValidar },
            dataType: 'json',
            async: false,
            success: function (res) {

                if (res.Data == true) {

                    let element = {
                        href: href,
                        campo: campo,
                        urlDados: urlDados,
                        formName: formName,
                        valorDependente: valorDependente,
                        campoDependente: campoDependente,
                        id: idString,
                        valor: ""
                    };

                    href = SetAnsii(href);

                    if (href.toLowerCase().endsWith('modal'))
                        hrefAux = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

                    if (idString && idString.length > 0)
                        hrefAux += '/' + id;

                    localStorage.setItem(hrefAux.hashCode() + "1", JSON.stringify(storageAba));
                    localStorage.setItem(hrefAux.hashCode(), JSON.stringify(element));
                    processValue(hrefAux.hashCode(), e);

                    ChamarAbaAdicionarEditar(e, href, id, acaoAdicionarCustomizada);

                }
                else
                    Notificacao.Alerta("Usuário sem permissão de acesso.");

            }
        });
    });

    var SetAnsii = (href) => {

        href = href.replace("%3f", "?");
        href = href.replace("%3d", "=");
        href = href.replace("%23", "#");
        href = href.replace("%26", "&");

        return href;
    }

    var ChamarAbaAdicionarEditar = function (e, href, id, acaoAdicionarCustomizada) {

        var eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesAdicionar() };

        if (href.toLowerCase().endsWith('modal'))
            href = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

        if (id && id.length > 0) {

            if (acaoAdicionarCustomizada) {
                href += id
            } else {
                var parans = href.split('?');
                href = parans[0] + '/' + id;
                if (parans.length > 1)
                    href += '?' + parans[1];
            }

            eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesEditar(id) };

        }

        var paginaPrincipal = window.parent;

        href = GetUrlParamValues(href, acaoAdicionarCustomizada);

        if (typeof paginaPrincipal.AbrirNovaAba === "function")
            paginaPrincipal.AbrirNovaAba("...", href, undefined, undefined, undefined, true, eventoAposAbrirAbaNova);

    }

    var GetUrlParamValues = (href, acaoAdicionarCustomizada) => {

        var hasParans = href.includes('?') && (href.includes('#') || href.includes('.'));

        if (!acaoAdicionarCustomizada && hasParans) {

            var parans = href.split('?')[1].split('&');

            for (var i = 0; i < parans.length; i++) {

                var paran = parans[i].split('=');
                var value = $(paran[1]).val();

                if (value != undefined)
                    href = href.replace(paran[1], value);
                else {

                    href = href.replace(parans[i], "");

                    if (href.endsWith('&'))
                        href = href.substring(0, href.length - 3);

                }
            }

        }

        return href;

    }

    var OnExecuteFuncaoAntesEditar = (id) => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](id); }
            catch { }

        }, 2000);

    }

    var OnExecuteFuncaoAntesAdicionar = () => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](); }
            catch { }

        }, 2000);

    }

    var setaValoresSelect2 = function (campoForm, id, form, urlPesquisa, urlRetorno, campoDependente, valorDependente) {

        var campoFormulario = "#" + form + " #" + campoForm;
        var novoId = id.toString();

        $.ajax({
            url: urlPesquisa,
            data: {
                pesquisa: id,
                campoDependente: campoDependente,
                valorDependente: valorDependente,
                selecao: true
            },
            dataType: 'json',
            success: function (dados) {

                var cont = 0;

                for (var cont = 0; cont < dados.Retorno.length; cont++) {

                    var retorno = dados.Retorno[cont];

                    if (Number(novoId) == Number(retorno.id)) {

                        $(campoFormulario).select2("val", '');
                        $(campoFormulario).append(new Option(retorno.text, retorno.id, true, true)).trigger('change');

                    }

                }

            },
            error: function (message) { console.log(message); }
        });

    }

});</script><script type="text/javascript">var ModalPesquisar849195 = function (e, selecionados) {
    $("#ModalPesquisar849195").modal("hide");
};

var MontarUrlbtnPesquisarProjetoExecucaoId668694 = function (componente) {

    var valor = "";
    var camposdependecia = "";

    if (camposdependecia != "") {
        var qtdDependencias = camposdependecia.split(";");
        for (var i = 0; i < qtdDependencias.length; i++) {

            var campoDependente = $("#frmLancamento #" + qtdDependencias[i]);
            if (campoDependente)
                valor += (valor != "" ? ";" : "") + campoDependente.val();
        }
    }

    var url = componente.attr("href");
    if (valor !== "" && valor !== undefined) {
        if (url.indexOf('filtropesquisa=') !== -1)
            url = url.replace(/(filtropesquisa=).*?(&)/, '$1' + valor + '$2');
        else
            url = url + "?filtropesquisa=" + valor;
    }

    return url;

};

$("document").ready(function () {

    var pesquisaDialog = function (e) {

        e.preventDefault();

        if ($("#btnPesquisarProjetoExecucaoId668694").hasClass('m8-btn-desabilitado'))
            return false;

        var href = $("#btnPesquisarProjetoExecucaoId668694").attr("href");
        $("#btnPesquisarProjetoExecucaoId668694").attr("disabled", "disabled");
        $("#btnPesquisarProjetoExecucaoId668694").css("pointer-events", "none");
        $("#btnPesquisarProjetoExecucaoId668694").unbind("click");
        ConstruirModal(
            "ModalPesquisar849195",
            "btnPesquisarProjetoExecucaoId668694",
            "Seleção do Projeto",
            MontarUrlbtnPesquisarProjetoExecucaoId668694($(this)),
            { funcaoRetorno: "ModalPesquisar849195" },
            function (e) {  

                $("#btnPesquisarProjetoExecucaoId668694").attr("href", "#");
                setTimeout(() => {

                    try {
                        ModalPesquisarShow(e, "ModalPesquisar849195", "btnPesquisarProjetoExecucaoId668694");                        
                    } catch (c) { }

                    try {
                        $("#ModalPesquisar849195").attr("data-formulario-chamou", "#frmLancamento");
                        $("#ModalPesquisar849195").attr("data-formulario-chamou-extras-grid", "_FuncaoAntesEditar_");
                        $("#ModalPesquisar849195").attr("data-formulario-chamou-extras-form", "_FuncaoAntesEditar_");
                    } catch (e) { }

                }, 500);
                
            },
            function (e) {
                
                var seletorRetorno = $(".btnPesquisarProjetoExecucaoId668694").attr("data-form") + " #Id";
                var retorno = "";

                if (selecionados && selecionados.length == 1)
                    retorno = selecionados[0];
                else if (selecionados && selecionados.length > 1)
                    retorno = selecionados.toString();

                if (true) {
                    if (retorno !== "" && retorno != undefined) {

                        let campoDependente = ($(".ProjetoExecucaoId19426").attr("data-dependente") ? $(".ProjetoExecucaoId19426").attr("data-dependente") : "");
                        let valorDependente = ($(".ProjetoExecucaoId19426").attr("data-valordependente") ? $(".ProjetoExecucaoId19426").attr("data-valordependente") :
                                               $(".ProjetoExecucaoId19426").attr("data-dependente") ? buscarValoresDependentes($(".ProjetoExecucaoId19426"), $(".ProjetoExecucaoId19426").closest("form").attr("id")) : "")

                        let urlDadosSelectDois = $("#btnPesquisarProjetoExecucaoId668694").attr("data-url-dados-select-dois") || "/treinamento/Projetos/ProjetoExecucaoVincularListaSelecao";
                        if (Array.isArray(valorDependente)) 
                            valorDependente = valorDependente.join(";");

                        $.ajax({
                            url: urlDadosSelectDois,
                            type: "POST",
                            data: {
                                pesquisa: retorno,
                                pagina: 0,
                                campoDependente: campoDependente,
                                valorDependente: valorDependente,
                                selecao: true
                            },
                            dataType: 'json',
                            success: function (dados) {
                                if (dados.Retorno.length > 0) {
                                    $.each(dados.Retorno, function (idx, val) {
                                        var newOption = new Option(val.text, val.id, true, true);
                                        $(".ProjetoExecucaoId19426").append(newOption);
                                    });
                                    $(".ProjetoExecucaoId19426").trigger('change');
                                    SetarFoco($("#frmLancamento .ProjetoExecucaoId19426"));
                                    AvancarFocus(e, "#frmLancamento", $(".ProjetoExecucaoId19426"), true);
                                }
                            }
                        });
                    }
                    if (typeof funcaoAposSelecao === "function") {
                        funcaoAposSelecao(selecionados);
                    }
                } else if (typeof funcaoAposSelecao === "function") {
                    funcaoAposSelecao(selecionados);
                }
                else {
                    $(".ProjetoExecucaoId19426").val(retorno);
                    SetarFoco($("#frmLancamento .ProjetoExecucaoId19426"));
                }

                $("#btnPesquisarProjetoExecucaoId668694").css("pointer-events", "initial");
                $("#btnPesquisarProjetoExecucaoId668694").removeAttr("disabled");
                $("#btnPesquisarProjetoExecucaoId668694").attr("href", href);
                $("#btnPesquisarProjetoExecucaoId668694").bind('click', pesquisaDialog);

            },
            $("#frmLancamento").attr("data-ajax-load"),
            {
                success: {
                    label: "Selecionar",
                    className: "btn-success",
                    callback: function () {

                        if (!selecionados || selecionados.length == 0) {

                            Notificacao.Aviso("Nenhum registro selecionado");
                            return false;

                        } else
                            $("#ModalPesquisar849195").modal("hide");
                        
                    }
                },
                close: {
                    label: "Fechar",
                    className: "btn-danger ",
                    callback: function () {
                        selecionados = "";
                        $("#ModalPesquisar849195").modal("hide");
                    }
                }
            },
            "modalPesquisa"
        );

    };

    $("#btnPesquisarProjetoExecucaoId668694").on("click", pesquisaDialog);

});</script><script type="text/javascript">$("document").ready(function () {

    var listenerValue = function (key) {

        let valor = "";

        setTimeout(() => {

            let item = localStorage.getItem(key);

            item = JSON.parse(item);

            if (item) {

                if (item.valor != "") {

                    if (item.valor !== "0") {

                        if (item.campoDependente != "" && item.valorDependente != "")
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, item.campoDependente, item.valorDependente);
                        else
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, null, null);

                        return item.valor;

                    }
                    else
                        return valor;

                } else
                    listenerValue(key);

            }
        }, 1000);
    }

    var processValue = function (key, e) {

        listenerValue(key);

    }

    $("#btnAdicionarProjetoExecucaoId872009").on("click", function (e) {

        e.preventDefault();


        var href = $(this).attr("href");
        var urlValidar = $(this).data("url_validar_usuario");
        var urlPermissaoValidar = $(this).data("url_permissao_validar");
        var urlDados = $(this).data("url_dados");
        var acaoAdicionarCustomizada = $(this).data("acao_adicionar_customizada");
        var id = $($(this).parent().parent().children()[0]).val();
        var campo = ($(this).parent().parent().children()[0]).name;
        var hasCampoId = "null" != "null";
        var campoId = $("#" + $(this).parents("form").first().attr("Id") + " #null").val();

        if (hasCampoId && (campoId == null || campoId == undefined)) {

            var msgCampoId = "null" == "null" ? "Campo dependência não informado: 'null'" : "null";
            Notificacao.Alerta(msgCampoId);

            return;
        }

        if (campoId != null)
            id = campoId;

        var campoDependente = "";
        var valorDependente = "";

        if ($('#' + campo).data('dependente') != null) {

            campoDependente = $('#' + campo).data('dependente');
            valorDependente = $('#' + $('#' + campo).data('dependente').split(';')[0]).val();

        }

        var idString = id ? id.toString() : "";

        if (idString === "") {

            idString = $($(this).parent().parent().children()[0]).attr('data-idConsulta') + "";
            id = $($(this).parent().parent().children()[0]).attr('data-idConsulta');

        }

        var hrefAux = "";
        var formName = $($("li.active a").attr("href")).find("form").attr("id");

        if (formName === undefined || formName == null)
            formName = (document.getElementsByTagName("form")[0]).id;

        var hashAbaAtual = ($(".nav li.active a").attr("data-m8-hash"));

        let storageAba = {
            hashPai: hashAbaAtual
        };


        var hrefUrlValidar = href;

        if (acaoAdicionarCustomizada) {
            hrefUrlValidar = decodeURIComponent(hrefUrlValidar);
        }
        else {
            if (decodeURIComponent(hrefUrlValidar).indexOf("?"))
                hrefUrlValidar = decodeURIComponent(hrefUrlValidar).split('?')[0];
        }

        if (urlPermissaoValidar != undefined && urlPermissaoValidar != null)
            hrefUrlValidar = urlPermissaoValidar;

        $.ajax({
            url: urlValidar,
            data: { urlValidar: hrefUrlValidar },
            dataType: 'json',
            async: false,
            success: function (res) {

                if (res.Data == true) {

                    let element = {
                        href: href,
                        campo: campo,
                        urlDados: urlDados,
                        formName: formName,
                        valorDependente: valorDependente,
                        campoDependente: campoDependente,
                        id: idString,
                        valor: ""
                    };

                    href = SetAnsii(href);

                    if (href.toLowerCase().endsWith('modal'))
                        hrefAux = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

                    if (idString && idString.length > 0)
                        hrefAux += '/' + id;

                    localStorage.setItem(hrefAux.hashCode() + "1", JSON.stringify(storageAba));
                    localStorage.setItem(hrefAux.hashCode(), JSON.stringify(element));
                    processValue(hrefAux.hashCode(), e);

                    ChamarAbaAdicionarEditar(e, href, id, acaoAdicionarCustomizada);

                }
                else
                    Notificacao.Alerta("Usuário sem permissão de acesso.");

            }
        });
    });

    var SetAnsii = (href) => {

        href = href.replace("%3f", "?");
        href = href.replace("%3d", "=");
        href = href.replace("%23", "#");
        href = href.replace("%26", "&");

        return href;
    }

    var ChamarAbaAdicionarEditar = function (e, href, id, acaoAdicionarCustomizada) {

        var eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesAdicionar() };

        if (href.toLowerCase().endsWith('modal'))
            href = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

        if (id && id.length > 0) {

            if (acaoAdicionarCustomizada) {
                href += id
            } else {
                var parans = href.split('?');
                href = parans[0] + '/' + id;
                if (parans.length > 1)
                    href += '?' + parans[1];
            }

            eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesEditar(id) };

        }

        var paginaPrincipal = window.parent;

        href = GetUrlParamValues(href, acaoAdicionarCustomizada);

        if (typeof paginaPrincipal.AbrirNovaAba === "function")
            paginaPrincipal.AbrirNovaAba("...", href, undefined, undefined, undefined, true, eventoAposAbrirAbaNova);

    }

    var GetUrlParamValues = (href, acaoAdicionarCustomizada) => {

        var hasParans = href.includes('?') && (href.includes('#') || href.includes('.'));

        if (!acaoAdicionarCustomizada && hasParans) {

            var parans = href.split('?')[1].split('&');

            for (var i = 0; i < parans.length; i++) {

                var paran = parans[i].split('=');
                var value = $(paran[1]).val();

                if (value != undefined)
                    href = href.replace(paran[1], value);
                else {

                    href = href.replace(parans[i], "");

                    if (href.endsWith('&'))
                        href = href.substring(0, href.length - 3);

                }
            }

        }

        return href;

    }

    var OnExecuteFuncaoAntesEditar = (id) => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](id); }
            catch { }

        }, 2000);

    }

    var OnExecuteFuncaoAntesAdicionar = () => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](); }
            catch { }

        }, 2000);

    }

    var setaValoresSelect2 = function (campoForm, id, form, urlPesquisa, urlRetorno, campoDependente, valorDependente) {

        var campoFormulario = "#" + form + " #" + campoForm;
        var novoId = id.toString();

        $.ajax({
            url: urlPesquisa,
            data: {
                pesquisa: id,
                campoDependente: campoDependente,
                valorDependente: valorDependente,
                selecao: true
            },
            dataType: 'json',
            success: function (dados) {

                var cont = 0;

                for (var cont = 0; cont < dados.Retorno.length; cont++) {

                    var retorno = dados.Retorno[cont];

                    if (Number(novoId) == Number(retorno.id)) {

                        $(campoFormulario).select2("val", '');
                        $(campoFormulario).append(new Option(retorno.text, retorno.id, true, true)).trigger('change');

                    }

                }

            },
            error: function (message) { console.log(message); }
        });

    }

});</script><script type="text/javascript">var ModalPesquisar186881 = function (e, selecionados) {
    $("#ModalPesquisar186881").modal("hide");
};

var MontarUrlbtnPesquisarProjetoExecucaoTarefaItemId636256 = function (componente) {

    var valor = "";
    var camposdependecia = "ProjetoExecucaoId";

    if (camposdependecia != "") {
        var qtdDependencias = camposdependecia.split(";");
        for (var i = 0; i < qtdDependencias.length; i++) {

            var campoDependente = $("#frmLancamento #" + qtdDependencias[i]);
            if (campoDependente)
                valor += (valor != "" ? ";" : "") + campoDependente.val();
        }
    }

    var url = componente.attr("href");
    if (valor !== "" && valor !== undefined) {
        if (url.indexOf('filtropesquisa=') !== -1)
            url = url.replace(/(filtropesquisa=).*?(&)/, '$1' + valor + '$2');
        else
            url = url + "?filtropesquisa=" + valor;
    }

    return url;

};

$("document").ready(function () {

    var pesquisaDialog = function (e) {

        e.preventDefault();

        if ($("#btnPesquisarProjetoExecucaoTarefaItemId636256").hasClass('m8-btn-desabilitado'))
            return false;

        var href = $("#btnPesquisarProjetoExecucaoTarefaItemId636256").attr("href");
        $("#btnPesquisarProjetoExecucaoTarefaItemId636256").attr("disabled", "disabled");
        $("#btnPesquisarProjetoExecucaoTarefaItemId636256").css("pointer-events", "none");
        $("#btnPesquisarProjetoExecucaoTarefaItemId636256").unbind("click");
        ConstruirModal(
            "ModalPesquisar186881",
            "btnPesquisarProjetoExecucaoTarefaItemId636256",
            "Seleção Item do Projeto",
            MontarUrlbtnPesquisarProjetoExecucaoTarefaItemId636256($(this)),
            { funcaoRetorno: "ModalPesquisar186881" },
            function (e) {  

                $("#btnPesquisarProjetoExecucaoTarefaItemId636256").attr("href", "#");
                setTimeout(() => {

                    try {
                        ModalPesquisarShow(e, "ModalPesquisar186881", "btnPesquisarProjetoExecucaoTarefaItemId636256");                        
                    } catch (c) { }

                    try {
                        $("#ModalPesquisar186881").attr("data-formulario-chamou", "#frmLancamento");
                        $("#ModalPesquisar186881").attr("data-formulario-chamou-extras-grid", "_FuncaoAntesEditar_");
                        $("#ModalPesquisar186881").attr("data-formulario-chamou-extras-form", "_FuncaoAntesEditar_");
                    } catch (e) { }

                }, 500);
                
            },
            function (e) {
                
                var seletorRetorno = $(".btnPesquisarProjetoExecucaoTarefaItemId636256").attr("data-form") + " #Id";
                var retorno = "";

                if (selecionados && selecionados.length == 1)
                    retorno = selecionados[0];
                else if (selecionados && selecionados.length > 1)
                    retorno = selecionados.toString();

                if (true) {
                    if (retorno !== "" && retorno != undefined) {

                        let campoDependente = ($(".ProjetoExecucaoTarefaItemId550633").attr("data-dependente") ? $(".ProjetoExecucaoTarefaItemId550633").attr("data-dependente") : "");
                        let valorDependente = ($(".ProjetoExecucaoTarefaItemId550633").attr("data-valordependente") ? $(".ProjetoExecucaoTarefaItemId550633").attr("data-valordependente") :
                                               $(".ProjetoExecucaoTarefaItemId550633").attr("data-dependente") ? buscarValoresDependentes($(".ProjetoExecucaoTarefaItemId550633"), $(".ProjetoExecucaoTarefaItemId550633").closest("form").attr("id")) : "")

                        let urlDadosSelectDois = $("#btnPesquisarProjetoExecucaoTarefaItemId636256").attr("data-url-dados-select-dois") || "/treinamento/Projetos/ProjetoExecucaoTarefasItensVincularListaBloquearVinculoProjetoSelecao";
                        if (Array.isArray(valorDependente)) 
                            valorDependente = valorDependente.join(";");

                        $.ajax({
                            url: urlDadosSelectDois,
                            type: "POST",
                            data: {
                                pesquisa: retorno,
                                pagina: 0,
                                campoDependente: campoDependente,
                                valorDependente: valorDependente,
                                selecao: true
                            },
                            dataType: 'json',
                            success: function (dados) {
                                if (dados.Retorno.length > 0) {
                                    $.each(dados.Retorno, function (idx, val) {
                                        var newOption = new Option(val.text, val.id, true, true);
                                        $(".ProjetoExecucaoTarefaItemId550633").append(newOption);
                                    });
                                    $(".ProjetoExecucaoTarefaItemId550633").trigger('change');
                                    SetarFoco($("#frmLancamento .ProjetoExecucaoTarefaItemId550633"));
                                    AvancarFocus(e, "#frmLancamento", $(".ProjetoExecucaoTarefaItemId550633"), true);
                                }
                            }
                        });
                    }
                    if (typeof funcaoAposSelecao === "function") {
                        funcaoAposSelecao(selecionados);
                    }
                } else if (typeof funcaoAposSelecao === "function") {
                    funcaoAposSelecao(selecionados);
                }
                else {
                    $(".ProjetoExecucaoTarefaItemId550633").val(retorno);
                    SetarFoco($("#frmLancamento .ProjetoExecucaoTarefaItemId550633"));
                }

                $("#btnPesquisarProjetoExecucaoTarefaItemId636256").css("pointer-events", "initial");
                $("#btnPesquisarProjetoExecucaoTarefaItemId636256").removeAttr("disabled");
                $("#btnPesquisarProjetoExecucaoTarefaItemId636256").attr("href", href);
                $("#btnPesquisarProjetoExecucaoTarefaItemId636256").bind('click', pesquisaDialog);

            },
            $("#frmLancamento").attr("data-ajax-load"),
            {
                success: {
                    label: "Selecionar",
                    className: "btn-success",
                    callback: function () {

                        if (!selecionados || selecionados.length == 0) {

                            Notificacao.Aviso("Nenhum registro selecionado");
                            return false;

                        } else
                            $("#ModalPesquisar186881").modal("hide");
                        
                    }
                },
                close: {
                    label: "Fechar",
                    className: "btn-danger ",
                    callback: function () {
                        selecionados = "";
                        $("#ModalPesquisar186881").modal("hide");
                    }
                }
            },
            "modalPesquisa"
        );

    };

    $("#btnPesquisarProjetoExecucaoTarefaItemId636256").on("click", pesquisaDialog);

});</script><script type="text/javascript">var ModalPesquisar941706 = function (e, selecionados) {
    $("#ModalPesquisar941706").modal("hide");
};

var MontarUrlbtnPesquisarCentroCustoId234279 = function (componente) {

    var valor = "";
    var camposdependecia = "ContaCaixaBancoDestinoId";

    if (camposdependecia != "") {
        var qtdDependencias = camposdependecia.split(";");
        for (var i = 0; i < qtdDependencias.length; i++) {

            var campoDependente = $("#frmLancamento #" + qtdDependencias[i]);
            if (campoDependente)
                valor += (valor != "" ? ";" : "") + campoDependente.val();
        }
    }

    var url = componente.attr("href");
    if (valor !== "" && valor !== undefined) {
        if (url.indexOf('filtropesquisa=') !== -1)
            url = url.replace(/(filtropesquisa=).*?(&)/, '$1' + valor + '$2');
        else
            url = url + "?filtropesquisa=" + valor;
    }

    return url;

};

$("document").ready(function () {

    var pesquisaDialog = function (e) {

        e.preventDefault();

        if ($("#btnPesquisarCentroCustoId234279").hasClass('m8-btn-desabilitado'))
            return false;

        var href = $("#btnPesquisarCentroCustoId234279").attr("href");
        $("#btnPesquisarCentroCustoId234279").attr("disabled", "disabled");
        $("#btnPesquisarCentroCustoId234279").css("pointer-events", "none");
        $("#btnPesquisarCentroCustoId234279").unbind("click");
        ConstruirModal(
            "ModalPesquisar941706",
            "btnPesquisarCentroCustoId234279",
            "Pesquisar Centro de Custo",
            MontarUrlbtnPesquisarCentroCustoId234279($(this)),
            { funcaoRetorno: "ModalPesquisar941706" },
            function (e) {  

                $("#btnPesquisarCentroCustoId234279").attr("href", "#");
                setTimeout(() => {

                    try {
                        ModalPesquisarShow(e, "ModalPesquisar941706", "btnPesquisarCentroCustoId234279");                        
                    } catch (c) { }

                    try {
                        $("#ModalPesquisar941706").attr("data-formulario-chamou", "#frmLancamento");
                        $("#ModalPesquisar941706").attr("data-formulario-chamou-extras-grid", "_FuncaoAntesEditar_");
                        $("#ModalPesquisar941706").attr("data-formulario-chamou-extras-form", "_FuncaoAntesEditar_");
                    } catch (e) { }

                }, 500);
                
            },
            function (e) {
                
                var seletorRetorno = $(".btnPesquisarCentroCustoId234279").attr("data-form") + " #Id";
                var retorno = "";

                if (selecionados && selecionados.length == 1)
                    retorno = selecionados[0];
                else if (selecionados && selecionados.length > 1)
                    retorno = selecionados.toString();

                if (true) {
                    if (retorno !== "" && retorno != undefined) {

                        let campoDependente = ($(".CentroCustoId720043").attr("data-dependente") ? $(".CentroCustoId720043").attr("data-dependente") : "");
                        let valorDependente = ($(".CentroCustoId720043").attr("data-valordependente") ? $(".CentroCustoId720043").attr("data-valordependente") :
                                               $(".CentroCustoId720043").attr("data-dependente") ? buscarValoresDependentes($(".CentroCustoId720043"), $(".CentroCustoId720043").closest("form").attr("id")) : "")

                        let urlDadosSelectDois = $("#btnPesquisarCentroCustoId234279").attr("data-url-dados-select-dois") || "/treinamento/Contabil/CentrodeCustosLancamentoFinanceiroListaSelecao";
                        if (Array.isArray(valorDependente)) 
                            valorDependente = valorDependente.join(";");

                        $.ajax({
                            url: urlDadosSelectDois,
                            type: "POST",
                            data: {
                                pesquisa: retorno,
                                pagina: 0,
                                campoDependente: campoDependente,
                                valorDependente: valorDependente,
                                selecao: true
                            },
                            dataType: 'json',
                            success: function (dados) {
                                if (dados.Retorno.length > 0) {
                                    $.each(dados.Retorno, function (idx, val) {
                                        var newOption = new Option(val.text, val.id, true, true);
                                        $(".CentroCustoId720043").append(newOption);
                                    });
                                    $(".CentroCustoId720043").trigger('change');
                                    SetarFoco($("#frmLancamento .CentroCustoId720043"));
                                    AvancarFocus(e, "#frmLancamento", $(".CentroCustoId720043"), true);
                                }
                            }
                        });
                    }
                    if (typeof funcaoAposSelecao === "function") {
                        funcaoAposSelecao(selecionados);
                    }
                } else if (typeof funcaoAposSelecao === "function") {
                    funcaoAposSelecao(selecionados);
                }
                else {
                    $(".CentroCustoId720043").val(retorno);
                    SetarFoco($("#frmLancamento .CentroCustoId720043"));
                }

                $("#btnPesquisarCentroCustoId234279").css("pointer-events", "initial");
                $("#btnPesquisarCentroCustoId234279").removeAttr("disabled");
                $("#btnPesquisarCentroCustoId234279").attr("href", href);
                $("#btnPesquisarCentroCustoId234279").bind('click', pesquisaDialog);

            },
            $("#frmLancamento").attr("data-ajax-load"),
            {
                success: {
                    label: "Selecionar",
                    className: "btn-success",
                    callback: function () {

                        if (!selecionados || selecionados.length == 0) {

                            Notificacao.Aviso("Nenhum registro selecionado");
                            return false;

                        } else
                            $("#ModalPesquisar941706").modal("hide");
                        
                    }
                },
                close: {
                    label: "Fechar",
                    className: "btn-danger ",
                    callback: function () {
                        selecionados = "";
                        $("#ModalPesquisar941706").modal("hide");
                    }
                }
            },
            "modalPesquisa"
        );

    };

    $("#btnPesquisarCentroCustoId234279").on("click", pesquisaDialog);

});</script><script type="text/javascript">$("document").ready(function () {

    var listenerValue = function (key) {

        let valor = "";

        setTimeout(() => {

            let item = localStorage.getItem(key);

            item = JSON.parse(item);

            if (item) {

                if (item.valor != "") {

                    if (item.valor !== "0") {

                        if (item.campoDependente != "" && item.valorDependente != "")
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, item.campoDependente, item.valorDependente);
                        else
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, null, null);

                        return item.valor;

                    }
                    else
                        return valor;

                } else
                    listenerValue(key);

            }
        }, 1000);
    }

    var processValue = function (key, e) {

        listenerValue(key);

    }

    $("#btnAdicionarCentroCustoId558056").on("click", function (e) {

        e.preventDefault();


        var href = $(this).attr("href");
        var urlValidar = $(this).data("url_validar_usuario");
        var urlPermissaoValidar = $(this).data("url_permissao_validar");
        var urlDados = $(this).data("url_dados");
        var acaoAdicionarCustomizada = $(this).data("acao_adicionar_customizada");
        var id = $($(this).parent().parent().children()[0]).val();
        var campo = ($(this).parent().parent().children()[0]).name;
        var hasCampoId = "null" != "null";
        var campoId = $("#" + $(this).parents("form").first().attr("Id") + " #null").val();

        if (hasCampoId && (campoId == null || campoId == undefined)) {

            var msgCampoId = "null" == "null" ? "Campo dependência não informado: 'null'" : "null";
            Notificacao.Alerta(msgCampoId);

            return;
        }

        if (campoId != null)
            id = campoId;

        var campoDependente = "";
        var valorDependente = "";

        if ($('#' + campo).data('dependente') != null) {

            campoDependente = $('#' + campo).data('dependente');
            valorDependente = $('#' + $('#' + campo).data('dependente').split(';')[0]).val();

        }

        var idString = id ? id.toString() : "";

        if (idString === "") {

            idString = $($(this).parent().parent().children()[0]).attr('data-idConsulta') + "";
            id = $($(this).parent().parent().children()[0]).attr('data-idConsulta');

        }

        var hrefAux = "";
        var formName = $($("li.active a").attr("href")).find("form").attr("id");

        if (formName === undefined || formName == null)
            formName = (document.getElementsByTagName("form")[0]).id;

        var hashAbaAtual = ($(".nav li.active a").attr("data-m8-hash"));

        let storageAba = {
            hashPai: hashAbaAtual
        };


        var hrefUrlValidar = href;

        if (acaoAdicionarCustomizada) {
            hrefUrlValidar = decodeURIComponent(hrefUrlValidar);
        }
        else {
            if (decodeURIComponent(hrefUrlValidar).indexOf("?"))
                hrefUrlValidar = decodeURIComponent(hrefUrlValidar).split('?')[0];
        }

        if (urlPermissaoValidar != undefined && urlPermissaoValidar != null)
            hrefUrlValidar = urlPermissaoValidar;

        $.ajax({
            url: urlValidar,
            data: { urlValidar: hrefUrlValidar },
            dataType: 'json',
            async: false,
            success: function (res) {

                if (res.Data == true) {

                    let element = {
                        href: href,
                        campo: campo,
                        urlDados: urlDados,
                        formName: formName,
                        valorDependente: valorDependente,
                        campoDependente: campoDependente,
                        id: idString,
                        valor: ""
                    };

                    href = SetAnsii(href);

                    if (href.toLowerCase().endsWith('modal'))
                        hrefAux = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

                    if (idString && idString.length > 0)
                        hrefAux += '/' + id;

                    localStorage.setItem(hrefAux.hashCode() + "1", JSON.stringify(storageAba));
                    localStorage.setItem(hrefAux.hashCode(), JSON.stringify(element));
                    processValue(hrefAux.hashCode(), e);

                    ChamarAbaAdicionarEditar(e, href, id, acaoAdicionarCustomizada);

                }
                else
                    Notificacao.Alerta("Usuário sem permissão de acesso.");

            }
        });
    });

    var SetAnsii = (href) => {

        href = href.replace("%3f", "?");
        href = href.replace("%3d", "=");
        href = href.replace("%23", "#");
        href = href.replace("%26", "&");

        return href;
    }

    var ChamarAbaAdicionarEditar = function (e, href, id, acaoAdicionarCustomizada) {

        var eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesAdicionar() };

        if (href.toLowerCase().endsWith('modal'))
            href = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

        if (id && id.length > 0) {

            if (acaoAdicionarCustomizada) {
                href += id
            } else {
                var parans = href.split('?');
                href = parans[0] + '/' + id;
                if (parans.length > 1)
                    href += '?' + parans[1];
            }

            eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesEditar(id) };

        }

        var paginaPrincipal = window.parent;

        href = GetUrlParamValues(href, acaoAdicionarCustomizada);

        if (typeof paginaPrincipal.AbrirNovaAba === "function")
            paginaPrincipal.AbrirNovaAba("...", href, undefined, undefined, undefined, true, eventoAposAbrirAbaNova);

    }

    var GetUrlParamValues = (href, acaoAdicionarCustomizada) => {

        var hasParans = href.includes('?') && (href.includes('#') || href.includes('.'));

        if (!acaoAdicionarCustomizada && hasParans) {

            var parans = href.split('?')[1].split('&');

            for (var i = 0; i < parans.length; i++) {

                var paran = parans[i].split('=');
                var value = $(paran[1]).val();

                if (value != undefined)
                    href = href.replace(paran[1], value);
                else {

                    href = href.replace(parans[i], "");

                    if (href.endsWith('&'))
                        href = href.substring(0, href.length - 3);

                }
            }

        }

        return href;

    }

    var OnExecuteFuncaoAntesEditar = (id) => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](id); }
            catch { }

        }, 2000);

    }

    var OnExecuteFuncaoAntesAdicionar = () => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](); }
            catch { }

        }, 2000);

    }

    var setaValoresSelect2 = function (campoForm, id, form, urlPesquisa, urlRetorno, campoDependente, valorDependente) {

        var campoFormulario = "#" + form + " #" + campoForm;
        var novoId = id.toString();

        $.ajax({
            url: urlPesquisa,
            data: {
                pesquisa: id,
                campoDependente: campoDependente,
                valorDependente: valorDependente,
                selecao: true
            },
            dataType: 'json',
            success: function (dados) {

                var cont = 0;

                for (var cont = 0; cont < dados.Retorno.length; cont++) {

                    var retorno = dados.Retorno[cont];

                    if (Number(novoId) == Number(retorno.id)) {

                        $(campoFormulario).select2("val", '');
                        $(campoFormulario).append(new Option(retorno.text, retorno.id, true, true)).trigger('change');

                    }

                }

            },
            error: function (message) { console.log(message); }
        });

    }

});</script><script type="text/javascript">var ModalPesquisar228159 = function (e, selecionados) {
    $("#ModalPesquisar228159").modal("hide");
};

var MontarUrlbtnPesquisarProcessoImportacaoId655707 = function (componente) {

    var valor = "";
    var camposdependecia = "";

    if (camposdependecia != "") {
        var qtdDependencias = camposdependecia.split(";");
        for (var i = 0; i < qtdDependencias.length; i++) {

            var campoDependente = $("#frmLancamento #" + qtdDependencias[i]);
            if (campoDependente)
                valor += (valor != "" ? ";" : "") + campoDependente.val();
        }
    }

    var url = componente.attr("href");
    if (valor !== "" && valor !== undefined) {
        if (url.indexOf('filtropesquisa=') !== -1)
            url = url.replace(/(filtropesquisa=).*?(&)/, '$1' + valor + '$2');
        else
            url = url + "?filtropesquisa=" + valor;
    }

    return url;

};

$("document").ready(function () {

    var pesquisaDialog = function (e) {

        e.preventDefault();

        if ($("#btnPesquisarProcessoImportacaoId655707").hasClass('m8-btn-desabilitado'))
            return false;

        var href = $("#btnPesquisarProcessoImportacaoId655707").attr("href");
        $("#btnPesquisarProcessoImportacaoId655707").attr("disabled", "disabled");
        $("#btnPesquisarProcessoImportacaoId655707").css("pointer-events", "none");
        $("#btnPesquisarProcessoImportacaoId655707").unbind("click");
        ConstruirModal(
            "ModalPesquisar228159",
            "btnPesquisarProcessoImportacaoId655707",
            "Pesquisar Processo Importação",
            MontarUrlbtnPesquisarProcessoImportacaoId655707($(this)),
            { funcaoRetorno: "ModalPesquisar228159" },
            function (e) {  

                $("#btnPesquisarProcessoImportacaoId655707").attr("href", "#");
                setTimeout(() => {

                    try {
                        ModalPesquisarShow(e, "ModalPesquisar228159", "btnPesquisarProcessoImportacaoId655707");                        
                    } catch (c) { }

                    try {
                        $("#ModalPesquisar228159").attr("data-formulario-chamou", "#frmLancamento");
                        $("#ModalPesquisar228159").attr("data-formulario-chamou-extras-grid", "_FuncaoAntesEditar_");
                        $("#ModalPesquisar228159").attr("data-formulario-chamou-extras-form", "_FuncaoAntesEditar_");
                    } catch (e) { }

                }, 500);
                
            },
            function (e) {
                
                var seletorRetorno = $(".btnPesquisarProcessoImportacaoId655707").attr("data-form") + " #Id";
                var retorno = "";

                if (selecionados && selecionados.length == 1)
                    retorno = selecionados[0];
                else if (selecionados && selecionados.length > 1)
                    retorno = selecionados.toString();

                if (true) {
                    if (retorno !== "" && retorno != undefined) {

                        let campoDependente = ($(".ProcessoImportacaoId448871").attr("data-dependente") ? $(".ProcessoImportacaoId448871").attr("data-dependente") : "");
                        let valorDependente = ($(".ProcessoImportacaoId448871").attr("data-valordependente") ? $(".ProcessoImportacaoId448871").attr("data-valordependente") :
                                               $(".ProcessoImportacaoId448871").attr("data-dependente") ? buscarValoresDependentes($(".ProcessoImportacaoId448871"), $(".ProcessoImportacaoId448871").closest("form").attr("id")) : "")

                        let urlDadosSelectDois = $("#btnPesquisarProcessoImportacaoId655707").attr("data-url-dados-select-dois") || "/treinamento/Compras/ProcessoImportacaoComexListaSelecao";
                        if (Array.isArray(valorDependente)) 
                            valorDependente = valorDependente.join(";");

                        $.ajax({
                            url: urlDadosSelectDois,
                            type: "POST",
                            data: {
                                pesquisa: retorno,
                                pagina: 0,
                                campoDependente: campoDependente,
                                valorDependente: valorDependente,
                                selecao: true
                            },
                            dataType: 'json',
                            success: function (dados) {
                                if (dados.Retorno.length > 0) {
                                    $.each(dados.Retorno, function (idx, val) {
                                        var newOption = new Option(val.text, val.id, true, true);
                                        $(".ProcessoImportacaoId448871").append(newOption);
                                    });
                                    $(".ProcessoImportacaoId448871").trigger('change');
                                    SetarFoco($("#frmLancamento .ProcessoImportacaoId448871"));
                                    AvancarFocus(e, "#frmLancamento", $(".ProcessoImportacaoId448871"), true);
                                }
                            }
                        });
                    }
                    if (typeof funcaoAposSelecao === "function") {
                        funcaoAposSelecao(selecionados);
                    }
                } else if (typeof funcaoAposSelecao === "function") {
                    funcaoAposSelecao(selecionados);
                }
                else {
                    $(".ProcessoImportacaoId448871").val(retorno);
                    SetarFoco($("#frmLancamento .ProcessoImportacaoId448871"));
                }

                $("#btnPesquisarProcessoImportacaoId655707").css("pointer-events", "initial");
                $("#btnPesquisarProcessoImportacaoId655707").removeAttr("disabled");
                $("#btnPesquisarProcessoImportacaoId655707").attr("href", href);
                $("#btnPesquisarProcessoImportacaoId655707").bind('click', pesquisaDialog);

            },
            $("#frmLancamento").attr("data-ajax-load"),
            {
                success: {
                    label: "Selecionar",
                    className: "btn-success",
                    callback: function () {

                        if (!selecionados || selecionados.length == 0) {

                            Notificacao.Aviso("Nenhum registro selecionado");
                            return false;

                        } else
                            $("#ModalPesquisar228159").modal("hide");
                        
                    }
                },
                close: {
                    label: "Fechar",
                    className: "btn-danger ",
                    callback: function () {
                        selecionados = "";
                        $("#ModalPesquisar228159").modal("hide");
                    }
                }
            },
            "modalPesquisa"
        );

    };

    $("#btnPesquisarProcessoImportacaoId655707").on("click", pesquisaDialog);

});</script><script type="text/javascript">$("document").ready(function () {

    var listenerValue = function (key) {

        let valor = "";

        setTimeout(() => {

            let item = localStorage.getItem(key);

            item = JSON.parse(item);

            if (item) {

                if (item.valor != "") {

                    if (item.valor !== "0") {

                        if (item.campoDependente != "" && item.valorDependente != "")
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, item.campoDependente, item.valorDependente);
                        else
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, null, null);

                        return item.valor;

                    }
                    else
                        return valor;

                } else
                    listenerValue(key);

            }
        }, 1000);
    }

    var processValue = function (key, e) {

        listenerValue(key);

    }

    $("#btnAdicionarProcessoImportacaoId591721").on("click", function (e) {

        e.preventDefault();


        var href = $(this).attr("href");
        var urlValidar = $(this).data("url_validar_usuario");
        var urlPermissaoValidar = $(this).data("url_permissao_validar");
        var urlDados = $(this).data("url_dados");
        var acaoAdicionarCustomizada = $(this).data("acao_adicionar_customizada");
        var id = $($(this).parent().parent().children()[0]).val();
        var campo = ($(this).parent().parent().children()[0]).name;
        var hasCampoId = "null" != "null";
        var campoId = $("#" + $(this).parents("form").first().attr("Id") + " #null").val();

        if (hasCampoId && (campoId == null || campoId == undefined)) {

            var msgCampoId = "null" == "null" ? "Campo dependência não informado: 'null'" : "null";
            Notificacao.Alerta(msgCampoId);

            return;
        }

        if (campoId != null)
            id = campoId;

        var campoDependente = "";
        var valorDependente = "";

        if ($('#' + campo).data('dependente') != null) {

            campoDependente = $('#' + campo).data('dependente');
            valorDependente = $('#' + $('#' + campo).data('dependente').split(';')[0]).val();

        }

        var idString = id ? id.toString() : "";

        if (idString === "") {

            idString = $($(this).parent().parent().children()[0]).attr('data-idConsulta') + "";
            id = $($(this).parent().parent().children()[0]).attr('data-idConsulta');

        }

        var hrefAux = "";
        var formName = $($("li.active a").attr("href")).find("form").attr("id");

        if (formName === undefined || formName == null)
            formName = (document.getElementsByTagName("form")[0]).id;

        var hashAbaAtual = ($(".nav li.active a").attr("data-m8-hash"));

        let storageAba = {
            hashPai: hashAbaAtual
        };


        var hrefUrlValidar = href;

        if (acaoAdicionarCustomizada) {
            hrefUrlValidar = decodeURIComponent(hrefUrlValidar);
        }
        else {
            if (decodeURIComponent(hrefUrlValidar).indexOf("?"))
                hrefUrlValidar = decodeURIComponent(hrefUrlValidar).split('?')[0];
        }

        if (urlPermissaoValidar != undefined && urlPermissaoValidar != null)
            hrefUrlValidar = urlPermissaoValidar;

        $.ajax({
            url: urlValidar,
            data: { urlValidar: hrefUrlValidar },
            dataType: 'json',
            async: false,
            success: function (res) {

                if (res.Data == true) {

                    let element = {
                        href: href,
                        campo: campo,
                        urlDados: urlDados,
                        formName: formName,
                        valorDependente: valorDependente,
                        campoDependente: campoDependente,
                        id: idString,
                        valor: ""
                    };

                    href = SetAnsii(href);

                    if (href.toLowerCase().endsWith('modal'))
                        hrefAux = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

                    if (idString && idString.length > 0)
                        hrefAux += '/' + id;

                    localStorage.setItem(hrefAux.hashCode() + "1", JSON.stringify(storageAba));
                    localStorage.setItem(hrefAux.hashCode(), JSON.stringify(element));
                    processValue(hrefAux.hashCode(), e);

                    ChamarAbaAdicionarEditar(e, href, id, acaoAdicionarCustomizada);

                }
                else
                    Notificacao.Alerta("Usuário sem permissão de acesso.");

            }
        });
    });

    var SetAnsii = (href) => {

        href = href.replace("%3f", "?");
        href = href.replace("%3d", "=");
        href = href.replace("%23", "#");
        href = href.replace("%26", "&");

        return href;
    }

    var ChamarAbaAdicionarEditar = function (e, href, id, acaoAdicionarCustomizada) {

        var eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesAdicionar() };

        if (href.toLowerCase().endsWith('modal'))
            href = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

        if (id && id.length > 0) {

            if (acaoAdicionarCustomizada) {
                href += id
            } else {
                var parans = href.split('?');
                href = parans[0] + '/' + id;
                if (parans.length > 1)
                    href += '?' + parans[1];
            }

            eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesEditar(id) };

        }

        var paginaPrincipal = window.parent;

        href = GetUrlParamValues(href, acaoAdicionarCustomizada);

        if (typeof paginaPrincipal.AbrirNovaAba === "function")
            paginaPrincipal.AbrirNovaAba("...", href, undefined, undefined, undefined, true, eventoAposAbrirAbaNova);

    }

    var GetUrlParamValues = (href, acaoAdicionarCustomizada) => {

        var hasParans = href.includes('?') && (href.includes('#') || href.includes('.'));

        if (!acaoAdicionarCustomizada && hasParans) {

            var parans = href.split('?')[1].split('&');

            for (var i = 0; i < parans.length; i++) {

                var paran = parans[i].split('=');
                var value = $(paran[1]).val();

                if (value != undefined)
                    href = href.replace(paran[1], value);
                else {

                    href = href.replace(parans[i], "");

                    if (href.endsWith('&'))
                        href = href.substring(0, href.length - 3);

                }
            }

        }

        return href;

    }

    var OnExecuteFuncaoAntesEditar = (id) => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](id); }
            catch { }

        }, 2000);

    }

    var OnExecuteFuncaoAntesAdicionar = () => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](); }
            catch { }

        }, 2000);

    }

    var setaValoresSelect2 = function (campoForm, id, form, urlPesquisa, urlRetorno, campoDependente, valorDependente) {

        var campoFormulario = "#" + form + " #" + campoForm;
        var novoId = id.toString();

        $.ajax({
            url: urlPesquisa,
            data: {
                pesquisa: id,
                campoDependente: campoDependente,
                valorDependente: valorDependente,
                selecao: true
            },
            dataType: 'json',
            success: function (dados) {

                var cont = 0;

                for (var cont = 0; cont < dados.Retorno.length; cont++) {

                    var retorno = dados.Retorno[cont];

                    if (Number(novoId) == Number(retorno.id)) {

                        $(campoFormulario).select2("val", '');
                        $(campoFormulario).append(new Option(retorno.text, retorno.id, true, true)).trigger('change');

                    }

                }

            },
            error: function (message) { console.log(message); }
        });

    }

});</script><script type="text/javascript">var ModalPesquisar913978 = function (e, selecionados) {
    $("#ModalPesquisar913978").modal("hide");
};

var MontarUrlbtnPesquisarImovelRuralId512453 = function (componente) {

    var valor = "";
    var camposdependecia = "";

    if (camposdependecia != "") {
        var qtdDependencias = camposdependecia.split(";");
        for (var i = 0; i < qtdDependencias.length; i++) {

            var campoDependente = $("#frmLancamento #" + qtdDependencias[i]);
            if (campoDependente)
                valor += (valor != "" ? ";" : "") + campoDependente.val();
        }
    }

    var url = componente.attr("href");
    if (valor !== "" && valor !== undefined) {
        if (url.indexOf('filtropesquisa=') !== -1)
            url = url.replace(/(filtropesquisa=).*?(&)/, '$1' + valor + '$2');
        else
            url = url + "?filtropesquisa=" + valor;
    }

    return url;

};

$("document").ready(function () {

    var pesquisaDialog = function (e) {

        e.preventDefault();

        if ($("#btnPesquisarImovelRuralId512453").hasClass('m8-btn-desabilitado'))
            return false;

        var href = $("#btnPesquisarImovelRuralId512453").attr("href");
        $("#btnPesquisarImovelRuralId512453").attr("disabled", "disabled");
        $("#btnPesquisarImovelRuralId512453").css("pointer-events", "none");
        $("#btnPesquisarImovelRuralId512453").unbind("click");
        ConstruirModal(
            "ModalPesquisar913978",
            "btnPesquisarImovelRuralId512453",
            "Pesquisar Imóvel Rural",
            MontarUrlbtnPesquisarImovelRuralId512453($(this)),
            { funcaoRetorno: "ModalPesquisar913978" },
            function (e) {  

                $("#btnPesquisarImovelRuralId512453").attr("href", "#");
                setTimeout(() => {

                    try {
                        ModalPesquisarShow(e, "ModalPesquisar913978", "btnPesquisarImovelRuralId512453");                        
                    } catch (c) { }

                    try {
                        $("#ModalPesquisar913978").attr("data-formulario-chamou", "#frmLancamento");
                        $("#ModalPesquisar913978").attr("data-formulario-chamou-extras-grid", "_FuncaoAntesEditar_");
                        $("#ModalPesquisar913978").attr("data-formulario-chamou-extras-form", "_FuncaoAntesEditar_");
                    } catch (e) { }

                }, 500);
                
            },
            function (e) {
                
                var seletorRetorno = $(".btnPesquisarImovelRuralId512453").attr("data-form") + " #Id";
                var retorno = "";

                if (selecionados && selecionados.length == 1)
                    retorno = selecionados[0];
                else if (selecionados && selecionados.length > 1)
                    retorno = selecionados.toString();

                if (true) {
                    if (retorno !== "" && retorno != undefined) {

                        let campoDependente = ($(".ImovelRuralId840744").attr("data-dependente") ? $(".ImovelRuralId840744").attr("data-dependente") : "");
                        let valorDependente = ($(".ImovelRuralId840744").attr("data-valordependente") ? $(".ImovelRuralId840744").attr("data-valordependente") :
                                               $(".ImovelRuralId840744").attr("data-dependente") ? buscarValoresDependentes($(".ImovelRuralId840744"), $(".ImovelRuralId840744").closest("form").attr("id")) : "")

                        let urlDadosSelectDois = $("#btnPesquisarImovelRuralId512453").attr("data-url-dados-select-dois") || "/treinamento/Cadastro/ImovelRuralListaSelecao";
                        if (Array.isArray(valorDependente)) 
                            valorDependente = valorDependente.join(";");

                        $.ajax({
                            url: urlDadosSelectDois,
                            type: "POST",
                            data: {
                                pesquisa: retorno,
                                pagina: 0,
                                campoDependente: campoDependente,
                                valorDependente: valorDependente,
                                selecao: true
                            },
                            dataType: 'json',
                            success: function (dados) {
                                if (dados.Retorno.length > 0) {
                                    $.each(dados.Retorno, function (idx, val) {
                                        var newOption = new Option(val.text, val.id, true, true);
                                        $(".ImovelRuralId840744").append(newOption);
                                    });
                                    $(".ImovelRuralId840744").trigger('change');
                                    SetarFoco($("#frmLancamento .ImovelRuralId840744"));
                                    AvancarFocus(e, "#frmLancamento", $(".ImovelRuralId840744"), true);
                                }
                            }
                        });
                    }
                    if (typeof funcaoAposSelecao === "function") {
                        funcaoAposSelecao(selecionados);
                    }
                } else if (typeof funcaoAposSelecao === "function") {
                    funcaoAposSelecao(selecionados);
                }
                else {
                    $(".ImovelRuralId840744").val(retorno);
                    SetarFoco($("#frmLancamento .ImovelRuralId840744"));
                }

                $("#btnPesquisarImovelRuralId512453").css("pointer-events", "initial");
                $("#btnPesquisarImovelRuralId512453").removeAttr("disabled");
                $("#btnPesquisarImovelRuralId512453").attr("href", href);
                $("#btnPesquisarImovelRuralId512453").bind('click', pesquisaDialog);

            },
            $("#frmLancamento").attr("data-ajax-load"),
            {
                success: {
                    label: "Selecionar",
                    className: "btn-success",
                    callback: function () {

                        if (!selecionados || selecionados.length == 0) {

                            Notificacao.Aviso("Nenhum registro selecionado");
                            return false;

                        } else
                            $("#ModalPesquisar913978").modal("hide");
                        
                    }
                },
                close: {
                    label: "Fechar",
                    className: "btn-danger ",
                    callback: function () {
                        selecionados = "";
                        $("#ModalPesquisar913978").modal("hide");
                    }
                }
            },
            "modalPesquisa"
        );

    };

    $("#btnPesquisarImovelRuralId512453").on("click", pesquisaDialog);

});</script><script type="text/javascript">$("document").ready(function () {

    var listenerValue = function (key) {

        let valor = "";

        setTimeout(() => {

            let item = localStorage.getItem(key);

            item = JSON.parse(item);

            if (item) {

                if (item.valor != "") {

                    if (item.valor !== "0") {

                        if (item.campoDependente != "" && item.valorDependente != "")
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, item.campoDependente, item.valorDependente);
                        else
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, null, null);

                        return item.valor;

                    }
                    else
                        return valor;

                } else
                    listenerValue(key);

            }
        }, 1000);
    }

    var processValue = function (key, e) {

        listenerValue(key);

    }

    $("#btnAdicionarImovelRuralId518623").on("click", function (e) {

        e.preventDefault();


        var href = $(this).attr("href");
        var urlValidar = $(this).data("url_validar_usuario");
        var urlPermissaoValidar = $(this).data("url_permissao_validar");
        var urlDados = $(this).data("url_dados");
        var acaoAdicionarCustomizada = $(this).data("acao_adicionar_customizada");
        var id = $($(this).parent().parent().children()[0]).val();
        var campo = ($(this).parent().parent().children()[0]).name;
        var hasCampoId = "null" != "null";
        var campoId = $("#" + $(this).parents("form").first().attr("Id") + " #null").val();

        if (hasCampoId && (campoId == null || campoId == undefined)) {

            var msgCampoId = "null" == "null" ? "Campo dependência não informado: 'null'" : "null";
            Notificacao.Alerta(msgCampoId);

            return;
        }

        if (campoId != null)
            id = campoId;

        var campoDependente = "";
        var valorDependente = "";

        if ($('#' + campo).data('dependente') != null) {

            campoDependente = $('#' + campo).data('dependente');
            valorDependente = $('#' + $('#' + campo).data('dependente').split(';')[0]).val();

        }

        var idString = id ? id.toString() : "";

        if (idString === "") {

            idString = $($(this).parent().parent().children()[0]).attr('data-idConsulta') + "";
            id = $($(this).parent().parent().children()[0]).attr('data-idConsulta');

        }

        var hrefAux = "";
        var formName = $($("li.active a").attr("href")).find("form").attr("id");

        if (formName === undefined || formName == null)
            formName = (document.getElementsByTagName("form")[0]).id;

        var hashAbaAtual = ($(".nav li.active a").attr("data-m8-hash"));

        let storageAba = {
            hashPai: hashAbaAtual
        };


        var hrefUrlValidar = href;

        if (acaoAdicionarCustomizada) {
            hrefUrlValidar = decodeURIComponent(hrefUrlValidar);
        }
        else {
            if (decodeURIComponent(hrefUrlValidar).indexOf("?"))
                hrefUrlValidar = decodeURIComponent(hrefUrlValidar).split('?')[0];
        }

        if (urlPermissaoValidar != undefined && urlPermissaoValidar != null)
            hrefUrlValidar = urlPermissaoValidar;

        $.ajax({
            url: urlValidar,
            data: { urlValidar: hrefUrlValidar },
            dataType: 'json',
            async: false,
            success: function (res) {

                if (res.Data == true) {

                    let element = {
                        href: href,
                        campo: campo,
                        urlDados: urlDados,
                        formName: formName,
                        valorDependente: valorDependente,
                        campoDependente: campoDependente,
                        id: idString,
                        valor: ""
                    };

                    href = SetAnsii(href);

                    if (href.toLowerCase().endsWith('modal'))
                        hrefAux = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

                    if (idString && idString.length > 0)
                        hrefAux += '/' + id;

                    localStorage.setItem(hrefAux.hashCode() + "1", JSON.stringify(storageAba));
                    localStorage.setItem(hrefAux.hashCode(), JSON.stringify(element));
                    processValue(hrefAux.hashCode(), e);

                    ChamarAbaAdicionarEditar(e, href, id, acaoAdicionarCustomizada);

                }
                else
                    Notificacao.Alerta("Usuário sem permissão de acesso.");

            }
        });
    });

    var SetAnsii = (href) => {

        href = href.replace("%3f", "?");
        href = href.replace("%3d", "=");
        href = href.replace("%23", "#");
        href = href.replace("%26", "&");

        return href;
    }

    var ChamarAbaAdicionarEditar = function (e, href, id, acaoAdicionarCustomizada) {

        var eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesAdicionar() };

        if (href.toLowerCase().endsWith('modal'))
            href = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

        if (id && id.length > 0) {

            if (acaoAdicionarCustomizada) {
                href += id
            } else {
                var parans = href.split('?');
                href = parans[0] + '/' + id;
                if (parans.length > 1)
                    href += '?' + parans[1];
            }

            eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesEditar(id) };

        }

        var paginaPrincipal = window.parent;

        href = GetUrlParamValues(href, acaoAdicionarCustomizada);

        if (typeof paginaPrincipal.AbrirNovaAba === "function")
            paginaPrincipal.AbrirNovaAba("...", href, undefined, undefined, undefined, true, eventoAposAbrirAbaNova);

    }

    var GetUrlParamValues = (href, acaoAdicionarCustomizada) => {

        var hasParans = href.includes('?') && (href.includes('#') || href.includes('.'));

        if (!acaoAdicionarCustomizada && hasParans) {

            var parans = href.split('?')[1].split('&');

            for (var i = 0; i < parans.length; i++) {

                var paran = parans[i].split('=');
                var value = $(paran[1]).val();

                if (value != undefined)
                    href = href.replace(paran[1], value);
                else {

                    href = href.replace(parans[i], "");

                    if (href.endsWith('&'))
                        href = href.substring(0, href.length - 3);

                }
            }

        }

        return href;

    }

    var OnExecuteFuncaoAntesEditar = (id) => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](id); }
            catch { }

        }, 2000);

    }

    var OnExecuteFuncaoAntesAdicionar = () => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](); }
            catch { }

        }, 2000);

    }

    var setaValoresSelect2 = function (campoForm, id, form, urlPesquisa, urlRetorno, campoDependente, valorDependente) {

        var campoFormulario = "#" + form + " #" + campoForm;
        var novoId = id.toString();

        $.ajax({
            url: urlPesquisa,
            data: {
                pesquisa: id,
                campoDependente: campoDependente,
                valorDependente: valorDependente,
                selecao: true
            },
            dataType: 'json',
            success: function (dados) {

                var cont = 0;

                for (var cont = 0; cont < dados.Retorno.length; cont++) {

                    var retorno = dados.Retorno[cont];

                    if (Number(novoId) == Number(retorno.id)) {

                        $(campoFormulario).select2("val", '');
                        $(campoFormulario).append(new Option(retorno.text, retorno.id, true, true)).trigger('change');

                    }

                }

            },
            error: function (message) { console.log(message); }
        });

    }

});</script></div><div><div><div class='row m8-formulario-rodape bg-default bg-font-default' style='margin-left:  0px !important;margin-bottom: 0px !important;                                                             visibility:hidden;'>       <div class='message-footer clearfix no-padding'>                                                                                           <div class='pull-right'>                                                                                                                   <i class='ace-icon fa fa-star'></i>Ryan Nunes <b>às</b> 05/02/2026 10:53:49 &nbsp;&nbsp;               <i class='ace-icon fa fa-edit'></i>Ryan Nunes <b>às</b> 05/02/2026 10:53:49 &nbsp;&nbsp;           </div>                                                                                                                             </div>                                                                                                                          </div>                                                                                                                                 </div></div>

<script type="text/javascript">

    var ajustarConsultaModalCentroCusto = () => {

        var ev = $("#frmLancamento #CentroCustoId").siblings('.input-group-btn').find('.btn')[0];
        $(ev).attr("href", $(ev).attr("href").split('?')[0] + "?filtropesquisa=ContaCaixaBancoDestinoId|" + $("#frmLancamento #ContaCaixaBancoDestinoId").val() + "&modal");

    }

</script>

<script type="text/javascript">

    var ClickImprimirEspelhoEntradaCaixa = function (e) {

        var id = $("#frmLancamento #Id").val();
        if (!id)
            return;

        var ajaxLoadSeletor = $(".ajax-loading");
        ajaxLoadSeletor.dialog("open");

        $.ajax({
            url: '/treinamento/Financeiro/LancamentoImprimirEspelho',
            data: { id: id, nomeRelatorio: "EntradaCaixa.rpt" },
            type: "POST",
            success: (view) => {
                ajaxLoadSeletor.dialog("close");
                PaginaPrincipal.AbrirNovaAba(view.Titulo, view.Relatorio);
            },
            error: () => { ajaxLoadSeletor.dialog("close"); }
        });
    };

    var ObterDadosOperacaoFinanceira = function () {

        var contaPlanoFinanceiro = $("#OperacaoFinanceiraId").val();
        var contaCaixaDestino = $("#ContaCaixaBancoDestinoId").val();

        if ((contaPlanoFinanceiro && contaPlanoFinanceiro > 0) && (contaCaixaDestino && contaCaixaDestino > 0))
        {

            var ajaxLoadSeletor = $(".ajax-loading");
            ajaxLoadSeletor.dialog("open");

            $.ajax({
                url: '/treinamento/Financeiro/ObterDadosOperacaoFinanceiraContaContabil',
                type: "POST",
                data: { operacaoFinanceiraId: contaPlanoFinanceiro, contaContabilId: contaCaixaDestino},
                success: function (view) {

                    ajaxLoadSeletor.dialog("close");

                    if (view.Sucesso) {

                        if (view.Modelo.HistoricoContabilId > 0)
                            ConfigurarValorSelectDois($("#HistoricoContabilId"), view.Modelo.HistoricoContabilId, view.Modelo.HistoricoContabilNome);

                        if (view.Modelo.EspecieId > 0)
                            ConfigurarValorSelectDois($("#EspecieId"), view.Modelo.EspecieId, view.Modelo.EspecieNome);
                    }
                },
                error: function (evento) { ajaxLoadSeletor.dialog("close"); }
            });

        }
    }

    var ObterPessoaOperacaoFinanceiraEntrada = function () {

        $("#frmLancamento #PessoaLancamentoId").on("change", function ()
        {
            if ($("#frmLancamento #PessoaLancamentoId").val() <= 0)
            {
                $("#frmLancamento #OperacaoFinanceiraId").val(null);
                $("#frmLancamento #OperacaoFinanceiraId").trigger('change');
                return
            }

            var val = $(this).val();
            var evOpF = $("#frmLancamento #OperacaoFinanceiraId");

            if (evOpF.val() == null && val != null)
                $.ajax({
		            url: '/treinamento/Financeiro/ObterPessoaOperacaoFinanceiraEntrada',
		            type: "POST",
		            data: { pessoaId: val },
                    success: function (evento) {

                        if (evento.Sucesso)
                            ConfigurarValorSelectDois(evOpF, evento.Id, evento.Nome);
                        else
                            console.log(evento.Mensagem);
                    }
                }
            );
        });
    }

    $("document").ready(function () {

        setTimeout(function () {

            if ('True' == 'False') {

                $("#frmLancamento #ProjetoExecucaoId").closest(".form-group").hide();
                $("#frmLancamento #ProjetoExecucaoTarefaItemId").closest(".form-group").hide();

            }

        }, 500);

        if ('False' == 'False') {

            $("#frmLancamento #ImovelRuralId").closest(".form-group").hide();
            $("#frmLancamento #TipoDocumento").closest(".form-group").hide();

        }

        //if (true) {
        //    let ev = $("#frmLancamento #PessoaLancamentoId");
        //    let ref = ev.closest(".form-group").find("span.input-group-btn .btn-primary").attr("href");
        //    let href = ref.replaceAll("ClientesModal", "ContaClienteModal");
        //    ev.closest(".form-group").find("span.input-group-btn .btn-primary").attr("href", href);
        //}

        $("#ContaCaixaBancoDestinoId").on('change', function () {

            ObterDadosOperacaoFinanceira();

        });

        ObterPessoaOperacaoFinanceiraEntrada();

    });

</script>
                    </div>
                </div>

                <div id="tab_centro_custo" class="tab-pane">
                    <br />
                    <div class="portlet light  " data-m8-detalhes="true" id="pnlLancamentoCentroCustoAdicionar"><div class="portlet-title m8-portlet-title-detail  "><div class="caption m8-no-padding">
<span class="caption-subject font-grey-salsa bold uppercase"><i class=" fa-edit fa"></i> Adicionar Centro de Custo</span></div><div class="tools m8-no-padding">
<a class="expand" href="javascript:;" id="frmLancamentoCentroCustoCollapseExpand"> </a></div><div class="actions m8-no-padding  "><a class="btn btn-circle btn-default frmLancamentoCentroCustoReset " href="javascript:;"><i class=" fa-plus fa"></i> Novo</a></div></div><div class="portlet-body portlet-collapsed  "><div class="m8-form-content  "><form action="/treinamento/Financeiro/LancamentoCentroCustoFormulario" class="form-horizontal validar-obrigatorios " data-ajax-load="#ajaxLoadLancamentoCentroCustos" enctype="multipart/form-data" id="frmLancamentoCentroCusto" method="post" model-name="M8.Florestal.Visual.Web.Modelos.Financeiro.LancamentoContabilizacaoReceberCentroCustoModelo" role="form" view-name="~/Views/Financeiro/LancamentoCentroCustoFormulario.cshtml"><div class=" form-body "><div class="row"><div class="col-md-3"><div class="form-group  "><label class="control-label col-md-8 "><span class="font-dark bold text-default ">Código</span></label><div class="col-lg-4 col-md-4  "><input class=" form-control " data-val="true" id="Id" name="Id" placeholder="Código identificador único" readonly="readonly" style="min-width: 100px !important;" type="text"></input><span class="field-validation-valid text-danger" data-valmsg-for="Id" data-valmsg-replace="true"></span></div></div></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">ModeloBase.ModeloJson.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-val="true" hidden="hidden" id="ModeloJson" name="ModeloJson" placeholder="ModeloBase.ModeloJson.Descricao" tabindex="-1" type="hidden"></input><span class="field-validation-valid text-danger" data-valmsg-for="ModeloJson" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">ModeloBase.ModeloFormulario.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-val="true" hidden="hidden" id="ModeloFormulario" name="ModeloFormulario" placeholder="ModeloBase.ModeloFormulario.Descricao" tabindex="-1" type="hidden"></input><span class="field-validation-valid text-danger" data-valmsg-for="ModeloFormulario" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">LancamentoContabilizacaoCentroCustoModelo.LancamentoId.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-m8-valorInicial="788" data-val="true" hidden="hidden" id="LancamentoId" name="LancamentoId" placeholder="LancamentoContabilizacaoCentroCustoModelo.LancamentoId.Descricao" tabindex="-1" type="hidden" value="788"></input><span class="field-validation-valid text-danger" data-valmsg-for="LancamentoId" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">Centro de Custo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-val="true" hidden="hidden" id="CentroCustoNome" name="CentroCustoNome" placeholder="Centro de Custo" tabindex="-1" type="hidden"></input><span class="field-validation-valid text-danger" data-valmsg-for="CentroCustoNome" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">LancamentoContabilizacaoCentroCustoModelo.OperacaoFinanceiraNome.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-val="true" hidden="hidden" id="OperacaoFinanceiraNome" name="OperacaoFinanceiraNome" placeholder="LancamentoContabilizacaoCentroCustoModelo.OperacaoFinanceiraNome.Descricao" tabindex="-1" type="hidden"></input><span class="field-validation-valid text-danger" data-valmsg-for="OperacaoFinanceiraNome" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">LancamentoContabilizacaoCentroCustoModelo.HistoricoContabilId.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-val="true" hidden="hidden" id="HistoricoContabilId" name="HistoricoContabilId" placeholder="LancamentoContabilizacaoCentroCustoModelo.HistoricoContabilId.Descricao" tabindex="-1" type="hidden"></input><span class="field-validation-valid text-danger" data-valmsg-for="HistoricoContabilId" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">LancamentoContabilizacaoCentroCustoModelo.ContaContabilId.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-val="true" hidden="hidden" id="ContaContabilId" name="ContaContabilId" placeholder="LancamentoContabilizacaoCentroCustoModelo.ContaContabilId.Descricao" tabindex="-1" type="hidden"></input><span class="field-validation-valid text-danger" data-valmsg-for="ContaContabilId" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">LancamentoContabilizacaoCentroCustoModelo.Data.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-m8-valorInicial="01/01/0001 00:00:00" data-val="true" hidden="hidden" id="Data" name="Data" placeholder="LancamentoContabilizacaoCentroCustoModelo.Data.Descricao" tabindex="-1" type="hidden" value="01/01/0001 00:00:00"></input><span class="field-validation-valid text-danger" data-valmsg-for="Data" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">ModeloBase.TabelaBancoDados.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-val="true" hidden="hidden" id="TabelaBancoDados" name="TabelaBancoDados" placeholder="ModeloBase.TabelaBancoDados.Descricao" tabindex="-1" type="hidden"></input><span class="field-validation-valid text-danger" data-valmsg-for="TabelaBancoDados" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 "><span class="font-dark bold text-default ">Centro Custo</span></label><div class="col-lg-6 col-md-6  "><div class="input-group  "><select class="foco-inicial CentroCustoId971581 form-control " data-m8-valorInicial="0" data-obrigatorio="true" data-val="true" id="CentroCustoId" name="CentroCustoId" placeholder="Centro Custo" value="0"></select><span class="input-group-btn text-default "><a class="btn btn-primary " data-placement="top" data-url_dados="/treinamento/Contabil/CentrosCustosListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Contabil/CentrosCustosModal" id="btnPesquisarCentroCustoId317912" tabindex="-1" title="Seleção de Centro Custo"><i class=" fa-search fa"></i> </a></span></div><span class="field-validation-valid text-danger" data-valmsg-for="CentroCustoId" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 ">Plano de Contas Financeiro</label><div class="col-lg-6 col-md-6  "><div class="input-group  "><select class="OperacaoFinanceiraId296584 form-control " data-obrigatorio="false" data-val="true" id="OperacaoFinanceiraId" name="OperacaoFinanceiraId" placeholder="Plano de Contas Financeiro"></select><span class="input-group-btn text-default "><a class="btn btn-primary " data-placement="top" data-url_dados="/treinamento/Financeiro/OperacaoFinanceirasDestinoReceberTodosListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Financeiro/OperacaoFinanceirasRecebimentoTodosModal" id="btnPesquisarOperacaoFinanceiraId914434" tabindex="-1" title="Pesquisar Plano de Contas Financeiro"><i class=" fa-search fa"></i> </a><a class="btn btn-success " data-placement="top" data-url_dados="/treinamento/Financeiro/OperacaoFinanceirasDestinoReceberTodosListaSelecao" data-url_validar_usuario="/treinamento/Gestao/UrlPermissaoValidar" href="/treinamento/Financeiro/OperacaoFinanceiraModal" id="btnAdicionarOperacaoFinanceiraId619697" tabindex="-1" title="Adicionar Plano de Contas Financeiro"><i class=" fa-plus fa"></i> </a></span></div><span class="field-validation-valid text-danger" data-valmsg-for="OperacaoFinanceiraId" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 "><span class="font-dark bold text-default ">% Percentual</span></label><div class="col-lg-2 col-md-3  "><input class="mascara-monetario18_2 form-control " data-m8-valorInicial="0" data-val="true" id="Percentual" name="Percentual" placeholder="% Percentual" value="0"></input><span class="field-validation-valid text-danger" data-valmsg-for="Percentual" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 "><span class="font-dark bold text-default ">Valor</span></label><div class="col-lg-2 col-md-3  "><input class="mascara-monetario18_2 form-control " data-m8-valorInicial="0" data-val="true" id="Valor" name="Valor" placeholder="Valor" value="0"></input><span class="field-validation-valid text-danger" data-valmsg-for="Valor" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 ">Complemento</label><div class="col-lg-10 col-md-10  "><TextArea class="envia-formulario form-control " data-val="true" id="Complemento" maxlength="1000" name="Complemento" placeholder="Complemento"></TextArea><span class="field-validation-valid text-danger" data-valmsg-for="Complemento" data-valmsg-replace="true"></span></div></div></div><div class=" form-actions right m8-form "><a class="btn btn-submit-formulario tooltips frmLancamentoCentroCustoSubmit hide "><img src="/Content/gestao/img/salvar.png" style="height:27px;"></img><label class=" m8-label-botoes-formulario ">Salvar</label></a><a class="btn btn-submit-formulario tooltips frmLancamentoCentroCustoSubmitClose hide " data-pos-submit="fechar" href="/treinamento/Financeiro/LancamentoCentroCustos"><img src="/Content/gestao/img/salvar-fechar.png" style="height:27px;"></img><label class=" m8-label-botoes-formulario ">Salvar e fechar</label></a><a class="btn btn-submit-formulario tooltips frmLancamentoCentroCustoSubmitNew hide " data-pos-submit="novo" href="/treinamento/Financeiro/LancamentoCentroCustos"><img src="/Content/gestao/img/salvar-novo.png" style="height:27px;"></img><label class=" m8-label-botoes-formulario ">Salvar e novo</label></a><a class="btn btn-log tooltips header-action-button frmLancamentoCentroCustoLog hide " data-placement="bottom" onclick="ModalLog(&#39;frmLancamentoCentroCusto&#39;, &#39;LancamentoContabilizacaoCentroCusto&#39;, &#39;&#39;, &#39;/treinamento/Cadastro/LogOperacoes&#39;)" title="Visualizar logs"><img src="/Content/gestao/img/visualizar-logs.svg" style="height:16px;"></img></a><a class="btn btn-permissoes-acessos tooltips header-action-button frmLancamentoCentroCustoPermissoesAcessos hide " data-placement="bottom" onclick="ModalPermissoesAcessos(&#39;/treinamento/Sistema/PermissoesAcessos&#39;, &#39;treinamento&#39;)" title="Usuários/Grupos Com Acesso"><img src="/Content/gestao/img/visualizar-permissoes.svg" style="height:16px;"></img></a><a class="btn btn-tabela-db tooltips header-action-button frmLancamentoCentroCustoTabelaDB hide " data-placement="bottom" onclick="MensagemNomeTabela(&#39;frmLancamentoCentroCusto&#39;, &#39;LancamentoContabilizacaoCentroCusto&#39;, &#39;&#39;, &#39;/treinamento/Sistema/ObterNomeTabela&#39;)" title="Tabela Banco Dados"><img src="/Content/gestao/img/visualizar-tabela.svg" style="height:16px;"></img></a><a class="btn btn-config-campos tooltips header-action-button frmLancamentoCentroCustoConfigCampos hide " data-placement="bottom" onclick="ModalConfigCampos(&#39;frmLancamentoCentroCusto&#39;, &#39;/treinamento/Sistema/ConfigCamposModal&#39;, &#39;/treinamento/Sistema/SaveConfigCampos&#39;, &#39;/treinamento/Sistema/ListarCamposOcultos&#39;)" title="Configurar Campos"><img src="/Content/gestao/img/configurar-campos.svg" style="height:16px;"></img></a></div></form><script type="text/javascript">$("document").ready(function () {

    (function ($) {

        "use strict";
        $.fn.select2.defaults.set("theme", "bootstrap");

    })(jQuery);

    function getUrlSelect2() {

        var urlDinamica = getUrlSelect2Personalizada(".OperacaoFinanceiraId296584");
        if (urlDinamica != null && urlDinamica != undefined && urlDinamica != "")
            return urlDinamica;

        let dataAttrSelect2 = "data-" + ".OperacaoFinanceiraId296584".replace(".", "").replace(/[0-9]/g, '') + "-urlselect";
        let urlSelect = $("div[" + dataAttrSelect2 + "]:first");

        if (urlSelect.length == 1)
            return urlSelect.attr(dataAttrSelect2);
        
        return "/treinamento/Financeiro/OperacaoFinanceirasDestinoReceberTodosListaSelecao";

    }

    $(".OperacaoFinanceiraId296584").select2({
        language: "pt-BR",
        width: "off",
        openOnEnter: false,
        placeholder: "Plano de Contas Financeiro",
        minimumInputLength: 1,
        allowClear: true,
        ajax: {
            quietMillis: 1000,
            url: getUrlSelect2(),
            dataType: 'json',
            delay: 250,
            type: "POST",
            data: function (params) {

                let camposDependencia = ($(".OperacaoFinanceiraId296584").attr("data-dependente") ? $(".OperacaoFinanceiraId296584").attr("data-dependente") : "");
                let valoresDependencia = "";

                if ($(".OperacaoFinanceiraId296584").attr("data-valordependente"))
                    valoresDependencia = $(".OperacaoFinanceiraId296584").attr("data-valordependente")                
                else {

                    if (camposDependencia.indexOf(";") > -1) {

                        let qtdeDependencias = camposDependencia.split(";");
                        valoresDependencia = "";

                        for (let i = 0; i < qtdeDependencias.length; i++) 
                            valoresDependencia += $(".OperacaoFinanceiraId296584 ").closest("form").find("[name=" + qtdeDependencias[i] + "]").val() + ";";
                        

                    } else 
                        valoresDependencia = ($(".OperacaoFinanceiraId296584").attr("data-dependente") ? $(".OperacaoFinanceiraId296584").closest("form").find("[name=" + $(".OperacaoFinanceiraId296584").attr("data-dependente") + "]").val() : "");
                    
                }

                if (Array.isArray(valoresDependencia))
                    valoresDependencia = valoresDependencia.join(";");

                return {
                    pesquisa: params.term,
                    pagina: params.page == undefined ? 0 : params.page - 1,
                    campoDependente: camposDependencia,
                    valorDependente: valoresDependencia
                };

            },
            processResults: function (dados) {
                return {
                    results: dados.Retorno,
                    pagination: {
                        more: dados.ContinuarPesquisando
                    }
                };
            },
            cache: true
        },
        escapeMarkup: function (markup) {
            return markup;
        }, 
        minimumInputLength: 1,
        templateResult: undefined,
        templateSelection: undefined
    });

    $('.OperacaoFinanceiraId296584').on("select2:select", function (e) {

        var valor = $(this).find("option[value='" + $(this).val() + "']").text();
        $(".OperacaoFinanceiraId296584").closest("form").find("[name='OperacaoFinanceiraNome']").val(valor);

    });

    $('.OperacaoFinanceiraId296584').on("select2:unselect", function (e) {

        $(".OperacaoFinanceiraId296584").closest("form").find("[name='OperacaoFinanceiraNome']").val("");
        $(".OperacaoFinanceiraId296584").find('option[value="' + e.params.data.id + '"]').remove().end();

    });
        
    $('.OperacaoFinanceiraId296584').on("select2:close", function (e) {
        var formularioSeletor = "#" + $(this).closest("form").attr('id');
        var id = $(this).attr("id");
        var obrigatorio = $(this).attr("data-obrigatorio");
        var eventoTeclado = event.which;
        setTimeout(function () {

            if ((eventoTeclado == 27 || eventoTeclado == 13) && (obrigatorio == "false" || $("#" + id).val())) {

                AvancarFocus(e, formularioSeletor, $(formularioSeletor).find("#" + id), true);
                e.stopPropagation();

            }

        }, 600);

    });

});</script><script type="text/javascript">$("document").ready(function () {

    (function ($) {

        "use strict";
        $.fn.select2.defaults.set("theme", "bootstrap");

    })(jQuery);

    function getUrlSelect2() {

        var urlDinamica = getUrlSelect2Personalizada(".CentroCustoId971581");
        if (urlDinamica != null && urlDinamica != undefined && urlDinamica != "")
            return urlDinamica;

        let dataAttrSelect2 = "data-" + ".CentroCustoId971581".replace(".", "").replace(/[0-9]/g, '') + "-urlselect";
        let urlSelect = $("div[" + dataAttrSelect2 + "]:first");

        if (urlSelect.length == 1)
            return urlSelect.attr(dataAttrSelect2);
        
        return "/treinamento/Contabil/CentrosCustosListaSelecao";

    }

    $(".CentroCustoId971581").select2({
        language: "pt-BR",
        width: "off",
        openOnEnter: false,
        placeholder: "Centro Custo",
        minimumInputLength: 1,
        allowClear: true,
        ajax: {
            quietMillis: 1000,
            url: getUrlSelect2(),
            dataType: 'json',
            delay: 250,
            type: "POST",
            data: function (params) {

                let camposDependencia = ($(".CentroCustoId971581").attr("data-dependente") ? $(".CentroCustoId971581").attr("data-dependente") : "");
                let valoresDependencia = "";

                if ($(".CentroCustoId971581").attr("data-valordependente"))
                    valoresDependencia = $(".CentroCustoId971581").attr("data-valordependente")                
                else {

                    if (camposDependencia.indexOf(";") > -1) {

                        let qtdeDependencias = camposDependencia.split(";");
                        valoresDependencia = "";

                        for (let i = 0; i < qtdeDependencias.length; i++) 
                            valoresDependencia += $(".CentroCustoId971581 ").closest("form").find("[name=" + qtdeDependencias[i] + "]").val() + ";";
                        

                    } else 
                        valoresDependencia = ($(".CentroCustoId971581").attr("data-dependente") ? $(".CentroCustoId971581").closest("form").find("[name=" + $(".CentroCustoId971581").attr("data-dependente") + "]").val() : "");
                    
                }

                if (Array.isArray(valoresDependencia))
                    valoresDependencia = valoresDependencia.join(";");

                return {
                    pesquisa: params.term,
                    pagina: params.page == undefined ? 0 : params.page - 1,
                    campoDependente: camposDependencia,
                    valorDependente: valoresDependencia
                };

            },
            processResults: function (dados) {
                return {
                    results: dados.Retorno,
                    pagination: {
                        more: dados.ContinuarPesquisando
                    }
                };
            },
            cache: true
        },
        escapeMarkup: function (markup) {
            return markup;
        }, 
        minimumInputLength: 1,
        templateResult: undefined,
        templateSelection: undefined
    });

    $('.CentroCustoId971581').on("select2:select", function (e) {

        var valor = $(this).find("option[value='" + $(this).val() + "']").text();
        $(".CentroCustoId971581").closest("form").find("[name='CentroCustoNome']").val(valor);

    });

    $('.CentroCustoId971581').on("select2:unselect", function (e) {

        $(".CentroCustoId971581").closest("form").find("[name='CentroCustoNome']").val("");
        $(".CentroCustoId971581").find('option[value="' + e.params.data.id + '"]').remove().end();

    });
        
    $('.CentroCustoId971581').on("select2:close", function (e) {
        var formularioSeletor = "#" + $(this).closest("form").attr('id');
        var id = $(this).attr("id");
        var obrigatorio = $(this).attr("data-obrigatorio");
        var eventoTeclado = event.which;
        setTimeout(function () {

            if ((eventoTeclado == 27 || eventoTeclado == 13) && (obrigatorio == "false" || $("#" + id).val())) {

                AvancarFocus(e, formularioSeletor, $(formularioSeletor).find("#" + id), true);
                e.stopPropagation();

            }

        }, 600);

    });

});</script><script type="text/javascript">var isFirefox = false
var _timeoutfrmLancamentoCentroCusto = 0;

var ExecutaAcaoAposSubmit = function (evento, acaoAposSubmit, seletorModal, modalContainer, urlRetorno) {

    if (acaoAposSubmit != "novo" && urlRetorno != undefined && urlRetorno != "_blank;") {

        if (modalContainer.length == 0 && window.frameElement !== null) {

            var m8hash = window.frameElement.id;

            setTimeout(function () {

                var w = window.frameElement.contentWindow.window.parent;
                var tab = $(window.frameElement.parentElement);

                if (w.FecharAba)
                    w.FecharAba(tab, m8hash);

            }, 500);

        } else
            setTimeout(function () { modalContainer.modal("hide"); }, 500);

    } else if (evento.Novo && modalContainer.length == 0)
        setTimeout(() => window.location.href = prepareUrl(window.location.href, evento.Modelo.Id), 500);

    if (acaoAposSubmit == "novo")
        NovoRegistro();

}

var NovoRegistro = function () {

    var url = window.location.href;

    if (url.match(/\/?-?\d+\.?\d*$/)) {

        var indice = url.lastIndexOf("/");

        if (indice != -1)
            url = url.substr(0, indice);

    }

    setTimeout(function () { window.location.href = url }, 500);

}

var AlterarUrl = function (parametro, remover) {

    setTimeout(function () {

        if (remover) {

            var url = window.location.href.split('?' + parametro)[0];
            history.pushState('', '', url);

        } else
            window.location.href = window.location.href + '?' + parametro;

    }, 300);
}

var RecarregarUrl = function (id, idRemover) {

    window.location.href = prepareUrl(window.location.href, id, idRemover).replace("#", "");

}

var RespostaPadraoSucessoFormulario = function (evento) {
    setTimeout(function () { window.location.href = prepareUrl(window.location.href, evento.Modelo.Id) }, 500);
}

var prepareUrl = (url, id, idRemover) => {

    if (url.includes("?")) {
        var urls = url.split("?");
        if (!urls[0].endsWith("/"))
            url = urls[0] + "/"
        url += id + "?" + urls[1];
    }
    else {
        if (!url.endsWith("/"))
            url += "/";
        url += id;
    }

    if (idRemover != undefined && idRemover != null && idRemover != "")
        url = url.replace(idRemover, "")

    return url;

}

$("document").ready(function () {

    try { isFirefox = typeof InstallTrigger !== 'undefined'; } catch (e) { }

    TabPorEnter("#frmLancamentoCentroCusto");
    MascararCampos("#frmLancamentoCentroCusto");
    FocusInicial("#frmLancamentoCentroCusto");
    PrepararModal("#frmLancamentoCentroCusto");

    $(".formulario-dica-popover").popover({ trigger: 'hover', html: true });

    var select2Mais = undefined;

    var setaValorObjetoStorage = function (urlHash) {

        var len = 0;

        for (var i = 0, len = localStorage.length; i < len; ++i)
            if (urlHash == localStorage.key(i)) {

                var x = JSON.parse(localStorage.getItem(localStorage.key(i)));

                x.valor = "1";

                if ($('#Id').val())
                    x.id = Number($('#Id').val());

                localStorage.setItem(localStorage.key(i), JSON.stringify(x));

            }

    };

    var titulo = $($("#frmLancamentoCentroCusto").parents('[id*="Portlet"]').find('[id*="Tab"]')[0]).find('li.active > a ').text();
    var tabP = $($($("#frmLancamentoCentroCusto").parents('[id*="Portlet"]').find('[id*="Tab"]')[0]).find('a')[0]).text();

    if (titulo != "" && tabP != "")
        $("#frmLancamentoCentroCusto").find("#ModeloFormulario").val(tabP + " -> " + titulo);
    else
        $("#frmLancamentoCentroCusto").find("#ModeloFormulario").val($("#frmLancamentoCentroCusto").parents('[id*="Portlet"]').find("div.caption").text());

    if ($("#frmLancamentoCentroCusto").parents("[data-m8-detalhes='true']").length == 0) {

        $("#frmLancamentoCentroCustoTab").on("click.show", function (e) {

            initializeTab(getTabContentFromLinkTabClick(e), '#frmLancamentoCentroCusto', '.frmLancamentoCentroCustoSubmit');

        });

    }

    $(".frmLancamentoCentroCustoSubmit, .frmLancamentoCentroCustoSubmitClose, .frmLancamentoCentroCustoSubmitNew").off("click").on("click", function (e) {

        e.preventDefault();

        $("#frmLancamentoCentroCusto").attr("data-url-retorno", $(e.currentTarget).attr("href"));
        $("#frmLancamentoCentroCusto").attr("data-pos-submit", $(e.currentTarget).attr("data-pos-submit"));
        $("#frmLancamentoCentroCusto").submit();

    });

    $("#frmLancamentoCentroCusto").off("submit");
    var isSubmitted = false;
    
    $("#frmLancamentoCentroCusto").submit(function (e) {

        e.preventDefault();
        
        if (!isSubmitted)
            isSubmitted = true;
        else
            return false;

        setTimeout(() => {

            var hash = {};
            var maskedtextboxes = $(this).find("[data-role=maskedtextbox]");

            maskedtextboxes.each(function (idx, element) {

                if (element.id) {

                    var value = element.value;
                    hash[element.id] = value;

                    if (value.indexOf("_") !== -1) {

                        element.value = value.replace(/_/g, "");
                        e.preventDefault();

                    }

                    if ($(element).is(".mascara-cpf, .mascara-cnpj, .mascara-telefone, .mascara-cep")) {

                        element.value = value.replace(/[^0-9]/g, '');
                        e.preventDefault();

                    }

                }

            });

            var acaoAposSubmit = $(this).attr("data-pos-submit");
            var seletorModal = $(this).attr("data-modal-seletor");
            var modalContainer = $(seletorModal);
            var urlRetorno = $(this).attr("data-url-retorno");

            let ajaxLoadSeletor = $($(this).attr("data-ajax-load"));

            if ($(ajaxLoadSeletor).length < 1)
                ajaxLoadSeletor = $(".ajax-loading");

            ajaxLoadSeletor.dialog("open");

            var submitData = $("#frmLancamentoCentroCusto").serializeArray();

            for (var element in hash)
                $(this).find("#" + element).val(hash[element]);

            try {

                if (!ffrmLancamentoCentroCusto._validarCamposObrigatorios()) {

                    setTimeout(() => isSubmitted = false, 500);

                    try { ajaxLoadSeletor.dialog("close"); } catch (e) { }

                    Dialog.showError('Formulário inválido', 'Alguns campos não puderam ser validados. Verifique.');

                    return false;

                }

            } catch (e) { console.info(e); }

            RequisicaoAjax(
                $("#frmLancamentoCentroCusto").attr("action"),
                submitData,
                function (evento) {

                    setTimeout(function () {

                        if (ValidarFormulario($("#frmLancamentoCentroCusto"), evento))
                            CarregarFormulario($("#frmLancamentoCentroCusto"), evento);

                        $("#frmLancamentoCentroCusto").attr("data-url-retorno", urlRetorno);
                        $("#frmLancamentoCentroCusto").attr("data-modal-seletor", seletorModal);

                        try { frmLancamentoCentroCustoAjaxSucesso(evento); } catch (e) { }

                        ajaxLoadSeletor.dialog("close");
                        setTimeout(() => isSubmitted = false, 500);

                        try {

                            if (evento.Script)
                                eval(evento.Script);

                        }
                        catch (e) { }

                        if (evento.Sucesso) {

                            if (select2Mais)
                                select2Mais(evento.Modelo.Id);

                            if (acaoAposSubmit != "novo" && urlRetorno != undefined && urlRetorno != "_blank;") {

                                if (modalContainer.length == 0 && window.frameElement !== null) {

                                    var m8hash = window.frameElement.id;

                                    setTimeout(function () {

                                        var w = window.frameElement.contentWindow.window.parent;
                                        var tab = $(window.frameElement.parentElement);

                                        if (w.FecharAba)
                                            w.FecharAba(tab, m8hash);

                                    }, 500);

                                } else
                                    setTimeout(function () { modalContainer.modal("hide"); }, 500);

                            } else if (evento.Novo && modalContainer.length == 0 && true)
                                RespostaPadraoSucessoFormulario(evento);

                            if (acaoAposSubmit == "novo" && true)
                                NovoRegistro();
                            else if (acaoAposSubmit == "fechar") {

                                var urlA = window.location.href;
                                var urlAux = urlA.split("/");

                                urlA = "";

                                for (var i = 3; i < urlAux.length; i++)
                                    urlA += "/" + urlAux[i];

                                var urlHash = urlA.hashCode();

                                setaValorObjetoStorage(urlHash);

                            }

                        }

                    }, 500);

                },
                function (evento) {

                    setTimeout(function () {

                        ajaxLoadSeletor.dialog("close");

                        setTimeout(() => isSubmitted = false, 500);

                        bootbox.alert(evento.responseText);

                        try { frmLancamentoCentroCustoAjaxErro(evento); } catch (e) { }

                        FocusInicial("#frmLancamentoCentroCusto");

                    }, 500);

                }
            );

        }, _timeoutfrmLancamentoCentroCusto);

    });

});

try {

    var ffrmLancamentoCentroCusto;

    class FfrmLancamentoCentroCusto extends Forms {

        constructor() {

            super("frmLancamentoCentroCusto");

            setTimeout(() => {

                //Load content here, with separated functions
                this._init();

            }, 500);

        }
                
        _showFormContent() {
            
            this.evFrm.closest('.m8-form-content').first().show("fast");

        }

        _validarCamposObrigatorios() {

            try {

                if (!this.evFrm.hasClass('validar-obrigatorios'))
                    return true;

                let self = this;
                let hasErrors = false;
                let fieldsObrigatorios = this.evFrm.find('.obrigatorio:visible');

                fieldsObrigatorios.each(function (i, e) {

                    let id = $(e).attr('label-for');
                    let field = $(`#${self.frmId} #${id}`);
                    let val = field.val();
                    let isData = field.attr('data-type') == 'data';

                    if ((isData && !self.validateDateField(id)) || val == undefined || val == null || val.isNullOrEmpty()) {
                        field.closest('.form-group').addClass('has-error');
                        $(`#${self.frmId} [data-valmsg-for="${id}"]`).html(`Campo Obrigatório: "${$(e).text()}"`);
                        hasErrors = true;
                    }
                    else {
                        field.closest('.form-group').removeClass('has-error');
                        $(`#${self.frmId} [data-valmsg-for="${id}"]`).html('');
                    }

                });

                return !hasErrors;

            } catch (e) {

                return true;
                console.info(e);

            }

        }

        _init() {
            
            this._showFormContent();

        }

    }

    $(() => ffrmLancamentoCentroCusto = new FfrmLancamentoCentroCusto());

} catch (e) { }</script><script type="text/javascript">var ModalPesquisar378324 = function (e, selecionados) {
    $("#ModalPesquisar378324").modal("hide");
};

var MontarUrlbtnPesquisarCentroCustoId317912 = function (componente) {

    var valor = "";
    var camposdependecia = "";

    if (camposdependecia != "") {
        var qtdDependencias = camposdependecia.split(";");
        for (var i = 0; i < qtdDependencias.length; i++) {

            var campoDependente = $("#frmLancamentoCentroCusto #" + qtdDependencias[i]);
            if (campoDependente)
                valor += (valor != "" ? ";" : "") + campoDependente.val();
        }
    }

    var url = componente.attr("href");
    if (valor !== "" && valor !== undefined) {
        if (url.indexOf('filtropesquisa=') !== -1)
            url = url.replace(/(filtropesquisa=).*?(&)/, '$1' + valor + '$2');
        else
            url = url + "?filtropesquisa=" + valor;
    }

    return url;

};

$("document").ready(function () {

    var pesquisaDialog = function (e) {

        e.preventDefault();

        if ($("#btnPesquisarCentroCustoId317912").hasClass('m8-btn-desabilitado'))
            return false;

        var href = $("#btnPesquisarCentroCustoId317912").attr("href");
        $("#btnPesquisarCentroCustoId317912").attr("disabled", "disabled");
        $("#btnPesquisarCentroCustoId317912").css("pointer-events", "none");
        $("#btnPesquisarCentroCustoId317912").unbind("click");
        ConstruirModal(
            "ModalPesquisar378324",
            "btnPesquisarCentroCustoId317912",
            "Seleção de Centro Custo",
            MontarUrlbtnPesquisarCentroCustoId317912($(this)),
            { funcaoRetorno: "ModalPesquisar378324" },
            function (e) {  

                $("#btnPesquisarCentroCustoId317912").attr("href", "#");
                setTimeout(() => {

                    try {
                        ModalPesquisarShow(e, "ModalPesquisar378324", "btnPesquisarCentroCustoId317912");                        
                    } catch (c) { }

                    try {
                        $("#ModalPesquisar378324").attr("data-formulario-chamou", "#frmLancamentoCentroCusto");
                        $("#ModalPesquisar378324").attr("data-formulario-chamou-extras-grid", "_FuncaoAntesEditar_");
                        $("#ModalPesquisar378324").attr("data-formulario-chamou-extras-form", "_FuncaoAntesEditar_");
                    } catch (e) { }

                }, 500);
                
            },
            function (e) {
                
                var seletorRetorno = $(".btnPesquisarCentroCustoId317912").attr("data-form") + " #Id";
                var retorno = "";

                if (selecionados && selecionados.length == 1)
                    retorno = selecionados[0];
                else if (selecionados && selecionados.length > 1)
                    retorno = selecionados.toString();

                if (true) {
                    if (retorno !== "" && retorno != undefined) {

                        let campoDependente = ($(".CentroCustoId971581").attr("data-dependente") ? $(".CentroCustoId971581").attr("data-dependente") : "");
                        let valorDependente = ($(".CentroCustoId971581").attr("data-valordependente") ? $(".CentroCustoId971581").attr("data-valordependente") :
                                               $(".CentroCustoId971581").attr("data-dependente") ? buscarValoresDependentes($(".CentroCustoId971581"), $(".CentroCustoId971581").closest("form").attr("id")) : "")

                        let urlDadosSelectDois = $("#btnPesquisarCentroCustoId317912").attr("data-url-dados-select-dois") || "/treinamento/Contabil/CentrosCustosListaSelecao";
                        if (Array.isArray(valorDependente)) 
                            valorDependente = valorDependente.join(";");

                        $.ajax({
                            url: urlDadosSelectDois,
                            type: "POST",
                            data: {
                                pesquisa: retorno,
                                pagina: 0,
                                campoDependente: campoDependente,
                                valorDependente: valorDependente,
                                selecao: true
                            },
                            dataType: 'json',
                            success: function (dados) {
                                if (dados.Retorno.length > 0) {
                                    $.each(dados.Retorno, function (idx, val) {
                                        var newOption = new Option(val.text, val.id, true, true);
                                        $(".CentroCustoId971581").append(newOption);
                                    });
                                    $(".CentroCustoId971581").trigger('change');
                                    SetarFoco($("#frmLancamentoCentroCusto .CentroCustoId971581"));
                                    AvancarFocus(e, "#frmLancamentoCentroCusto", $(".CentroCustoId971581"), true);
                                }
                            }
                        });
                    }
                    if (typeof funcaoAposSelecao === "function") {
                        funcaoAposSelecao(selecionados);
                    }
                } else if (typeof funcaoAposSelecao === "function") {
                    funcaoAposSelecao(selecionados);
                }
                else {
                    $(".CentroCustoId971581").val(retorno);
                    SetarFoco($("#frmLancamentoCentroCusto .CentroCustoId971581"));
                }

                $("#btnPesquisarCentroCustoId317912").css("pointer-events", "initial");
                $("#btnPesquisarCentroCustoId317912").removeAttr("disabled");
                $("#btnPesquisarCentroCustoId317912").attr("href", href);
                $("#btnPesquisarCentroCustoId317912").bind('click', pesquisaDialog);

            },
            $("#frmLancamentoCentroCusto").attr("data-ajax-load"),
            {
                success: {
                    label: "Selecionar",
                    className: "btn-success",
                    callback: function () {

                        if (!selecionados || selecionados.length == 0) {

                            Notificacao.Aviso("Nenhum registro selecionado");
                            return false;

                        } else
                            $("#ModalPesquisar378324").modal("hide");
                        
                    }
                },
                close: {
                    label: "Fechar",
                    className: "btn-danger ",
                    callback: function () {
                        selecionados = "";
                        $("#ModalPesquisar378324").modal("hide");
                    }
                }
            },
            "modalPesquisa"
        );

    };

    $("#btnPesquisarCentroCustoId317912").on("click", pesquisaDialog);

});</script><script type="text/javascript">var ModalPesquisar4943 = function (e, selecionados) {
    $("#ModalPesquisar4943").modal("hide");
};

var MontarUrlbtnPesquisarOperacaoFinanceiraId914434 = function (componente) {

    var valor = "";
    var camposdependecia = "";

    if (camposdependecia != "") {
        var qtdDependencias = camposdependecia.split(";");
        for (var i = 0; i < qtdDependencias.length; i++) {

            var campoDependente = $("#frmLancamentoCentroCusto #" + qtdDependencias[i]);
            if (campoDependente)
                valor += (valor != "" ? ";" : "") + campoDependente.val();
        }
    }

    var url = componente.attr("href");
    if (valor !== "" && valor !== undefined) {
        if (url.indexOf('filtropesquisa=') !== -1)
            url = url.replace(/(filtropesquisa=).*?(&)/, '$1' + valor + '$2');
        else
            url = url + "?filtropesquisa=" + valor;
    }

    return url;

};

$("document").ready(function () {

    var pesquisaDialog = function (e) {

        e.preventDefault();

        if ($("#btnPesquisarOperacaoFinanceiraId914434").hasClass('m8-btn-desabilitado'))
            return false;

        var href = $("#btnPesquisarOperacaoFinanceiraId914434").attr("href");
        $("#btnPesquisarOperacaoFinanceiraId914434").attr("disabled", "disabled");
        $("#btnPesquisarOperacaoFinanceiraId914434").css("pointer-events", "none");
        $("#btnPesquisarOperacaoFinanceiraId914434").unbind("click");
        ConstruirModal(
            "ModalPesquisar4943",
            "btnPesquisarOperacaoFinanceiraId914434",
            "Pesquisar Plano de Contas Financeiro",
            MontarUrlbtnPesquisarOperacaoFinanceiraId914434($(this)),
            { funcaoRetorno: "ModalPesquisar4943" },
            function (e) {  

                $("#btnPesquisarOperacaoFinanceiraId914434").attr("href", "#");
                setTimeout(() => {

                    try {
                        ModalPesquisarShow(e, "ModalPesquisar4943", "btnPesquisarOperacaoFinanceiraId914434");                        
                    } catch (c) { }

                    try {
                        $("#ModalPesquisar4943").attr("data-formulario-chamou", "#frmLancamentoCentroCusto");
                        $("#ModalPesquisar4943").attr("data-formulario-chamou-extras-grid", "_FuncaoAntesEditar_");
                        $("#ModalPesquisar4943").attr("data-formulario-chamou-extras-form", "_FuncaoAntesEditar_");
                    } catch (e) { }

                }, 500);
                
            },
            function (e) {
                
                var seletorRetorno = $(".btnPesquisarOperacaoFinanceiraId914434").attr("data-form") + " #Id";
                var retorno = "";

                if (selecionados && selecionados.length == 1)
                    retorno = selecionados[0];
                else if (selecionados && selecionados.length > 1)
                    retorno = selecionados.toString();

                if (true) {
                    if (retorno !== "" && retorno != undefined) {

                        let campoDependente = ($(".OperacaoFinanceiraId296584").attr("data-dependente") ? $(".OperacaoFinanceiraId296584").attr("data-dependente") : "");
                        let valorDependente = ($(".OperacaoFinanceiraId296584").attr("data-valordependente") ? $(".OperacaoFinanceiraId296584").attr("data-valordependente") :
                                               $(".OperacaoFinanceiraId296584").attr("data-dependente") ? buscarValoresDependentes($(".OperacaoFinanceiraId296584"), $(".OperacaoFinanceiraId296584").closest("form").attr("id")) : "")

                        let urlDadosSelectDois = $("#btnPesquisarOperacaoFinanceiraId914434").attr("data-url-dados-select-dois") || "/treinamento/Financeiro/OperacaoFinanceirasDestinoReceberTodosListaSelecao";
                        if (Array.isArray(valorDependente)) 
                            valorDependente = valorDependente.join(";");

                        $.ajax({
                            url: urlDadosSelectDois,
                            type: "POST",
                            data: {
                                pesquisa: retorno,
                                pagina: 0,
                                campoDependente: campoDependente,
                                valorDependente: valorDependente,
                                selecao: true
                            },
                            dataType: 'json',
                            success: function (dados) {
                                if (dados.Retorno.length > 0) {
                                    $.each(dados.Retorno, function (idx, val) {
                                        var newOption = new Option(val.text, val.id, true, true);
                                        $(".OperacaoFinanceiraId296584").append(newOption);
                                    });
                                    $(".OperacaoFinanceiraId296584").trigger('change');
                                    SetarFoco($("#frmLancamentoCentroCusto .OperacaoFinanceiraId296584"));
                                    AvancarFocus(e, "#frmLancamentoCentroCusto", $(".OperacaoFinanceiraId296584"), true);
                                }
                            }
                        });
                    }
                    if (typeof funcaoAposSelecao === "function") {
                        funcaoAposSelecao(selecionados);
                    }
                } else if (typeof funcaoAposSelecao === "function") {
                    funcaoAposSelecao(selecionados);
                }
                else {
                    $(".OperacaoFinanceiraId296584").val(retorno);
                    SetarFoco($("#frmLancamentoCentroCusto .OperacaoFinanceiraId296584"));
                }

                $("#btnPesquisarOperacaoFinanceiraId914434").css("pointer-events", "initial");
                $("#btnPesquisarOperacaoFinanceiraId914434").removeAttr("disabled");
                $("#btnPesquisarOperacaoFinanceiraId914434").attr("href", href);
                $("#btnPesquisarOperacaoFinanceiraId914434").bind('click', pesquisaDialog);

            },
            $("#frmLancamentoCentroCusto").attr("data-ajax-load"),
            {
                success: {
                    label: "Selecionar",
                    className: "btn-success",
                    callback: function () {

                        if (!selecionados || selecionados.length == 0) {

                            Notificacao.Aviso("Nenhum registro selecionado");
                            return false;

                        } else
                            $("#ModalPesquisar4943").modal("hide");
                        
                    }
                },
                close: {
                    label: "Fechar",
                    className: "btn-danger ",
                    callback: function () {
                        selecionados = "";
                        $("#ModalPesquisar4943").modal("hide");
                    }
                }
            },
            "modalPesquisa"
        );

    };

    $("#btnPesquisarOperacaoFinanceiraId914434").on("click", pesquisaDialog);

});</script><script type="text/javascript">$("document").ready(function () {

    var listenerValue = function (key) {

        let valor = "";

        setTimeout(() => {

            let item = localStorage.getItem(key);

            item = JSON.parse(item);

            if (item) {

                if (item.valor != "") {

                    if (item.valor !== "0") {

                        if (item.campoDependente != "" && item.valorDependente != "")
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, item.campoDependente, item.valorDependente);
                        else
                            setaValoresSelect2(item.campo, item.id, item.formName, item.urlDados, item.href, null, null);

                        return item.valor;

                    }
                    else
                        return valor;

                } else
                    listenerValue(key);

            }
        }, 1000);
    }

    var processValue = function (key, e) {

        listenerValue(key);

    }

    $("#btnAdicionarOperacaoFinanceiraId619697").on("click", function (e) {

        e.preventDefault();


        var href = $(this).attr("href");
        var urlValidar = $(this).data("url_validar_usuario");
        var urlPermissaoValidar = $(this).data("url_permissao_validar");
        var urlDados = $(this).data("url_dados");
        var acaoAdicionarCustomizada = $(this).data("acao_adicionar_customizada");
        var id = $($(this).parent().parent().children()[0]).val();
        var campo = ($(this).parent().parent().children()[0]).name;
        var hasCampoId = "null" != "null";
        var campoId = $("#" + $(this).parents("form").first().attr("Id") + " #null").val();

        if (hasCampoId && (campoId == null || campoId == undefined)) {

            var msgCampoId = "null" == "null" ? "Campo dependência não informado: 'null'" : "null";
            Notificacao.Alerta(msgCampoId);

            return;
        }

        if (campoId != null)
            id = campoId;

        var campoDependente = "";
        var valorDependente = "";

        if ($('#' + campo).data('dependente') != null) {

            campoDependente = $('#' + campo).data('dependente');
            valorDependente = $('#' + $('#' + campo).data('dependente').split(';')[0]).val();

        }

        var idString = id ? id.toString() : "";

        if (idString === "") {

            idString = $($(this).parent().parent().children()[0]).attr('data-idConsulta') + "";
            id = $($(this).parent().parent().children()[0]).attr('data-idConsulta');

        }

        var hrefAux = "";
        var formName = $($("li.active a").attr("href")).find("form").attr("id");

        if (formName === undefined || formName == null)
            formName = (document.getElementsByTagName("form")[0]).id;

        var hashAbaAtual = ($(".nav li.active a").attr("data-m8-hash"));

        let storageAba = {
            hashPai: hashAbaAtual
        };


        var hrefUrlValidar = href;

        if (acaoAdicionarCustomizada) {
            hrefUrlValidar = decodeURIComponent(hrefUrlValidar);
        }
        else {
            if (decodeURIComponent(hrefUrlValidar).indexOf("?"))
                hrefUrlValidar = decodeURIComponent(hrefUrlValidar).split('?')[0];
        }

        if (urlPermissaoValidar != undefined && urlPermissaoValidar != null)
            hrefUrlValidar = urlPermissaoValidar;

        $.ajax({
            url: urlValidar,
            data: { urlValidar: hrefUrlValidar },
            dataType: 'json',
            async: false,
            success: function (res) {

                if (res.Data == true) {

                    let element = {
                        href: href,
                        campo: campo,
                        urlDados: urlDados,
                        formName: formName,
                        valorDependente: valorDependente,
                        campoDependente: campoDependente,
                        id: idString,
                        valor: ""
                    };

                    href = SetAnsii(href);

                    if (href.toLowerCase().endsWith('modal'))
                        hrefAux = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

                    if (idString && idString.length > 0)
                        hrefAux += '/' + id;

                    localStorage.setItem(hrefAux.hashCode() + "1", JSON.stringify(storageAba));
                    localStorage.setItem(hrefAux.hashCode(), JSON.stringify(element));
                    processValue(hrefAux.hashCode(), e);

                    ChamarAbaAdicionarEditar(e, href, id, acaoAdicionarCustomizada);

                }
                else
                    Notificacao.Alerta("Usuário sem permissão de acesso.");

            }
        });
    });

    var SetAnsii = (href) => {

        href = href.replace("%3f", "?");
        href = href.replace("%3d", "=");
        href = href.replace("%23", "#");
        href = href.replace("%26", "&");

        return href;
    }

    var ChamarAbaAdicionarEditar = function (e, href, id, acaoAdicionarCustomizada) {

        var eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesAdicionar() };

        if (href.toLowerCase().endsWith('modal'))
            href = href.substring(0, href.toLowerCase().lastIndexOf('modal'));

        if (id && id.length > 0) {

            if (acaoAdicionarCustomizada) {
                href += id
            } else {
                var parans = href.split('?');
                href = parans[0] + '/' + id;
                if (parans.length > 1)
                    href += '?' + parans[1];
            }

            eventoAposAbrirAbaNova = function () { OnExecuteFuncaoAntesEditar(id) };

        }

        var paginaPrincipal = window.parent;

        href = GetUrlParamValues(href, acaoAdicionarCustomizada);

        if (typeof paginaPrincipal.AbrirNovaAba === "function")
            paginaPrincipal.AbrirNovaAba("...", href, undefined, undefined, undefined, true, eventoAposAbrirAbaNova);

    }

    var GetUrlParamValues = (href, acaoAdicionarCustomizada) => {

        var hasParans = href.includes('?') && (href.includes('#') || href.includes('.'));

        if (!acaoAdicionarCustomizada && hasParans) {

            var parans = href.split('?')[1].split('&');

            for (var i = 0; i < parans.length; i++) {

                var paran = parans[i].split('=');
                var value = $(paran[1]).val();

                if (value != undefined)
                    href = href.replace(paran[1], value);
                else {

                    href = href.replace(parans[i], "");

                    if (href.endsWith('&'))
                        href = href.substring(0, href.length - 3);

                }
            }

        }

        return href;

    }

    var OnExecuteFuncaoAntesEditar = (id) => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](id); }
            catch { }

        }, 2000);

    }

    var OnExecuteFuncaoAntesAdicionar = () => {

        setTimeout(() => {

            try { window["_FuncaoAntesEditar_"](); }
            catch { }

        }, 2000);

    }

    var setaValoresSelect2 = function (campoForm, id, form, urlPesquisa, urlRetorno, campoDependente, valorDependente) {

        var campoFormulario = "#" + form + " #" + campoForm;
        var novoId = id.toString();

        $.ajax({
            url: urlPesquisa,
            data: {
                pesquisa: id,
                campoDependente: campoDependente,
                valorDependente: valorDependente,
                selecao: true
            },
            dataType: 'json',
            success: function (dados) {

                var cont = 0;

                for (var cont = 0; cont < dados.Retorno.length; cont++) {

                    var retorno = dados.Retorno[cont];

                    if (Number(novoId) == Number(retorno.id)) {

                        $(campoFormulario).select2("val", '');
                        $(campoFormulario).append(new Option(retorno.text, retorno.id, true, true)).trigger('change');

                    }

                }

            },
            error: function (message) { console.log(message); }
        });

    }

});</script></div><div></div>

<script>

    var AtualizarGridContabilizacoes = function () {
        var kendoGrid = $("#tblContabilizacaoLancamento").data("kendoGrid");
        if (kendoGrid && kendoGrid.dataSource) {
            kendoGrid.dataSource.read();
        }
    }

    var gridDetalheCentroCustoLancamento = function (e) {
        AtualizarGridContabilizacoes();
        CalcularValoresRestantes();
    }

    var CalcularValoresRestantes = function () {
        var idEditando = $("#frmLancamentoCentroCusto #Id").val();
        var grid = $("#tblDetalheLancamentoCentroCusto").data("kendoGrid");
        var linhas = grid.tbody.find("tr").not(".k-grouping-row").not(".k-group-footer");
        var valor = 0;
        linhas.each(function (e) {
            var item = grid.dataItem($(this));
            if (item.Id != idEditando)
                valor = valor + item.Valor;
        });

        var valorTotal = $("#frmLancamento #ValorLancamento").val().ParaNumero() || 0;
        if (!(idEditando > 0)) {
            $("#frmLancamentoCentroCusto #Valor").val(valorTotal - valor);
        }

        $("#totalDigitado").text("Total: " + kendo.toString(valor, 'n2'));
        var restante = valorTotal - valor;
        $("#totalRestante").text("Restante: " + kendo.toString(restante , 'n2'));
        CalcularPercentual();
    }

    var Arredondar = function (value, decimals) {
        return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);
    };

    var CalcularValor = function () {
        var valorTotal = $("#frmLancamento #ValorLancamento").val().ParaNumero();
        var percentual = $("#frmLancamentoCentroCusto #Percentual").val().ParaNumero();
        $("#frmLancamentoCentroCusto #Valor").val(Arredondar((valorTotal * (percentual / 100)), 2));
    };

    var CalcularPercentual = function () {
        var valorTotal = $("#frmLancamento #ValorLancamento").val().ParaNumero();
        var valor = $("#frmLancamentoCentroCusto #Valor").val().ParaNumero();
        $("#frmLancamentoCentroCusto #Percentual").val(Arredondar((valor / valorTotal) * 100, 2));
    };

    var ConfigurarCamposChange = function (habilitar) {
        if (habilitar) {

            $("#frmLancamentoCentroCusto #Valor").on("change", function (e) {
                ConfigurarCamposChange(false);
                CalcularPercentual();
                ConfigurarCamposChange(true);
            });
            $("#frmLancamentoCentroCusto #Percentual").on("change", function (e) {
                ConfigurarCamposChange(false);
                CalcularValor();
                ConfigurarCamposChange(true);
            });
        }
        else {
            $("#frmLancamentoCentroCusto #Valor").off("change");
            $("#frmLancamentoCentroCusto #Percentual").off("change");
        }
    };

    $("document").ready(function () {

        setTimeout(function () {
            $("#frmLancamentoCentroCusto #Complemento").closest(".form-group").after(
                '<div class="form-group"><label class="control-label col-md-2 "></label>' +
                    '<div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">' +
                        '<div class="number">' +
                            '<h3 class="font-green-sharp">' +
                                '<span class="font-blue" id="totalDigitado">Total: 0,00</span>' +
                                '<span class="font-green-sharp" id="totalRestante"style="margin-left: 20px;">Restante: 0,00</span>' +
                            '</h3>' +
                        '</div>' +
                    '</div>' +
                '</div>')

            var grid = $("#tblDetalheLancamentoCentroCusto").data("kendoGrid");
            grid.bind("dataBound", gridDetalheCentroCustoLancamento);

        }, 1000);

        $(".frmLancamentoCentroCustoReset").on('click', function () {
            CalcularValoresRestantes();
        })

        ConfigurarCamposChange(true);
    });

</script></div></div><script type="text/javascript">
var AjustarTamanhoGridKendo = function () {
    var itens = Array.from(document.querySelectorAll('.k-grid-content'));
    var grid = Array.from(document.querySelectorAll('.m8-formulario'));
    var gridTamanho = grid[0].offsetHeight;

    itens.forEach(function myfunction(obj, i) {
        if ($(obj).closest(".modal") == undefined){
            var folga = 0;
            if (obj.parentElement.offsetTop == 0) {
                folga = 220;
            }

            var height = gridTamanho - obj.parentElement.offsetTop - 120 - folga;

            if (height < 240)
                height = 240;

            obj.parentElement.setAttribute('style', 'height: ' + height + 'px;');
            obj.setAttribute('style', 'height: ' + height + 'px;');
        }
    })

}

var RegistrarTamanhoGridKendo = function () {

    var itens = $('[data-role="grid"]');
    $(itens).each(function (indice, obj) {

        var grid = $(obj).data("kendoGrid");

        if (grid != undefined)
            grid.bind("dataBound", AjustarTamanhoGridKendo);

    });

}

var AjustarTamanhoGridKendoTimer = function () {
    setTimeout(function () {
        AjustarTamanhoGridKendo();
    }, 750);
}


$("document").ready(function () {

    setTimeout(function () {
        RegistrarTamanhoGridKendo();
        AjustarTamanhoGridKendoTimer();
    }, 3000);

    $(".nav-pills").click(function () { AjustarTamanhoGridKendoTimer() })
    $(".nav-tabs").click(function () { AjustarTamanhoGridKendoTimer() })
    $('.tools').click(function () { AjustarTamanhoGridKendoTimer() })
    $("#frmLancamentoCentroCustoCollapseExpand").click(function () { AjustarTamanhoGridKendoTimer() })

    $(".frmLancamentoCentroCustoReset").on("click", function (e) {

        LimparFormulario("#frmLancamentoCentroCusto");

        if ($('#frmLancamentoCentroCustoCollapseExpand').hasClass('expand'))
            $('#frmLancamentoCentroCustoCollapseExpand').click();

        setTimeout(function () {

            $("#frmLancamentoCentroCusto .make-switch").val("true");
            FocusInicial("#frmLancamentoCentroCusto");
            
        }, 100);

    });

});
</script>
                    <div class="portlet light  " id="pnlLancamentoCentroCustoAdicionados"><div class="portlet-title m8-portlet-title-detail  "><div class="caption m8-no-padding">
<span class="caption-subject font-grey-salsa bold uppercase"><i class=" fa-th-list fa"></i> Centro de Custos</span></div><div class="detalhes_tools tools m8-no-padding">
<a class="collapse" href="javascript:;"> </a></div></div><div class="portlet-body  "><script type="text/javascript">var tblDetalheLancamentoCentroCustoExecutarDeletarRegistroListagemDetalhes = (e, button) => {

    $(".ajax-loading").dialog("open");

    RequisicaoAjax(
        button.attr("data-url-acao"),
        null,
        function (evento) {

            setTimeout(function () {

                $(".ajax-loading").dialog("close");

                if (evento.Sucesso) {

                    $("#tblDetalheLancamentoCentroCusto").data("kendoGrid").dataSource.read();
                    LimparFormulario("#frmLancamentoCentroCusto");

                    try { tblDetalheLancamentoCentroCustoExcluirSucesso(evento); } catch (e) { }

                    try {
                                                
                        if (evento.Script)
                            eval(evento.Script);

                        var selectorGridString = "#tblDetalheLancamentoCentroCusto"

                        if (selectorGridString != "#tblDetalhePessoaAnexo")
                            document.getElementById($("#tblDetalheLancamentoCentroCusto").closest(".tab-pane").find(".portlet.light").first().attr("id")).scrollIntoView();

                    }
                    catch (c) { }

                }
                else
                    bootbox.alert("Não foi possível excluir o registro!<br />" + evento.Mensagem);

            }, 500);

        },
        function (evento) {

            setTimeout(function () {

                $(".ajax-loading").dialog("close");
                bootbox.alert("Não foi possível excluir o registro!<br />" + evento);

            }, 500);

        }
    );

}

var tblDetalheLancamentoCentroCustoOnHideConfiCampos = () => {
    configurarHideConfiCampos("#frmLancamentoCentroCusto");
}

var tblDetalheLancamentoCentroCustoDeletarRegistroListagemDetalhes = function (e, button) {

    try {

        tblDetalheLancamentoCentroCustoIsDeletarRegistroListagemDetalhesValido(e, button, tblDetalheLancamentoCentroCustoExecutarDeletarRegistroListagemDetalhes);

    } catch (c) {

        bootbox.dialog({
            message: "Excluir registro?",
            closeButton: false,
            buttons: {
                danger: {
                    label: "Cancelar",
                    className: "btn-danger",
                    callback: function () { }
                },
                success: {
                    label: "Confirmar",
                    className: "btn-success",
                    callback: function () { tblDetalheLancamentoCentroCustoExecutarDeletarRegistroListagemDetalhes(e, button); }
                }
            }
        });

    }

}

var tblDetalheLancamentoCentroCustoEditarRegistroListagemDetalhes = function (e, button) {

    $(".ajax-loading").dialog("open");
    var formSeletor = "#frmLancamentoCentroCusto";

    RequisicaoAjax(
        button.attr("data-url-acao"),
        null,
        function (evento) {

            setTimeout(function () {

                if (evento.Sucesso) {

                    $(".ajax-loading").dialog("close");
                    AbriPainel($(formSeletor));

                    setTimeout(function () {

                        $(formSeletor).closest(".tab-pane").find(".m8-formulario-rodape").remove();
                        $(formSeletor).parent().parent().empty().html(evento.View);

                        TabPorEnter(formSeletor);
                        MascararCampos(formSeletor);
                        FocusInicial(formSeletor);
                        ConfigurarCep();
                        carregaControleInputTexto();

                        try {

                            if (evento.Script)
                                eval(evento.Script);

                            document.getElementById($("#tblDetalheLancamentoCentroCusto").closest(".tab-pane").find(".portlet.light").first().attr("id")).scrollIntoView();

                        }
                        catch (e) { }

                        tblDetalheLancamentoCentroCustoOnHideConfiCampos();

                        try {
                            tblDetalheLancamentoCentroCustoAjaxEditarSucesso(evento);
                        }
                        catch (e) { }

                    }, 500);

                }
                else
                    bootbox.alert("Não foi possível editar o registro!<br />" + evento.Mensagem);

            }, 500);

        },
        function (evento) {

            setTimeout(function () {

                $(".ajax-loading").dialog("close");
                bootbox.alert("Não foi possível editar o registro!<br />" + evento);

            }, 500);

        }
    );

}

var tblDetalheLancamentoCentroCustoOnAjaxLoadComplete = function (e) {

    $("table[role='grid'] tbody tr td a").tooltip();

    tblDetalheLancamentoCentroCustoConfigurarEventos();

    setTimeout(() => {
                
        setGridTelerikLink();

    }, 1500);

}

var tblDetalheLancamentoCentroCustoConfigurarEventos = function () {

    var BTN_EDITAR = $("#tblDetalheLancamentoCentroCusto [class^='btnListagemDetalheEditar']");
    var BTN_EXCLUIR = $("#tblDetalheLancamentoCentroCusto [class^='btnListagemDetalheExcluir']");

    BTN_EXCLUIR.off('click').on("click", function (e) {

        e.preventDefault();
        e.stopPropagation();

        tblDetalheLancamentoCentroCustoDeletarRegistroListagemDetalhes(e, $(this));

    });

    BTN_EDITAR.off('click').on("click", function (e) {

        e.preventDefault();
        e.stopPropagation();

        tblDetalheLancamentoCentroCustoEditarRegistroListagemDetalhes(e, $(this));

    });

    setTimeout(function () {

        FormatarColunaCep("#tblDetalheLancamentoCentroCusto .m8-cep");
        FormatarColunaTelefone("#tblDetalheLancamentoCentroCusto .m8-telefone");
        FormatarColunaCpfCnpj("#tblDetalheLancamentoCentroCusto .m8-cnpj_cpf");
        FormatarColunaNumero("#tblDetalheLancamentoCentroCusto .m8-numero");
        FormatarColunaDataHora("#tblDetalheLancamentoCentroCusto .m8-formato-data-hora");
        FormatarColunaData("#tblDetalheLancamentoCentroCusto .m8-formato-data");
        
        if (typeof FormatarColunaTemplate === "function")
            FormatarColunaTemplate();

    }, 500);

}

var tblDetalheLancamentoCentroCustoCarregarConfiguracaoGridDetalhes = function (gridId) {

    CarregarConfiguracaoGridDetalhes(gridId, '/treinamento/Home/CarregarGrid');

}

var tblDetalheLancamentoCentroCustoSalvarConfiguracaoGridDetalhes = function (gridId) {

    SalvarConfiguracaoGridDetalhes(gridId, '/treinamento/Home/SalvarGrid');

}

var tblDetalheLancamentoCentroCustoRemoverConfiguracaoGridDetalhes = function (gridId) {

    RemoverConfiguracaoGridDetalhes(gridId, '/treinamento/Home/RemoverGrid');

}

$("document").ready(function () {

    $("div[data-role='popup'].k-list-container.k-popup.k-group.k-reset").remove();

    setTimeout(function () {


        try {
            GridAjusteDataBound("#tblDetalheLancamentoCentroCusto");
        } catch (e) { }
        
        $("#tblDetalheLancamentoCentroCusto").data("kendoGrid").thead.kendoTooltip({
            filter: "th",
            content: function (e) {

                var target = e.target;
                var tip = $(target).find('a.k-link').data("m8-tooltip");

                return tip ? tip : $(target).text();

            }
        });

        var componente = $("#tblDetalheLancamentoCentroCusto").closest(".tab-pane").children().find(".detalhes_tools");
        var adicionarBotaoSalvar = componente.length > 0;

        if (adicionarBotaoSalvar) {

            if (componente.parent().find('a[title="Salvar Configurações"]').html() == undefined)
                componente.after('' +
                    '<div class="tools m8-no-padding">' +
                    '   <a class="botao-barra-pesquisa btn btn-default" onclick="tblDetalheLancamentoCentroCustoSalvarConfiguracaoGridDetalhes(\'tblDetalheLancamentoCentroCusto\')" title="Salvar Configurações">' +
                    '       <i class="tblDetalheLancamentoCentroCustobntConfiguracaoPreferencia fa fa-save fa-pesquisa-cinza"></i>' +
                    '   </a>' +
                    '</div>');

            if (componente.parent().find('a[title="Remover Configurações"]').html() == undefined)
                componente.after('' +
                    '<div class="tools m8-no-padding">' +
                    '   <a class="botao-barra-pesquisa btn btn-default" onclick="tblDetalheLancamentoCentroCustoRemoverConfiguracaoGridDetalhes(\'tblDetalheLancamentoCentroCusto\')" title="Remover Configurações">' +
                    '       <i class="fa fa-trash fa-pesquisa-cinza"></i>' +
                    '   </a>' +
                    '</div>');

        }

        if (true)
            tblDetalheLancamentoCentroCustoCarregarConfiguracaoGridDetalhes('tblDetalheLancamentoCentroCusto');

    }, 500);

});

try {

    const PERMITE_REDIMENCIONAR = false;
    const AJUSTE_REDIMENCIONAR = 0;

    var gtblDetalheLancamentoCentroCusto;

    class LDTtblDetalheLancamentoCentroCusto {

        constructor() {
            
            this.inResize = false;
            this.gridId = 'tblDetalheLancamentoCentroCusto';

            setTimeout(() => {
                
                //Load content here, with separated functions
                this._setResizable();

            }, 500);

        }

        _setResizable() {
            
            if (PERMITE_REDIMENCIONAR) {

                let portletBody = $(`#${this.gridId}`).parent('div.portlet-body');

                if (portletBody) {

                    portletBody.css('min-height', '370px');
                    portletBody.css('resize', 'vertical');
                    portletBody.css('overflow', 'auto');
                    portletBody.attr('grid-id', this.gridId);

                    Grid.setDataBound(this.gridId, () => this._onResizePortletBody(this, AJUSTE_REDIMENCIONAR));
                    new ResizeObserver(() => this._onResizePortletBody(this, AJUSTE_REDIMENCIONAR)).observe(portletBody[0]);

                }

            }

        }

        _onResizePortletBody(self, ajusteRedimencionar) {
            
            if (!self.inResize) {

                self.inResize = true;

                setTimeout(() => {

                    self.inResize = false;
                    Grid.setHeight(self.gridId, `div.portlet-body[grid-id="${self.gridId}"]`, (-100) + (ajusteRedimencionar ?? 0));

                }, 1500);

            }

        }

    }

    $(() => gtblDetalheLancamentoCentroCusto = new LDTtblDetalheLancamentoCentroCusto());

} catch (e) { }</script><div class="k-widget k-grid " detalhes="False" id="tblDetalheLancamentoCentroCusto" style="height:349px;"><div class="k-toolbar k-grid-toolbar k-grid-top"><div><div></div></div></div><div class="k-grouping-header">Arraste um cabeçalho da coluna e solte-o aqui para agrupar!</div><div class="k-grid-header"><div class="k-grid-header-wrap"><table><colgroup><col style="width:100px" /><col style="width:120px" /><col style="width:180px" /><col style="width:220px" /><col style="width:140px" /><col /><col style="width:140px" /><col style="width:140px" /><col style="width:95px" /></colgroup><tr><th class="k-header" data-field="AcaoBtn" data-groupable="false" data-title="Ações" scope="col" style="text-align:center;"><span class="k-link">Ações</span></th><th class="k-header " col-ordem="-1" data-field="Id" data-title="Código" scope="col" style=""><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Código identificador único'>Código</a></th><th class="k-header " col-ordem="1" data-field="CentroCustoNome" data-title="Centro de Custo" scope="col" style=""><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Centro de Custo'>Centro de Custo</a></th><th class="k-header " col-ordem="2" data-field="OperacaoFinanceiraNome" data-title="Plano de Contas Financeiro" scope="col" style=""><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Plano de Contas Financeiro'>Plano de Contas Financeiro</a></th><th class="k-header " col-ordem="2" data-field="Natureza" data-title="Natureza" scope="col" style=""><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Natureza'>Natureza</a></th><th class="k-header " col-ordem="3" data-field="HistoricoContabilNome" data-title="Histórico" scope="col" style="min-width:50px;"><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Histórico'>Histórico</a></th><th class="k-header " col-ordem="4" data-field="Percentual" data-title="% Percentual" scope="col" style="text-align:right;padding-right:50px;"><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='% Percentual'>% Percentual</a></th><th class="k-header " col-ordem="5" data-field="Valor" data-title="Valor" scope="col" style="text-align:right;padding-right:50px;"><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Valor'>Valor</a></th><th class="k-header " col-ordem="999999" data-field="ExcluidoPeloUsuarioId" data-title="Usuário" scope="col" style="text-align:center;"><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Usuário'>Usuário</a></th></tr></table></div></div><div class="k-grid-content" style="height:200px"><table><colgroup><col style="width:100px" /><col style="width:120px" /><col style="width:180px" /><col style="width:220px" /><col style="width:140px" /><col /><col style="width:140px" /><col style="width:140px" /><col style="width:95px" /></colgroup><tbody><tr class="k-no-data"><td colspan="9"></td></tr></tbody></table></div><div class="k-pager-wrap k-grid-pager"><a class="k-pager-refresh k-link" href="/treinamento/Financeiro/LancamentoCentroCustosPesquisaGrid/788?campoFk=788" title="Atualizar"><span class="k-icon k-i-refresh">Atualizar</span></a><span class="k-pager-info k-label">N&#227;o existem registros para mostrar!</span></div></div><script>
	jQuery(function(){jQuery("#tblDetalheLancamentoCentroCusto").kendoGrid({"dataBound":tblDetalheLancamentoCentroCustoOnAjaxLoadComplete,"columns":[{"title":"Ações","attributes":{"style":"text-align:center;"},"menu":false,"width":"100px","template":"\u003cbutton class=\"btnListagemDetalheEditar847699 btn btn-editar-listagem botao-tabela-padrao btn btn-xs  \" data-placement=\"top\" data-url-acao=\"/treinamento/Financeiro/LancamentoCentroCustoEditar/#=Id#\" title=\"Editar\" type=\"button\"\u003e\u003cimg src=\"/Content/gestao/img/editar.png\" style=\"height:17px;\"\u003e\u003c/img\u003e\u003c/button\u003e \u003cbutton class=\"btnListagemDetalheExcluir463455 btn btn-excluir-listagem botao-tabela-padrao btn btn-xs  \" data-placement=\"top\" data-url-acao=\"/treinamento/Financeiro/LancamentoCentroCustoExcluir/#=Id#\" title=\"Excluir\" type=\"button\"\u003e\u003cimg src=\"/Content/gestao/img/excluir.png\" style=\"height:17px;\"\u003e\u003c/img\u003e\u003c/button\u003e \u003cbutton class=\"btnListagemDetalheRestaurar744955 btn btn-restaurar-listagem botao-tabela-padrao btn btn-xs  \" data-placement=\"top\" data-url-acao=\"/treinamento/Financeiro/RestaurarRegistro/#=Id#__U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdGAxW1tNOC5GbG9yZXN0YWwuVmlzdWFsLldlYi5Nb2RlbG9zLkZpbmFuY2Vpcm8uTGFuY2FtZW50b0NvbnRhYmlsaXphY2FvUmVjZWJlckNlbnRyb0N1c3RvTW9kZWxvLCBNOC5GbG9yZXN0YWwuVmlzdWFsLldlYiwgVmVyc2lvbj0xLjAuMC4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPW51bGxdXSwgbXNjb3JsaWIsIFZlcnNpb249NC4wLjAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iNzdhNWM1NjE5MzRlMDg5\" title=\"Restaurar Registro\" type=\"button\"\u003e\u003cimg src=\"/Content/gestao/img/restaurar-registro.svg\" style=\"height:17px;\"\u003e\u003c/img\u003e\u003c/button\u003e ","field":"AcaoBtn","groupable":false,"sortable":false,"filterable":false,"encoded":true},{"title":"Código","attributes":{"class":"","style":""},"footerAttributes":{"class":"","style":""},"menu":false,"width":"120px","field":"Id","filterable":{},"encoded":true},{"title":"Centro de Custo","attributes":{"class":"","style":""},"footerAttributes":{"class":"","style":""},"width":"180px","field":"CentroCustoNome","filterable":{},"encoded":true},{"title":"Plano de Contas Financeiro","attributes":{"class":"","style":""},"footerAttributes":{"class":"","style":""},"width":"220px","field":"OperacaoFinanceiraNome","filterable":{},"encoded":true},{"title":"Natureza","attributes":{"class":"","style":""},"footerAttributes":{"class":"","style":""},"width":"140px","field":"Natureza","filterable":{},"encoded":true,"values":[{"value":1,"text":"Credito"},{"value":-1,"text":"Debito"}]},{"title":"Histórico","attributes":{"class":"","style":""},"footerAttributes":{"class":"","style":""},"field":"HistoricoContabilNome","filterable":{},"encoded":true},{"title":"% Percentual","attributes":{"class":" ","style":"text-align:right;padding-right:50px;text-align:right;padding-right:50px;"},"footerAttributes":{"class":" ","style":"text-align:right;padding-right:50px;text-align:right;padding-right:50px;"},"width":"140px","template":"\u003ctext class=\u0027m8-numero\u0027 data-m8-formato=\u0027n2\u0027\u003e#=Percentual#\u003ctext/\u003e","field":"Percentual","filterable":{},"encoded":true},{"title":"Valor","attributes":{"class":" ","style":"text-align:right;padding-right:50px;text-align:right;padding-right:50px;"},"footerAttributes":{"class":" ","style":"text-align:right;padding-right:50px;text-align:right;padding-right:50px;"},"width":"140px","template":"\u003ctext class=\u0027m8-numero\u0027 data-m8-formato=\u0027n2\u0027\u003e#=Valor#\u003ctext/\u003e","field":"Valor","filterable":{},"encoded":true},{"title":"Usuário","attributes":{"class":"","style":"text-align:center;"},"footerAttributes":{"class":"","style":"text-align:center;"},"width":"95px","template":"\r\n                \u003ca class=\u0027#\r\n                    if (EstaExcluido) {\r\n                        if (ExcluidoPeloUsuarioId) {\r\n                            #m8-usuario-excluiu-id\u0027 data-m8-excluiu-id=\u0027#=ExcluidoPeloUsuarioId#\u0027\u003e#=ExcluidoPeloUsuarioId##\r\n                        } else {\r\n                            #m8-usuario-excluiu-id\u0027 data-m8-excluiu-id=\u0027#=AtualizadoPeloUsuarioId#\u0027\u003e#=AtualizadoPeloUsuarioId##\r\n                        }\r\n                    }\r\n                    else {\r\n                        #m8-usuario-atualizou-id\u0027 data-m8-atualizou-id=\u0027#=AtualizadoPeloUsuarioId#\u0027\u003e#=AtualizadoPeloUsuarioId##\r\n                    }\r\n                #\u003c/a\u003e","field":"ExcluidoPeloUsuarioId","filterable":{},"encoded":true}],"groupable":{"messages":{"empty":"Arraste um cabeçalho da coluna e solte-o aqui para agrupar!"}},"pageable":{"numeric":false,"previousNext":false,"refresh":true,"buttonCount":10,"messages":{"display":"{2} registros","empty":"Não existem registros para mostrar!","itemsPerPage":"Registros por Página","first":"ListagemTelerik.BotaoVoltarInicio","previous":"Anterior","next":"Próximo","last":"Último","refresh":"Atualizar","morePages":"Mais Páginas"}},"sortable":true,"filterable":{"messages":{"info":"Mostrar registro com valor:","isTrue":"Verdadeiro","isFalse":"Falso","filter":"Filtro","clear":"Limpar","and":"E","or":"Ou","selectValue":"Selecione o Valor:","cancel":"Cancelar"},"operators":{"string":{"eq":"Igual a","neq":"Diferente de","startswith":"Inicia com","endswith":"Termina com","contains":"Contém","doesnotcontain":"Não Contém"},"number":{"eq":"Igual a","neq":"Diferente de","gte":"É Maior ou Igual a","gt":"É Maior que","lte":"É Menor ou Igual a","lt":"É Menor que"},"date":{"eq":"Igual a","neq":"Diferente de","gte":"É Maior ou Igual a","gt":"É Maior que","lte":"É Menor ou Igual a","lt":"É Menor que"},"enums":{"eq":"Igual a","neq":"Diferente de"}}},"columnMenu":{"messages":{"filter":"Filtro","columns":"Colunas","sortAscending":"Ordem Ascendente","sortDescending":"Ordem Descendente","settings":"ListagemTelerik.Configuracoes","lock":"Bloquear","unlock":"Desbloquear"}},"resizable":true,"reorderable":true,"toolbar":{},"dataSource":{"type":(function(){if(kendo.data.transports['aspnetmvc-ajax']){return 'aspnetmvc-ajax';} else{throw new Error('The kendo.aspnetmvc.min.js script is not included.');}})(),"transport":{"read":{"url":"/treinamento/Financeiro/LancamentoCentroCustosPesquisaGrid?campoFk=788"},"prefix":""},"pageSize":1000000,"page":1,"total":0,"serverPaging":true,"serverSorting":true,"serverFiltering":true,"serverGrouping":true,"serverAggregates":true,"filter":[],"schema":{"data":"Data","total":"Total","errors":"Errors","model":{"fields":{"OperacaoFinanceiraId":{"type":"number","defaultValue":null},"LancamentoId":{"type":"number"},"CentroCustoId":{"type":"number"},"CentroCustoClassificacao":{"type":"string"},"CentroCustoNome":{"type":"string"},"OperacaoFinanceiraNome":{"type":"string"},"Natureza":{"type":"number"},"HistoricoContabilId":{"type":"number","defaultValue":null},"ContaContabilId":{"type":"number","defaultValue":null},"Data":{"type":"date"},"HistoricoContabilNome":{"type":"string"},"Percentual":{"type":"number"},"Valor":{"type":"number"},"Complemento":{"type":"string"},"EmEdicao":{"type":"boolean"},"ExibirRodape":{"type":"boolean"},"CompletarMargensLaterais":{"type":"boolean"},"TabelaBancoDados":{"type":"string"},"ModeloJson":{"type":"string"},"ModeloFormulario":{"type":"string"},"UsuarioEmEdicao":{"type":"string"},"DataCadastro":{"type":"date"},"AtualizadoPeloUsuarioId":{"type":"number"},"UsuarioCadastrouId":{"type":"number"},"ExcluidoPeloUsuarioId":{"type":"number","defaultValue":null},"Id":{"type":"number","defaultValue":null},"AcaoBtn":{"editable":false,"type":"number","defaultValue":null},"EstaExcluido":{"type":"boolean"},"UsuarioAtualizacao":{"type":"string"},"UsuarioCadastro":{"type":"string"},"UsuarioExcluiu":{"type":"string"},"DataAtualizacao":{"type":"date"},"PropriedadesPersonalizadas":{"type":"object"}}}}}});});
</script></div></div>
                </div>

                <div id="tab_contabilizacoes" class="tab-pane">
                    <br />
                    <script type="text/javascript">var tblContabilizacaoLancamentoExecutarDeletarRegistroListagemDetalhes = (e, button) => {

    $(".ajax-loading").dialog("open");

    RequisicaoAjax(
        button.attr("data-url-acao"),
        null,
        function (evento) {

            setTimeout(function () {

                $(".ajax-loading").dialog("close");

                if (evento.Sucesso) {

                    $("#tblContabilizacaoLancamento").data("kendoGrid").dataSource.read();
                    LimparFormulario("#frmContabilizacaoLancamento");

                    try { tblContabilizacaoLancamentoExcluirSucesso(evento); } catch (e) { }

                    try {
                                                
                        if (evento.Script)
                            eval(evento.Script);

                        var selectorGridString = "#tblContabilizacaoLancamento"

                        if (selectorGridString != "#tblDetalhePessoaAnexo")
                            document.getElementById($("#tblContabilizacaoLancamento").closest(".tab-pane").find(".portlet.light").first().attr("id")).scrollIntoView();

                    }
                    catch (c) { }

                }
                else
                    bootbox.alert("Não foi possível excluir o registro!<br />" + evento.Mensagem);

            }, 500);

        },
        function (evento) {

            setTimeout(function () {

                $(".ajax-loading").dialog("close");
                bootbox.alert("Não foi possível excluir o registro!<br />" + evento);

            }, 500);

        }
    );

}

var tblContabilizacaoLancamentoOnHideConfiCampos = () => {
    configurarHideConfiCampos("#frmContabilizacaoLancamento");
}

var tblContabilizacaoLancamentoDeletarRegistroListagemDetalhes = function (e, button) {

    try {

        tblContabilizacaoLancamentoIsDeletarRegistroListagemDetalhesValido(e, button, tblContabilizacaoLancamentoExecutarDeletarRegistroListagemDetalhes);

    } catch (c) {

        bootbox.dialog({
            message: "Excluir registro?",
            closeButton: false,
            buttons: {
                danger: {
                    label: "Cancelar",
                    className: "btn-danger",
                    callback: function () { }
                },
                success: {
                    label: "Confirmar",
                    className: "btn-success",
                    callback: function () { tblContabilizacaoLancamentoExecutarDeletarRegistroListagemDetalhes(e, button); }
                }
            }
        });

    }

}

var tblContabilizacaoLancamentoEditarRegistroListagemDetalhes = function (e, button) {

    $(".ajax-loading").dialog("open");
    var formSeletor = "#frmContabilizacaoLancamento";

    RequisicaoAjax(
        button.attr("data-url-acao"),
        null,
        function (evento) {

            setTimeout(function () {

                if (evento.Sucesso) {

                    $(".ajax-loading").dialog("close");
                    AbriPainel($(formSeletor));

                    setTimeout(function () {

                        $(formSeletor).closest(".tab-pane").find(".m8-formulario-rodape").remove();
                        $(formSeletor).parent().parent().empty().html(evento.View);

                        TabPorEnter(formSeletor);
                        MascararCampos(formSeletor);
                        FocusInicial(formSeletor);
                        ConfigurarCep();
                        carregaControleInputTexto();

                        try {

                            if (evento.Script)
                                eval(evento.Script);

                            document.getElementById($("#tblContabilizacaoLancamento").closest(".tab-pane").find(".portlet.light").first().attr("id")).scrollIntoView();

                        }
                        catch (e) { }

                        tblContabilizacaoLancamentoOnHideConfiCampos();

                        try {
                            tblContabilizacaoLancamentoAjaxEditarSucesso(evento);
                        }
                        catch (e) { }

                    }, 500);

                }
                else
                    bootbox.alert("Não foi possível editar o registro!<br />" + evento.Mensagem);

            }, 500);

        },
        function (evento) {

            setTimeout(function () {

                $(".ajax-loading").dialog("close");
                bootbox.alert("Não foi possível editar o registro!<br />" + evento);

            }, 500);

        }
    );

}

var tblContabilizacaoLancamentoOnAjaxLoadComplete = function (e) {

    $("table[role='grid'] tbody tr td a").tooltip();

    tblContabilizacaoLancamentoConfigurarEventos();

    setTimeout(() => {
                
        setGridTelerikLink();

    }, 1500);

}

var tblContabilizacaoLancamentoConfigurarEventos = function () {

    var BTN_EDITAR = $("#tblContabilizacaoLancamento [class^='btnListagemDetalheEditar']");
    var BTN_EXCLUIR = $("#tblContabilizacaoLancamento [class^='btnListagemDetalheExcluir']");

    BTN_EXCLUIR.off('click').on("click", function (e) {

        e.preventDefault();
        e.stopPropagation();

        tblContabilizacaoLancamentoDeletarRegistroListagemDetalhes(e, $(this));

    });

    BTN_EDITAR.off('click').on("click", function (e) {

        e.preventDefault();
        e.stopPropagation();

        tblContabilizacaoLancamentoEditarRegistroListagemDetalhes(e, $(this));

    });

    setTimeout(function () {

        FormatarColunaCep("#tblContabilizacaoLancamento .m8-cep");
        FormatarColunaTelefone("#tblContabilizacaoLancamento .m8-telefone");
        FormatarColunaCpfCnpj("#tblContabilizacaoLancamento .m8-cnpj_cpf");
        FormatarColunaNumero("#tblContabilizacaoLancamento .m8-numero");
        FormatarColunaDataHora("#tblContabilizacaoLancamento .m8-formato-data-hora");
        FormatarColunaData("#tblContabilizacaoLancamento .m8-formato-data");
        
        if (typeof FormatarColunaTemplate === "function")
            FormatarColunaTemplate();

    }, 500);

}

var tblContabilizacaoLancamentoCarregarConfiguracaoGridDetalhes = function (gridId) {

    CarregarConfiguracaoGridDetalhes(gridId, '/treinamento/Home/CarregarGrid');

}

var tblContabilizacaoLancamentoSalvarConfiguracaoGridDetalhes = function (gridId) {

    SalvarConfiguracaoGridDetalhes(gridId, '/treinamento/Home/SalvarGrid');

}

var tblContabilizacaoLancamentoRemoverConfiguracaoGridDetalhes = function (gridId) {

    RemoverConfiguracaoGridDetalhes(gridId, '/treinamento/Home/RemoverGrid');

}

$("document").ready(function () {

    $("div[data-role='popup'].k-list-container.k-popup.k-group.k-reset").remove();

    setTimeout(function () {


        try {
            GridAjusteDataBound("#tblContabilizacaoLancamento");
        } catch (e) { }
        
        $("#tblContabilizacaoLancamento").data("kendoGrid").thead.kendoTooltip({
            filter: "th",
            content: function (e) {

                var target = e.target;
                var tip = $(target).find('a.k-link').data("m8-tooltip");

                return tip ? tip : $(target).text();

            }
        });

        var componente = $("#tblContabilizacaoLancamento").closest(".tab-pane").children().find(".detalhes_tools");
        var adicionarBotaoSalvar = componente.length > 0;

        if (adicionarBotaoSalvar) {

            if (componente.parent().find('a[title="Salvar Configurações"]').html() == undefined)
                componente.after('' +
                    '<div class="tools m8-no-padding">' +
                    '   <a class="botao-barra-pesquisa btn btn-default" onclick="tblContabilizacaoLancamentoSalvarConfiguracaoGridDetalhes(\'tblContabilizacaoLancamento\')" title="Salvar Configurações">' +
                    '       <i class="tblContabilizacaoLancamentobntConfiguracaoPreferencia fa fa-save fa-pesquisa-cinza"></i>' +
                    '   </a>' +
                    '</div>');

            if (componente.parent().find('a[title="Remover Configurações"]').html() == undefined)
                componente.after('' +
                    '<div class="tools m8-no-padding">' +
                    '   <a class="botao-barra-pesquisa btn btn-default" onclick="tblContabilizacaoLancamentoRemoverConfiguracaoGridDetalhes(\'tblContabilizacaoLancamento\')" title="Remover Configurações">' +
                    '       <i class="fa fa-trash fa-pesquisa-cinza"></i>' +
                    '   </a>' +
                    '</div>');

        }

        if (true)
            tblContabilizacaoLancamentoCarregarConfiguracaoGridDetalhes('tblContabilizacaoLancamento');

    }, 500);

});

try {

    const PERMITE_REDIMENCIONAR = false;
    const AJUSTE_REDIMENCIONAR = 0;

    var gtblContabilizacaoLancamento;

    class LDTtblContabilizacaoLancamento {

        constructor() {
            
            this.inResize = false;
            this.gridId = 'tblContabilizacaoLancamento';

            setTimeout(() => {
                
                //Load content here, with separated functions
                this._setResizable();

            }, 500);

        }

        _setResizable() {
            
            if (PERMITE_REDIMENCIONAR) {

                let portletBody = $(`#${this.gridId}`).parent('div.portlet-body');

                if (portletBody) {

                    portletBody.css('min-height', '370px');
                    portletBody.css('resize', 'vertical');
                    portletBody.css('overflow', 'auto');
                    portletBody.attr('grid-id', this.gridId);

                    Grid.setDataBound(this.gridId, () => this._onResizePortletBody(this, AJUSTE_REDIMENCIONAR));
                    new ResizeObserver(() => this._onResizePortletBody(this, AJUSTE_REDIMENCIONAR)).observe(portletBody[0]);

                }

            }

        }

        _onResizePortletBody(self, ajusteRedimencionar) {
            
            if (!self.inResize) {

                self.inResize = true;

                setTimeout(() => {

                    self.inResize = false;
                    Grid.setHeight(self.gridId, `div.portlet-body[grid-id="${self.gridId}"]`, (-100) + (ajusteRedimencionar ?? 0));

                }, 1500);

            }

        }

    }

    $(() => gtblContabilizacaoLancamento = new LDTtblContabilizacaoLancamento());

} catch (e) { }</script><div class="k-widget k-grid " detalhes="False" id="tblContabilizacaoLancamento" style="height:349px;"><div class="k-toolbar k-grid-toolbar k-grid-top"><div><div></div></div></div><div class="k-grouping-header">Arraste um cabeçalho da coluna e solte-o aqui para agrupar!</div><div class="k-grid-header"><div class="k-grid-header-wrap"><table><colgroup><col style="width:140px" /><col style="width:120px" /><col style="width:120px" /><col style="width:100px" /><col style="width:150px" /><col style="width:130px" /><col style="width:220px" /><col /><col style="width:180px" /><col style="width:95px" /></colgroup><tr><th class="k-header" data-field="AcaoBtn" data-groupable="false" data-title="Ações" scope="col" style="text-align:center;"><span class="k-link">Ações</span></th><th class="k-header " col-ordem="-1" data-field="Id" data-title="Código" scope="col" style=""><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Código identificador único'>Código</a></th><th class="k-header " col-ordem="1" data-field="Transacao" data-title="Transação" scope="col" style=""><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Transação'>Transação</a></th><th class="k-header " col-ordem="2" data-field="Natureza" data-title="Natureza" scope="col" style=""><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Natureza'>Natureza</a></th><th class="k-header " col-ordem="2" data-field="OrigemContabilizacaoTexto" data-title="Origem" scope="col" style=""><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Origem'>Origem</a></th><th class="k-header tipo-coluna-datahora" col-ordem="4" data-field="Data" data-title="Data" scope="col" style="text-align:center;"><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Data'>Data</a></th><th class="k-header " col-ordem="4" data-field="ContaContabilNome" data-title="Conta Contábil" scope="col" style=""><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Conta Contábil'>Conta Contábil</a></th><th class="k-header " col-ordem="5" data-field="Complemento" data-title="Histórico" scope="col" style="min-width:50px;"><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Histórico'>Histórico</a></th><th class="k-header " col-ordem="9" data-field="Valor" data-title="Valor" scope="col" style="text-align:right;padding-right:50px;"><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Valor'>Valor</a></th><th class="k-header " col-ordem="999999" data-field="ExcluidoPeloUsuarioId" data-title="Usuário" scope="col" style="text-align:center;"><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Usuário'>Usuário</a></th></tr></table></div></div><div class="k-grid-content" style="height:200px"><table><colgroup><col style="width:140px" /><col style="width:120px" /><col style="width:120px" /><col style="width:100px" /><col style="width:150px" /><col style="width:130px" /><col style="width:220px" /><col /><col style="width:180px" /><col style="width:95px" /></colgroup><tbody><tr class="k-no-data"><td colspan="10"></td></tr></tbody></table></div><div class="k-pager-wrap k-grid-pager"><a class="k-pager-refresh k-link" href="/treinamento/Contabil/ContabilizacaoLancamentosCaixaEntradaPesquisaGrid/788?campoFk=788" title="Atualizar"><span class="k-icon k-i-refresh">Atualizar</span></a><span class="k-pager-info k-label">N&#227;o existem registros para mostrar!</span></div></div><script>
	jQuery(function(){jQuery("#tblContabilizacaoLancamento").kendoGrid({"dataBound":tblContabilizacaoLancamentoOnAjaxLoadComplete,"columns":[{"title":"Ações","attributes":{"style":"text-align:center;"},"menu":false,"width":"140px","template":"\u003ca class=\"btn  m8-botao-coluna btn btn-xs \" data-placement=\"top\" data-toggle=\"tooltip\" href=\"javascript:;\" onclick=\"ClickCentroCustoContabilizacao(\u0027#=Id#\u0027, this);return false;\" title=\"Adicionar centro de custos\"\u003e\u003cimg src=\"/Content/gestao/img/adicionar-centro-de-custos.png\" style=\"height:17px;\"\u003e\u003c/img\u003e\u003c/a\u003e \u003cbutton class=\"btnListagemDetalheRestaurar613289 btn btn-restaurar-listagem botao-tabela-padrao btn btn-xs  \" data-placement=\"top\" data-url-acao=\"/#=Id#__U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdGAxW1tNOC5GbG9yZXN0YWwuVmlzdWFsLldlYi5Nb2RlbG9zLkNvbnRhYmlsLkNvbnRhYmlsQ29udGFiaWxpemFjYW9MYW5jYW1lbnRvQ2FpeGFFbnRyYWRhTW9kZWxvLCBNOC5GbG9yZXN0YWwuVmlzdWFsLldlYiwgVmVyc2lvbj0xLjAuMC4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPW51bGxdXSwgbXNjb3JsaWIsIFZlcnNpb249NC4wLjAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iNzdhNWM1NjE5MzRlMDg5\" title=\"Restaurar Registro\" type=\"button\"\u003e\u003cimg src=\"/Content/gestao/img/restaurar-registro.svg\" style=\"height:17px;\"\u003e\u003c/img\u003e\u003c/button\u003e ","field":"AcaoBtn","groupable":false,"sortable":false,"filterable":false,"encoded":true},{"title":"Código","attributes":{"class":"","style":""},"footerAttributes":{"class":"","style":""},"menu":false,"width":"120px","field":"Id","filterable":{},"encoded":true},{"title":"Transação","attributes":{"class":"","style":""},"footerAttributes":{"class":"","style":""},"width":"120px","field":"Transacao","filterable":{},"encoded":true},{"title":"Natureza","attributes":{"class":"","style":""},"footerAttributes":{"class":"","style":""},"width":"100px","field":"Natureza","filterable":{},"encoded":true,"values":[{"value":1,"text":"Credito"},{"value":-1,"text":"Debito"}]},{"title":"Origem","attributes":{"class":"","style":""},"footerAttributes":{"class":"","style":""},"width":"150px","template":"\u003cspan class=\u0027m8-origem-contabilizacao\u0027 data-m8-origem-contabilizacao=\u0027#=OrigemContabilizacao#\u0027\u003e\u003c/span\u003e","field":"OrigemContabilizacaoTexto","filterable":{},"encoded":true},{"title":"Data","attributes":{"class":"tipo-coluna-datahora","style":"text-align:center;text-align:center;"},"footerAttributes":{"class":"tipo-coluna-datahora","style":"text-align:center;text-align:center;"},"width":"130px","field":"Data","format":"{0:dd/MM/yyyy}","filterable":{},"encoded":true},{"title":"Conta Contábil","attributes":{"class":"","style":""},"footerAttributes":{"class":"","style":""},"width":"220px","field":"ContaContabilNome","filterable":{},"encoded":true},{"title":"Histórico","attributes":{"class":"","style":""},"footerAttributes":{"class":"","style":""},"field":"Complemento","filterable":{},"encoded":true},{"title":"Valor","attributes":{"class":" ","style":"text-align:right;padding-right:50px;text-align:right;padding-right:50px;"},"footerAttributes":{"class":" ","style":"text-align:right;padding-right:50px;text-align:right;padding-right:50px;"},"width":"180px","template":"\u003ctext class=\u0027m8-numero\u0027 data-m8-formato=\u0027n2\u0027\u003e#=Valor#\u003ctext/\u003e","field":"Valor","filterable":{},"encoded":true},{"title":"Usuário","attributes":{"class":"","style":"text-align:center;"},"footerAttributes":{"class":"","style":"text-align:center;"},"width":"95px","template":"\r\n                \u003ca class=\u0027#\r\n                    if (EstaExcluido) {\r\n                        if (ExcluidoPeloUsuarioId) {\r\n                            #m8-usuario-excluiu-id\u0027 data-m8-excluiu-id=\u0027#=ExcluidoPeloUsuarioId#\u0027\u003e#=ExcluidoPeloUsuarioId##\r\n                        } else {\r\n                            #m8-usuario-excluiu-id\u0027 data-m8-excluiu-id=\u0027#=AtualizadoPeloUsuarioId#\u0027\u003e#=AtualizadoPeloUsuarioId##\r\n                        }\r\n                    }\r\n                    else {\r\n                        #m8-usuario-atualizou-id\u0027 data-m8-atualizou-id=\u0027#=AtualizadoPeloUsuarioId#\u0027\u003e#=AtualizadoPeloUsuarioId##\r\n                    }\r\n                #\u003c/a\u003e","field":"ExcluidoPeloUsuarioId","filterable":{},"encoded":true}],"groupable":{"messages":{"empty":"Arraste um cabeçalho da coluna e solte-o aqui para agrupar!"}},"pageable":{"numeric":false,"previousNext":false,"refresh":true,"buttonCount":10,"messages":{"display":"{2} registros","empty":"Não existem registros para mostrar!","itemsPerPage":"Registros por Página","first":"ListagemTelerik.BotaoVoltarInicio","previous":"Anterior","next":"Próximo","last":"Último","refresh":"Atualizar","morePages":"Mais Páginas"}},"sortable":true,"filterable":{"messages":{"info":"Mostrar registro com valor:","isTrue":"Verdadeiro","isFalse":"Falso","filter":"Filtro","clear":"Limpar","and":"E","or":"Ou","selectValue":"Selecione o Valor:","cancel":"Cancelar"},"operators":{"string":{"eq":"Igual a","neq":"Diferente de","startswith":"Inicia com","endswith":"Termina com","contains":"Contém","doesnotcontain":"Não Contém"},"number":{"eq":"Igual a","neq":"Diferente de","gte":"É Maior ou Igual a","gt":"É Maior que","lte":"É Menor ou Igual a","lt":"É Menor que"},"date":{"eq":"Igual a","neq":"Diferente de","gte":"É Maior ou Igual a","gt":"É Maior que","lte":"É Menor ou Igual a","lt":"É Menor que"},"enums":{"eq":"Igual a","neq":"Diferente de"}}},"columnMenu":{"messages":{"filter":"Filtro","columns":"Colunas","sortAscending":"Ordem Ascendente","sortDescending":"Ordem Descendente","settings":"ListagemTelerik.Configuracoes","lock":"Bloquear","unlock":"Desbloquear"}},"resizable":true,"reorderable":true,"toolbar":{},"dataSource":{"type":(function(){if(kendo.data.transports['aspnetmvc-ajax']){return 'aspnetmvc-ajax';} else{throw new Error('The kendo.aspnetmvc.min.js script is not included.');}})(),"transport":{"read":{"url":"/treinamento/Contabil/ContabilizacaoLancamentosCaixaEntradaPesquisaGrid?campoFk=788"},"prefix":""},"pageSize":1000000,"page":1,"total":0,"serverPaging":true,"serverSorting":true,"serverFiltering":true,"serverGrouping":true,"serverAggregates":true,"filter":[],"schema":{"data":"Data","total":"Total","errors":"Errors","model":{"fields":{"IdRelacionado":{"type":"number"},"LancamentoFKId":{"type":"number"},"DocumentoFiscalId":{"type":"number","defaultValue":null},"LancamentoId":{"type":"number","defaultValue":null},"TituloId":{"type":"number","defaultValue":null},"TituloParcelaBaixaId":{"type":"number","defaultValue":null},"RequisicaoId":{"type":"number","defaultValue":null},"EstornoMaterialId":{"type":"number","defaultValue":null},"RequisicaoOrdemProducaoId":{"type":"number","defaultValue":null},"OutrosDocumentosId":{"type":"number","defaultValue":null},"ImplantacaoId":{"type":"number","defaultValue":null},"MovimentacaoLoteId":{"type":"number","defaultValue":null},"ChequeMovimentacaoId":{"type":"number","defaultValue":null},"Transacao":{"type":"number"},"Natureza":{"type":"number"},"OrigemContabilizacao":{"type":"number"},"OrigemContabilizacaoTexto":{"type":"string"},"EstabelecimentoId":{"type":"number"},"EmpresaNome":{"type":"string"},"Data":{"type":"date"},"ContaContabilId":{"type":"number"},"ContaContabilNome":{"type":"string"},"HistoricoId":{"type":"number"},"HistoricoNome":{"type":"string"},"Complemento":{"type":"string"},"Valor":{"type":"number"},"InformarCentroCusto":{"type":"number"},"EhBaixa":{"type":"boolean"},"ChequeId":{"type":"number","defaultValue":null},"ContratoFinanceiroId":{"type":"number","defaultValue":null},"ContratoFinanceiroMovimentacaoId":{"type":"number","defaultValue":null},"EmEdicao":{"type":"boolean"},"ExibirRodape":{"type":"boolean"},"CompletarMargensLaterais":{"type":"boolean"},"TabelaBancoDados":{"type":"string"},"ModeloJson":{"type":"string"},"ModeloFormulario":{"type":"string"},"UsuarioEmEdicao":{"type":"string"},"DataCadastro":{"type":"date"},"AtualizadoPeloUsuarioId":{"type":"number"},"UsuarioCadastrouId":{"type":"number"},"ExcluidoPeloUsuarioId":{"type":"number","defaultValue":null},"Id":{"type":"number","defaultValue":null},"AcaoBtn":{"editable":false,"type":"number","defaultValue":null},"EstaExcluido":{"type":"boolean"},"UsuarioAtualizacao":{"type":"string"},"UsuarioCadastro":{"type":"string"},"UsuarioExcluiu":{"type":"string"},"DataAtualizacao":{"type":"date"},"PropriedadesPersonalizadas":{"type":"object"}}}}},"detailTemplate":kendo.template(jQuery('#tblContabilizacaoCentroCusto').html())});});
</script>
                    <script id="tblContabilizacaoCentroCusto" type="text/kendo-tmpl">
                        <div class="k-widget k-grid" id="grid_#=Id#"><div class="k-toolbar k-grid-toolbar k-grid-top"><h7 style="font-weight:bold"></h7></div><table><colgroup><col style="width:300px" /><col style="width:110px" /><col /><col style="width:180px" /></colgroup><thead class="k-grid-header"><tr><th class="k-header" data-field="CentroCustoNome" data-title="Centro de Custo" scope="col"><a class="k-link" href="/treinamento/Contabil/ContabilizacaoLancamentoCentroCustosPesquisaGrid/788?campoFk=%23%3DId%23&grid_%23%3DId%23-sort=CentroCustoNome-asc">Centro de Custo</a></th><th class="k-header" data-field="Natureza" data-title="Natureza" scope="col"><a class="k-link" href="/treinamento/Contabil/ContabilizacaoLancamentoCentroCustosPesquisaGrid/788?campoFk=%23%3DId%23&grid_%23%3DId%23-sort=Natureza-asc">Natureza</a></th><th class="k-header" data-field="Complemento" data-title="Histórico" scope="col"><a class="k-link" href="/treinamento/Contabil/ContabilizacaoLancamentoCentroCustosPesquisaGrid/788?campoFk=%23%3DId%23&grid_%23%3DId%23-sort=Complemento-asc">Histórico</a></th><th class="k-header" data-field="Valor" data-title="Valor" scope="col" style="text-align: right;"><a class="k-link" href="/treinamento/Contabil/ContabilizacaoLancamentoCentroCustosPesquisaGrid/788?campoFk=%23%3DId%23&grid_%23%3DId%23-sort=Valor-asc">Valor</a></th></tr></thead><tbody><tr class="k-no-data"><td colspan="4"></td></tr></tbody></table></div><script>
	jQuery(function(){jQuery("\#grid_#=Id#").kendoGrid({"columns":[{"title":"Centro de Custo","width":"300px","field":"CentroCustoNome","filterable":{},"encoded":true},{"title":"Natureza","width":"110px","field":"Natureza","filterable":{},"encoded":true,"values":[{"value":1,"text":"Credito"},{"value":-1,"text":"Debito"}]},{"title":"Histórico","field":"Complemento","filterable":{},"encoded":true},{"title":"Valor","attributes":{"style":"text-align: right;"},"width":"180px","field":"Valor","format":"{0:n}","filterable":{},"encoded":true}],"sortable":true,"scrollable":false,"toolbar":{},"dataSource":{"type":(function(){if(kendo.data.transports['aspnetmvc-ajax']){return 'aspnetmvc-ajax';} else{throw new Error('The kendo.aspnetmvc.min.js script is not included.');}})(),"transport":{"read":{"url":"/treinamento/Contabil/ContabilizacaoLancamentoCentroCustosPesquisaGrid?campoFk=#=Id#"},"prefix":""},"pageSize":10,"page":1,"total":0,"serverPaging":true,"serverSorting":true,"serverFiltering":true,"serverGrouping":true,"serverAggregates":true,"filter":[],"schema":{"data":"Data","total":"Total","errors":"Errors","model":{"fields":{"ContabilizacaoId":{"type":"number"},"Id":{"type":"number","defaultValue":null},"Natureza":{"type":"number"},"Data":{"type":"date"},"ContaContabilId":{"type":"number","defaultValue":null},"ContaContabilNome":{"type":"string"},"HistoricoId":{"type":"number","defaultValue":null},"HistoricoNome":{"type":"string"},"CentroCustoId":{"type":"number","defaultValue":null},"CentroCustoNome":{"type":"string"},"Complemento":{"type":"string"},"Valor":{"type":"number"},"EmEdicao":{"type":"boolean"},"ExibirRodape":{"type":"boolean"},"CompletarMargensLaterais":{"type":"boolean"},"TabelaBancoDados":{"type":"string"},"ModeloJson":{"type":"string"},"ModeloFormulario":{"type":"string"},"UsuarioEmEdicao":{"type":"string"},"DataCadastro":{"type":"date"},"AtualizadoPeloUsuarioId":{"type":"number"},"UsuarioCadastrouId":{"type":"number"},"ExcluidoPeloUsuarioId":{"type":"number","defaultValue":null},"AcaoBtn":{"editable":false,"type":"number","defaultValue":null},"EstaExcluido":{"type":"boolean"},"UsuarioAtualizacao":{"type":"string"},"UsuarioCadastro":{"type":"string"},"UsuarioExcluiu":{"type":"string"},"DataAtualizacao":{"type":"date"},"PropriedadesPersonalizadas":{"type":"object"}}}}}});});
<\/script>
                    </script>
                    <style>
                        .k-detail-cell .k-tabstrip .k-content {
                            padding: 0.2em;
                        }

                        .k-detail-cell table[role='grid'] {
                            border-color: #dcd7d7;
                            border-style: solid;
                            border-width: 0.1em;
                        }
                    </style>

                    <div id="m8-manual-footer" class="k-grid-footer hide" tabindex="-1" style="padding-right: 17px;">
                        <div class="k-grid-footer-wrap">
                            <table>
                                <colgroup>
                                    <col class="k-hierarchy-col">
                                    <col style="width:100px">
                                    <col>
                                    <col style="width:80px">
                                    <col>
                                    <col>
                                    <col style="width:100px">
                                    <col style="width:150px">
                                </colgroup>
                                <tbody>
                                    <tr class="k-footer-template">
                                        <td class="k-hierarchy-cell">&nbsp;</td>
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                        <td colspan="2" style="text-align: right; padding-right: 5px;">
                                            <div>
                                                <span class="label-sm bold">Total Créditos: </span>
                                                <span class="label-sm" id="totalCredito">R$ 0,00</span>

                                            </div>
                                            <div>
                                                <span class="label-sm bold right">Total Débitos: </span>
                                                <span class="label-sm right" id="totalDebito">R$ 0,00</span>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="tab_anexos" class="tab-pane">
                    <br />
                    <div class="portlet light  " data-m8-detalhes="true" id="pnlLancamentoAnexoAdicionar"><div class="portlet-title m8-portlet-title-detail  "><div class="caption m8-no-padding">
<span class="caption-subject font-grey-salsa bold uppercase"><i class=" fa-edit fa"></i> Adicionar Anexo</span></div><div class="tools m8-no-padding">
<a class="expand" href="javascript:;" id="frmLancamentoAnexoCollapseExpand"> </a></div><div class="actions m8-no-padding  "><a class="btn btn-circle btn-default frmLancamentoAnexoReset " href="javascript:;"><i class=" fa-plus fa"></i> Novo</a></div></div><div class="portlet-body portlet-collapsed  "><div class="m8-form-content  "><form action="/treinamento/Financeiro/LancamentoAnexoFormulario" class="form-horizontal validar-obrigatorios " data-ajax-load="#ajaxLoadLancamentoAnexos" enctype="multipart/form-data" id="frmLancamentoAnexo" method="post" model-name="M8.Florestal.Visual.Web.Modelos.Financeiro.LancamentoAnexoModelo" role="form" view-name="~/Views/Financeiro/LancamentoAnexoFormulario.cshtml"><div class=" form-body "><div class="row"><div class="col-md-3"><div class="form-group  "><label class="control-label col-md-8 "><span class="font-dark bold text-default ">Código</span></label><div class="col-lg-4 col-md-4  "><input class=" form-control " data-val="true" id="Id" name="Id" placeholder="Código identificador único" readonly="readonly" style="min-width: 100px !important;" type="text"></input><span class="field-validation-valid text-danger" data-valmsg-for="Id" data-valmsg-replace="true"></span></div></div></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">ModeloBase.ModeloJson.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-val="true" hidden="hidden" id="ModeloJson" name="ModeloJson" placeholder="ModeloBase.ModeloJson.Descricao" tabindex="-1" type="hidden"></input><span class="field-validation-valid text-danger" data-valmsg-for="ModeloJson" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">ModeloBase.ModeloFormulario.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-val="true" hidden="hidden" id="ModeloFormulario" name="ModeloFormulario" placeholder="ModeloBase.ModeloFormulario.Descricao" tabindex="-1" type="hidden"></input><span class="field-validation-valid text-danger" data-valmsg-for="ModeloFormulario" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">LancamentoAnexoModelo.PessoaId.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-m8-valorInicial="0" data-val="true" hidden="hidden" id="PessoaId" name="PessoaId" placeholder="LancamentoAnexoModelo.PessoaId.Descricao" tabindex="-1" type="hidden" value="0"></input><span class="field-validation-valid text-danger" data-valmsg-for="PessoaId" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">LancamentoAnexoModelo.UrlQrcodeAnexo.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-m8-valorInicial="http://app.erpm8.cloud/treinamento/Financeiro/LancamentoFotoQRCodeFormulario//cGVzc29hPTg4NjA4MCZsYW5jYW1lbnRvPTc4OCZlbXByZXNhPTI=FotoQrCodeLancamento" data-val="true" hidden="hidden" id="UrlQrcodeAnexo" name="UrlQrcodeAnexo" placeholder="LancamentoAnexoModelo.UrlQrcodeAnexo.Descricao" tabindex="-1" type="hidden" value="http://app.erpm8.cloud/treinamento/Financeiro/LancamentoFotoQRCodeFormulario//cGVzc29hPTg4NjA4MCZsYW5jYW1lbnRvPTc4OCZlbXByZXNhPTI=FotoQrCodeLancamento"></input><span class="field-validation-valid text-danger" data-valmsg-for="UrlQrcodeAnexo" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">LancamentoAnexoModelo.LancamentoId.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-m8-valorInicial="788" data-val="true" hidden="hidden" id="LancamentoId" name="LancamentoId" placeholder="LancamentoAnexoModelo.LancamentoId.Descricao" tabindex="-1" type="hidden" value="788"></input><span class="field-validation-valid text-danger" data-valmsg-for="LancamentoId" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">LancamentoAnexoModelo.ArquivoDigitalId.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-m8-valorInicial="0" data-val="true" hidden="hidden" id="ArquivoDigitalId" name="ArquivoDigitalId" placeholder="LancamentoAnexoModelo.ArquivoDigitalId.Descricao" tabindex="-1" type="hidden" value="0"></input><span class="field-validation-valid text-danger" data-valmsg-for="ArquivoDigitalId" data-valmsg-replace="true"></span></div></div><div class="display-none form-group  "><label class="control-label col-md-2 ">ModeloBase.TabelaBancoDados.Titulo</label><div class="col-lg-10 col-md-10  "><input class=" form-control " data-val="true" hidden="hidden" id="TabelaBancoDados" name="TabelaBancoDados" placeholder="ModeloBase.TabelaBancoDados.Descricao" tabindex="-1" type="hidden"></input><span class="field-validation-valid text-danger" data-valmsg-for="TabelaBancoDados" data-valmsg-replace="true"></span></div></div><div class="form-group  "><label class="control-label col-md-2 "><span class="font-dark bold text-default ">Descrição</span></label><div class="col-lg-6 col-md-6  "><input class="foco-inicial form-control " data-val="true" id="Descricao" maxlength="100" name="Descricao" placeholder="Descrição" type="text"></input><span class="field-validation-valid text-danger" data-valmsg-for="Descricao" data-valmsg-replace="true"></span></div></div></div><div class=" form-actions right m8-form "><a class="btn btn-submit-formulario tooltips frmLancamentoAnexoSubmit hide "><img src="/Content/gestao/img/salvar.png" style="height:27px;"></img><label class=" m8-label-botoes-formulario ">Salvar</label></a><a class="btn btn-submit-formulario tooltips frmLancamentoAnexoSubmitClose hide " data-pos-submit="fechar" href="/treinamento/Financeiro/LancamentoAnexos"><img src="/Content/gestao/img/salvar-fechar.png" style="height:27px;"></img><label class=" m8-label-botoes-formulario ">Salvar e fechar</label></a><a class="btn btn-submit-formulario tooltips frmLancamentoAnexoSubmitNew hide " data-pos-submit="novo" href="/treinamento/Financeiro/LancamentoAnexos"><img src="/Content/gestao/img/salvar-novo.png" style="height:27px;"></img><label class=" m8-label-botoes-formulario ">Salvar e novo</label></a><a class="btn btn-log tooltips header-action-button frmLancamentoAnexoLog hide " data-placement="bottom" onclick="ModalLog(&#39;frmLancamentoAnexo&#39;, &#39;LancamentoAnexo&#39;, &#39;&#39;, &#39;/treinamento/Cadastro/LogOperacoes&#39;)" title="Visualizar logs"><img src="/Content/gestao/img/visualizar-logs.svg" style="height:16px;"></img></a><a class="btn btn-permissoes-acessos tooltips header-action-button frmLancamentoAnexoPermissoesAcessos hide " data-placement="bottom" onclick="ModalPermissoesAcessos(&#39;/treinamento/Sistema/PermissoesAcessos&#39;, &#39;treinamento&#39;)" title="Usuários/Grupos Com Acesso"><img src="/Content/gestao/img/visualizar-permissoes.svg" style="height:16px;"></img></a><a class="btn btn-tabela-db tooltips header-action-button frmLancamentoAnexoTabelaDB hide " data-placement="bottom" onclick="MensagemNomeTabela(&#39;frmLancamentoAnexo&#39;, &#39;LancamentoAnexo&#39;, &#39;&#39;, &#39;/treinamento/Sistema/ObterNomeTabela&#39;)" title="Tabela Banco Dados"><img src="/Content/gestao/img/visualizar-tabela.svg" style="height:16px;"></img></a><a class="btn btn-config-campos tooltips header-action-button frmLancamentoAnexoConfigCampos hide " data-placement="bottom" onclick="ModalConfigCampos(&#39;frmLancamentoAnexo&#39;, &#39;/treinamento/Sistema/ConfigCamposModal&#39;, &#39;/treinamento/Sistema/SaveConfigCampos&#39;, &#39;/treinamento/Sistema/ListarCamposOcultos&#39;)" title="Configurar Campos"><img src="/Content/gestao/img/configurar-campos.svg" style="height:16px;"></img></a></div></form><script type="text/javascript">var isFirefox = false
var _timeoutfrmLancamentoAnexo = 0;

var ExecutaAcaoAposSubmit = function (evento, acaoAposSubmit, seletorModal, modalContainer, urlRetorno) {

    if (acaoAposSubmit != "novo" && urlRetorno != undefined && urlRetorno != "_blank;") {

        if (modalContainer.length == 0 && window.frameElement !== null) {

            var m8hash = window.frameElement.id;

            setTimeout(function () {

                var w = window.frameElement.contentWindow.window.parent;
                var tab = $(window.frameElement.parentElement);

                if (w.FecharAba)
                    w.FecharAba(tab, m8hash);

            }, 500);

        } else
            setTimeout(function () { modalContainer.modal("hide"); }, 500);

    } else if (evento.Novo && modalContainer.length == 0)
        setTimeout(() => window.location.href = prepareUrl(window.location.href, evento.Modelo.Id), 500);

    if (acaoAposSubmit == "novo")
        NovoRegistro();

}

var NovoRegistro = function () {

    var url = window.location.href;

    if (url.match(/\/?-?\d+\.?\d*$/)) {

        var indice = url.lastIndexOf("/");

        if (indice != -1)
            url = url.substr(0, indice);

    }

    setTimeout(function () { window.location.href = url }, 500);

}

var AlterarUrl = function (parametro, remover) {

    setTimeout(function () {

        if (remover) {

            var url = window.location.href.split('?' + parametro)[0];
            history.pushState('', '', url);

        } else
            window.location.href = window.location.href + '?' + parametro;

    }, 300);
}

var RecarregarUrl = function (id, idRemover) {

    window.location.href = prepareUrl(window.location.href, id, idRemover).replace("#", "");

}

var RespostaPadraoSucessoFormulario = function (evento) {
    setTimeout(function () { window.location.href = prepareUrl(window.location.href, evento.Modelo.Id) }, 500);
}

var prepareUrl = (url, id, idRemover) => {

    if (url.includes("?")) {
        var urls = url.split("?");
        if (!urls[0].endsWith("/"))
            url = urls[0] + "/"
        url += id + "?" + urls[1];
    }
    else {
        if (!url.endsWith("/"))
            url += "/";
        url += id;
    }

    if (idRemover != undefined && idRemover != null && idRemover != "")
        url = url.replace(idRemover, "")

    return url;

}

$("document").ready(function () {

    try { isFirefox = typeof InstallTrigger !== 'undefined'; } catch (e) { }

    TabPorEnter("#frmLancamentoAnexo");
    MascararCampos("#frmLancamentoAnexo");
    FocusInicial("#frmLancamentoAnexo");
    PrepararModal("#frmLancamentoAnexo");

    $(".formulario-dica-popover").popover({ trigger: 'hover', html: true });

    var select2Mais = undefined;

    var setaValorObjetoStorage = function (urlHash) {

        var len = 0;

        for (var i = 0, len = localStorage.length; i < len; ++i)
            if (urlHash == localStorage.key(i)) {

                var x = JSON.parse(localStorage.getItem(localStorage.key(i)));

                x.valor = "1";

                if ($('#Id').val())
                    x.id = Number($('#Id').val());

                localStorage.setItem(localStorage.key(i), JSON.stringify(x));

            }

    };

    var titulo = $($("#frmLancamentoAnexo").parents('[id*="Portlet"]').find('[id*="Tab"]')[0]).find('li.active > a ').text();
    var tabP = $($($("#frmLancamentoAnexo").parents('[id*="Portlet"]').find('[id*="Tab"]')[0]).find('a')[0]).text();

    if (titulo != "" && tabP != "")
        $("#frmLancamentoAnexo").find("#ModeloFormulario").val(tabP + " -> " + titulo);
    else
        $("#frmLancamentoAnexo").find("#ModeloFormulario").val($("#frmLancamentoAnexo").parents('[id*="Portlet"]').find("div.caption").text());

    if ($("#frmLancamentoAnexo").parents("[data-m8-detalhes='true']").length == 0) {

        $("#frmLancamentoAnexoTab").on("click.show", function (e) {

            initializeTab(getTabContentFromLinkTabClick(e), '#frmLancamentoAnexo', '.frmLancamentoAnexoSubmit');

        });

    }

    $(".frmLancamentoAnexoSubmit, .frmLancamentoAnexoSubmitClose, .frmLancamentoAnexoSubmitNew").off("click").on("click", function (e) {

        e.preventDefault();

        $("#frmLancamentoAnexo").attr("data-url-retorno", $(e.currentTarget).attr("href"));
        $("#frmLancamentoAnexo").attr("data-pos-submit", $(e.currentTarget).attr("data-pos-submit"));
        $("#frmLancamentoAnexo").submit();

    });

    $("#frmLancamentoAnexo").off("submit");
    var isSubmitted = false;
    
    $("#frmLancamentoAnexo").submit(function (e) {

        e.preventDefault();
        
        if (!isSubmitted)
            isSubmitted = true;
        else
            return false;

        setTimeout(() => {

            var hash = {};
            var maskedtextboxes = $(this).find("[data-role=maskedtextbox]");

            maskedtextboxes.each(function (idx, element) {

                if (element.id) {

                    var value = element.value;
                    hash[element.id] = value;

                    if (value.indexOf("_") !== -1) {

                        element.value = value.replace(/_/g, "");
                        e.preventDefault();

                    }

                    if ($(element).is(".mascara-cpf, .mascara-cnpj, .mascara-telefone, .mascara-cep")) {

                        element.value = value.replace(/[^0-9]/g, '');
                        e.preventDefault();

                    }

                }

            });

            var acaoAposSubmit = $(this).attr("data-pos-submit");
            var seletorModal = $(this).attr("data-modal-seletor");
            var modalContainer = $(seletorModal);
            var urlRetorno = $(this).attr("data-url-retorno");

            let ajaxLoadSeletor = $($(this).attr("data-ajax-load"));

            if ($(ajaxLoadSeletor).length < 1)
                ajaxLoadSeletor = $(".ajax-loading");

            ajaxLoadSeletor.dialog("open");

            var submitData = $("#frmLancamentoAnexo").serializeArray();

            for (var element in hash)
                $(this).find("#" + element).val(hash[element]);

            try {

                if (!ffrmLancamentoAnexo._validarCamposObrigatorios()) {

                    setTimeout(() => isSubmitted = false, 500);

                    try { ajaxLoadSeletor.dialog("close"); } catch (e) { }

                    Dialog.showError('Formulário inválido', 'Alguns campos não puderam ser validados. Verifique.');

                    return false;

                }

            } catch (e) { console.info(e); }

            RequisicaoAjax(
                $("#frmLancamentoAnexo").attr("action"),
                submitData,
                function (evento) {

                    setTimeout(function () {

                        if (ValidarFormulario($("#frmLancamentoAnexo"), evento))
                            CarregarFormulario($("#frmLancamentoAnexo"), evento);

                        $("#frmLancamentoAnexo").attr("data-url-retorno", urlRetorno);
                        $("#frmLancamentoAnexo").attr("data-modal-seletor", seletorModal);

                        try { frmLancamentoAnexoAjaxSucesso(evento); } catch (e) { }

                        ajaxLoadSeletor.dialog("close");
                        setTimeout(() => isSubmitted = false, 500);

                        try {

                            if (evento.Script)
                                eval(evento.Script);

                        }
                        catch (e) { }

                        if (evento.Sucesso) {

                            if (select2Mais)
                                select2Mais(evento.Modelo.Id);

                            if (acaoAposSubmit != "novo" && urlRetorno != undefined && urlRetorno != "_blank;") {

                                if (modalContainer.length == 0 && window.frameElement !== null) {

                                    var m8hash = window.frameElement.id;

                                    setTimeout(function () {

                                        var w = window.frameElement.contentWindow.window.parent;
                                        var tab = $(window.frameElement.parentElement);

                                        if (w.FecharAba)
                                            w.FecharAba(tab, m8hash);

                                    }, 500);

                                } else
                                    setTimeout(function () { modalContainer.modal("hide"); }, 500);

                            } else if (evento.Novo && modalContainer.length == 0 && true)
                                RespostaPadraoSucessoFormulario(evento);

                            if (acaoAposSubmit == "novo" && true)
                                NovoRegistro();
                            else if (acaoAposSubmit == "fechar") {

                                var urlA = window.location.href;
                                var urlAux = urlA.split("/");

                                urlA = "";

                                for (var i = 3; i < urlAux.length; i++)
                                    urlA += "/" + urlAux[i];

                                var urlHash = urlA.hashCode();

                                setaValorObjetoStorage(urlHash);

                            }

                        }

                    }, 500);

                },
                function (evento) {

                    setTimeout(function () {

                        ajaxLoadSeletor.dialog("close");

                        setTimeout(() => isSubmitted = false, 500);

                        bootbox.alert(evento.responseText);

                        try { frmLancamentoAnexoAjaxErro(evento); } catch (e) { }

                        FocusInicial("#frmLancamentoAnexo");

                    }, 500);

                }
            );

        }, _timeoutfrmLancamentoAnexo);

    });

});

try {

    var ffrmLancamentoAnexo;

    class FfrmLancamentoAnexo extends Forms {

        constructor() {

            super("frmLancamentoAnexo");

            setTimeout(() => {

                //Load content here, with separated functions
                this._init();

            }, 500);

        }
                
        _showFormContent() {
            
            this.evFrm.closest('.m8-form-content').first().show("fast");

        }

        _validarCamposObrigatorios() {

            try {

                if (!this.evFrm.hasClass('validar-obrigatorios'))
                    return true;

                let self = this;
                let hasErrors = false;
                let fieldsObrigatorios = this.evFrm.find('.obrigatorio:visible');

                fieldsObrigatorios.each(function (i, e) {

                    let id = $(e).attr('label-for');
                    let field = $(`#${self.frmId} #${id}`);
                    let val = field.val();
                    let isData = field.attr('data-type') == 'data';

                    if ((isData && !self.validateDateField(id)) || val == undefined || val == null || val.isNullOrEmpty()) {
                        field.closest('.form-group').addClass('has-error');
                        $(`#${self.frmId} [data-valmsg-for="${id}"]`).html(`Campo Obrigatório: "${$(e).text()}"`);
                        hasErrors = true;
                    }
                    else {
                        field.closest('.form-group').removeClass('has-error');
                        $(`#${self.frmId} [data-valmsg-for="${id}"]`).html('');
                    }

                });

                return !hasErrors;

            } catch (e) {

                return true;
                console.info(e);

            }

        }

        _init() {
            
            this._showFormContent();

        }

    }

    $(() => ffrmLancamentoAnexo = new FfrmLancamentoAnexo());

} catch (e) { }</script></div><div></div>

<div id="fotoQRCode" class="form-group hidden">
    <label class="control-label col-md-2"><span class="font-dark bold text-default ">Fotos pelo Celular</span></label>
    <div class="col-lg-4 col-md-4">
        <div class="k-qrcode" id="qrCodeLancamento"></div><script>
	jQuery(function(){jQuery("#qrCodeLancamento").kendoQRCode({"errorCorrection":"M","value":"http://app.erpm8.cloud/treinamento/Financeiro/LancamentoFotoQRCodeFormulario//cGVzc29hPTg4NjA4MCZsYW5jYW1lbnRvPTc4OCZlbXByZXNhPTI=FotoQrCodeLancamento","size":120,"border":{"width":5,"color":"#000000"}});});
</script>
    </div>
</div>

<script>

    var BaixarDocumento = function (e) {
        window.location = '/treinamento/Financeiro/LancamentoAnexoDownload' + '/' + e;
    };

    $("document").ready(function () {
        $("#frmLancamentoAnexo .form-body").append('<div class="form-group"><label class="control-label col-md-2 "><span class="font-dark bold text-default ">Arquivo</span></label><div class="col-lg-10 col-md-10  "><div id=arquivo class="fileinput fileinput-new" data-provides="fileinput"><div class="input-group input-large"><div class="form-control uneditable-input input-fixed input-medium" data-trigger="fileinput"><i class="fa fa-file fileinput-exists"></i>&nbsp;<span class="fileinput-filename"> </span></div><span class="input-group-addon btn default btn-file"><span class="fileinput-new">Selecione um Arquivo</span><span class="fileinput-exists">Alterar</span><input type="file"  name=imagemArquivo></span><a href="javascript:;" class="input-group-addon btn red fileinput-exists" data-dismiss="fileinput">Remover</a></div></div></div></div>');
        $("#frmLancamentoAnexo #Descricao").closest(".form-group").before($("#fotoQRCode").closest(".form-group"));
        $("#fotoQRCode").removeClass("hidden");
        // funcoes anexo
        $("#frmLancamentoAnexo").off("submit");
        $("#frmLancamentoAnexo").submit(function (e) {
            e.preventDefault();
            var ajaxLoadSeletor = $(".ajax-loading");
            ajaxLoadSeletor.dialog("open");
            setTimeout(function () {
                var dados = new FormData($("#frmLancamentoAnexo")[0]);
                $.ajax({
                    url: '/treinamento/Financeiro/LancamentoAnexoFormulario',
                    type: 'POST',
                    data: dados,
                    async: false,
                    success: function (evento) {
                        ajaxLoadSeletor.dialog("close");
                        if (ValidarFormulario($("#frmLancamentoAnexo"), evento)) {
                            CarregarFormulario($("#frmLancamentoAnexo"), evento);
                        }
                        frmLancamentoAnexoAjaxSucesso(evento);
                    },
                    error: function (e) {
                        ajaxLoadSeletor.dialog("close");
                        setTimeout(function () {
                            bootbox.alert("Erro!<br />" + e, function () {
                            });
                        }, 500);
                    },
                    timeout: 1200000,
                    cache: false,
                    contentType: false,
                    processData: false
                });
            }, 10800);
        });

    });

</script></div></div><script type="text/javascript">
var AjustarTamanhoGridKendo = function () {
    var itens = Array.from(document.querySelectorAll('.k-grid-content'));
    var grid = Array.from(document.querySelectorAll('.m8-formulario'));
    var gridTamanho = grid[0].offsetHeight;

    itens.forEach(function myfunction(obj, i) {
        if ($(obj).closest(".modal") == undefined){
            var folga = 0;
            if (obj.parentElement.offsetTop == 0) {
                folga = 220;
            }

            var height = gridTamanho - obj.parentElement.offsetTop - 120 - folga;

            if (height < 240)
                height = 240;

            obj.parentElement.setAttribute('style', 'height: ' + height + 'px;');
            obj.setAttribute('style', 'height: ' + height + 'px;');
        }
    })

}

var RegistrarTamanhoGridKendo = function () {

    var itens = $('[data-role="grid"]');
    $(itens).each(function (indice, obj) {

        var grid = $(obj).data("kendoGrid");

        if (grid != undefined)
            grid.bind("dataBound", AjustarTamanhoGridKendo);

    });

}

var AjustarTamanhoGridKendoTimer = function () {
    setTimeout(function () {
        AjustarTamanhoGridKendo();
    }, 750);
}


$("document").ready(function () {

    setTimeout(function () {
        RegistrarTamanhoGridKendo();
        AjustarTamanhoGridKendoTimer();
    }, 3000);

    $(".nav-pills").click(function () { AjustarTamanhoGridKendoTimer() })
    $(".nav-tabs").click(function () { AjustarTamanhoGridKendoTimer() })
    $('.tools').click(function () { AjustarTamanhoGridKendoTimer() })
    $("#frmLancamentoAnexoCollapseExpand").click(function () { AjustarTamanhoGridKendoTimer() })

    $(".frmLancamentoAnexoReset").on("click", function (e) {

        LimparFormulario("#frmLancamentoAnexo");

        if ($('#frmLancamentoAnexoCollapseExpand').hasClass('expand'))
            $('#frmLancamentoAnexoCollapseExpand').click();

        setTimeout(function () {

            $("#frmLancamentoAnexo .make-switch").val("true");
            FocusInicial("#frmLancamentoAnexo");
            
        }, 100);

    });

});
</script>
                    <div class="portlet light  " id="pnlLancamentoAnexoAdicionados"><div class="portlet-title m8-portlet-title-detail  "><div class="caption m8-no-padding">
<span class="caption-subject font-grey-salsa bold uppercase"><i class=" fa-th-list fa"></i> Anexos</span></div><div class="detalhes_tools tools m8-no-padding">
<a class="collapse" href="javascript:;"> </a></div></div><div class="portlet-body  "><script type="text/javascript">var tblDetalheLancamentoAnexoExecutarDeletarRegistroListagemDetalhes = (e, button) => {

    $(".ajax-loading").dialog("open");

    RequisicaoAjax(
        button.attr("data-url-acao"),
        null,
        function (evento) {

            setTimeout(function () {

                $(".ajax-loading").dialog("close");

                if (evento.Sucesso) {

                    $("#tblDetalheLancamentoAnexo").data("kendoGrid").dataSource.read();
                    LimparFormulario("#frmLancamentoAnexo");

                    try { tblDetalheLancamentoAnexoExcluirSucesso(evento); } catch (e) { }

                    try {
                                                
                        if (evento.Script)
                            eval(evento.Script);

                        var selectorGridString = "#tblDetalheLancamentoAnexo"

                        if (selectorGridString != "#tblDetalhePessoaAnexo")
                            document.getElementById($("#tblDetalheLancamentoAnexo").closest(".tab-pane").find(".portlet.light").first().attr("id")).scrollIntoView();

                    }
                    catch (c) { }

                }
                else
                    bootbox.alert("Não foi possível excluir o registro!<br />" + evento.Mensagem);

            }, 500);

        },
        function (evento) {

            setTimeout(function () {

                $(".ajax-loading").dialog("close");
                bootbox.alert("Não foi possível excluir o registro!<br />" + evento);

            }, 500);

        }
    );

}

var tblDetalheLancamentoAnexoOnHideConfiCampos = () => {
    configurarHideConfiCampos("#frmLancamentoAnexo");
}

var tblDetalheLancamentoAnexoDeletarRegistroListagemDetalhes = function (e, button) {

    try {

        tblDetalheLancamentoAnexoIsDeletarRegistroListagemDetalhesValido(e, button, tblDetalheLancamentoAnexoExecutarDeletarRegistroListagemDetalhes);

    } catch (c) {

        bootbox.dialog({
            message: "Excluir registro?",
            closeButton: false,
            buttons: {
                danger: {
                    label: "Cancelar",
                    className: "btn-danger",
                    callback: function () { }
                },
                success: {
                    label: "Confirmar",
                    className: "btn-success",
                    callback: function () { tblDetalheLancamentoAnexoExecutarDeletarRegistroListagemDetalhes(e, button); }
                }
            }
        });

    }

}

var tblDetalheLancamentoAnexoEditarRegistroListagemDetalhes = function (e, button) {

    $(".ajax-loading").dialog("open");
    var formSeletor = "#frmLancamentoAnexo";

    RequisicaoAjax(
        button.attr("data-url-acao"),
        null,
        function (evento) {

            setTimeout(function () {

                if (evento.Sucesso) {

                    $(".ajax-loading").dialog("close");
                    AbriPainel($(formSeletor));

                    setTimeout(function () {

                        $(formSeletor).closest(".tab-pane").find(".m8-formulario-rodape").remove();
                        $(formSeletor).parent().parent().empty().html(evento.View);

                        TabPorEnter(formSeletor);
                        MascararCampos(formSeletor);
                        FocusInicial(formSeletor);
                        ConfigurarCep();
                        carregaControleInputTexto();

                        try {

                            if (evento.Script)
                                eval(evento.Script);

                            document.getElementById($("#tblDetalheLancamentoAnexo").closest(".tab-pane").find(".portlet.light").first().attr("id")).scrollIntoView();

                        }
                        catch (e) { }

                        tblDetalheLancamentoAnexoOnHideConfiCampos();

                        try {
                            tblDetalheLancamentoAnexoAjaxEditarSucesso(evento);
                        }
                        catch (e) { }

                    }, 500);

                }
                else
                    bootbox.alert("Não foi possível editar o registro!<br />" + evento.Mensagem);

            }, 500);

        },
        function (evento) {

            setTimeout(function () {

                $(".ajax-loading").dialog("close");
                bootbox.alert("Não foi possível editar o registro!<br />" + evento);

            }, 500);

        }
    );

}

var tblDetalheLancamentoAnexoOnAjaxLoadComplete = function (e) {

    $("table[role='grid'] tbody tr td a").tooltip();

    tblDetalheLancamentoAnexoConfigurarEventos();

    setTimeout(() => {
                
        setGridTelerikLink();

    }, 1500);

}

var tblDetalheLancamentoAnexoConfigurarEventos = function () {

    var BTN_EDITAR = $("#tblDetalheLancamentoAnexo [class^='btnListagemDetalheEditar']");
    var BTN_EXCLUIR = $("#tblDetalheLancamentoAnexo [class^='btnListagemDetalheExcluir']");

    BTN_EXCLUIR.off('click').on("click", function (e) {

        e.preventDefault();
        e.stopPropagation();

        tblDetalheLancamentoAnexoDeletarRegistroListagemDetalhes(e, $(this));

    });

    BTN_EDITAR.off('click').on("click", function (e) {

        e.preventDefault();
        e.stopPropagation();

        tblDetalheLancamentoAnexoEditarRegistroListagemDetalhes(e, $(this));

    });

    setTimeout(function () {

        FormatarColunaCep("#tblDetalheLancamentoAnexo .m8-cep");
        FormatarColunaTelefone("#tblDetalheLancamentoAnexo .m8-telefone");
        FormatarColunaCpfCnpj("#tblDetalheLancamentoAnexo .m8-cnpj_cpf");
        FormatarColunaNumero("#tblDetalheLancamentoAnexo .m8-numero");
        FormatarColunaDataHora("#tblDetalheLancamentoAnexo .m8-formato-data-hora");
        FormatarColunaData("#tblDetalheLancamentoAnexo .m8-formato-data");
        
        if (typeof FormatarColunaTemplate === "function")
            FormatarColunaTemplate();

    }, 500);

}

var tblDetalheLancamentoAnexoCarregarConfiguracaoGridDetalhes = function (gridId) {

    CarregarConfiguracaoGridDetalhes(gridId, '/treinamento/Home/CarregarGrid');

}

var tblDetalheLancamentoAnexoSalvarConfiguracaoGridDetalhes = function (gridId) {

    SalvarConfiguracaoGridDetalhes(gridId, '/treinamento/Home/SalvarGrid');

}

var tblDetalheLancamentoAnexoRemoverConfiguracaoGridDetalhes = function (gridId) {

    RemoverConfiguracaoGridDetalhes(gridId, '/treinamento/Home/RemoverGrid');

}

$("document").ready(function () {

    $("div[data-role='popup'].k-list-container.k-popup.k-group.k-reset").remove();

    setTimeout(function () {


        try {
            GridAjusteDataBound("#tblDetalheLancamentoAnexo");
        } catch (e) { }
        
        $("#tblDetalheLancamentoAnexo").data("kendoGrid").thead.kendoTooltip({
            filter: "th",
            content: function (e) {

                var target = e.target;
                var tip = $(target).find('a.k-link').data("m8-tooltip");

                return tip ? tip : $(target).text();

            }
        });

        var componente = $("#tblDetalheLancamentoAnexo").closest(".tab-pane").children().find(".detalhes_tools");
        var adicionarBotaoSalvar = componente.length > 0;

        if (adicionarBotaoSalvar) {

            if (componente.parent().find('a[title="Salvar Configurações"]').html() == undefined)
                componente.after('' +
                    '<div class="tools m8-no-padding">' +
                    '   <a class="botao-barra-pesquisa btn btn-default" onclick="tblDetalheLancamentoAnexoSalvarConfiguracaoGridDetalhes(\'tblDetalheLancamentoAnexo\')" title="Salvar Configurações">' +
                    '       <i class="tblDetalheLancamentoAnexobntConfiguracaoPreferencia fa fa-save fa-pesquisa-cinza"></i>' +
                    '   </a>' +
                    '</div>');

            if (componente.parent().find('a[title="Remover Configurações"]').html() == undefined)
                componente.after('' +
                    '<div class="tools m8-no-padding">' +
                    '   <a class="botao-barra-pesquisa btn btn-default" onclick="tblDetalheLancamentoAnexoRemoverConfiguracaoGridDetalhes(\'tblDetalheLancamentoAnexo\')" title="Remover Configurações">' +
                    '       <i class="fa fa-trash fa-pesquisa-cinza"></i>' +
                    '   </a>' +
                    '</div>');

        }

        if (true)
            tblDetalheLancamentoAnexoCarregarConfiguracaoGridDetalhes('tblDetalheLancamentoAnexo');

    }, 500);

});

try {

    const PERMITE_REDIMENCIONAR = false;
    const AJUSTE_REDIMENCIONAR = 0;

    var gtblDetalheLancamentoAnexo;

    class LDTtblDetalheLancamentoAnexo {

        constructor() {
            
            this.inResize = false;
            this.gridId = 'tblDetalheLancamentoAnexo';

            setTimeout(() => {
                
                //Load content here, with separated functions
                this._setResizable();

            }, 500);

        }

        _setResizable() {
            
            if (PERMITE_REDIMENCIONAR) {

                let portletBody = $(`#${this.gridId}`).parent('div.portlet-body');

                if (portletBody) {

                    portletBody.css('min-height', '370px');
                    portletBody.css('resize', 'vertical');
                    portletBody.css('overflow', 'auto');
                    portletBody.attr('grid-id', this.gridId);

                    Grid.setDataBound(this.gridId, () => this._onResizePortletBody(this, AJUSTE_REDIMENCIONAR));
                    new ResizeObserver(() => this._onResizePortletBody(this, AJUSTE_REDIMENCIONAR)).observe(portletBody[0]);

                }

            }

        }

        _onResizePortletBody(self, ajusteRedimencionar) {
            
            if (!self.inResize) {

                self.inResize = true;

                setTimeout(() => {

                    self.inResize = false;
                    Grid.setHeight(self.gridId, `div.portlet-body[grid-id="${self.gridId}"]`, (-100) + (ajusteRedimencionar ?? 0));

                }, 1500);

            }

        }

    }

    $(() => gtblDetalheLancamentoAnexo = new LDTtblDetalheLancamentoAnexo());

} catch (e) { }</script><div class="k-widget k-grid " detalhes="False" id="tblDetalheLancamentoAnexo" style="height:349px;"><div class="k-toolbar k-grid-toolbar k-grid-top"><div><div></div></div></div><div class="k-grouping-header">Arraste um cabeçalho da coluna e solte-o aqui para agrupar!</div><div class="k-grid-header"><div class="k-grid-header-wrap"><table><colgroup><col style="width:140px" /><col style="width:120px" /><col /><col style="width:95px" /></colgroup><tr><th class="k-header" data-field="AcaoBtn" data-groupable="false" data-title="Ações" scope="col" style="text-align:center;"><span class="k-link">Ações</span></th><th class="k-header " col-ordem="-1" data-field="Id" data-title="Código" scope="col" style=""><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Código identificador único'>Código</a></th><th class="k-header " col-ordem="2" data-field="Descricao" data-title="Descrição" scope="col" style="min-width:50px;"><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Descrição'>Descrição</a></th><th class="k-header " col-ordem="999999" data-field="ExcluidoPeloUsuarioId" data-title="Usuário" scope="col" style="text-align:center;"><a class='k-link m8-cabecalho-coluna' href='javascript:;' data-m8-tooltip='Usuário'>Usuário</a></th></tr></table></div></div><div class="k-grid-content" style="height:200px"><table><colgroup><col style="width:140px" /><col style="width:120px" /><col /><col style="width:95px" /></colgroup><tbody><tr class="k-no-data"><td colspan="4"></td></tr></tbody></table></div><div class="k-pager-wrap k-grid-pager"><a class="k-pager-refresh k-link" href="/treinamento/Financeiro/LancamentoAnexosPesquisaGrid/788?campoFk=788" title="Atualizar"><span class="k-icon k-i-refresh">Atualizar</span></a><span class="k-pager-info k-label">N&#227;o existem registros para mostrar!</span></div></div><script>
	jQuery(function(){jQuery("#tblDetalheLancamentoAnexo").kendoGrid({"dataBound":tblDetalheLancamentoAnexoOnAjaxLoadComplete,"columns":[{"title":"Ações","attributes":{"style":"text-align:center;"},"menu":false,"width":"140px","template":"\u003cbutton class=\"btnListagemDetalheEditar290266 btn btn-editar-listagem botao-tabela-padrao btn btn-xs  \" data-placement=\"top\" data-url-acao=\"/treinamento/Financeiro/LancamentoAnexoEditar/#=Id#\" title=\"Editar\" type=\"button\"\u003e\u003cimg src=\"/Content/gestao/img/editar.png\" style=\"height:17px;\"\u003e\u003c/img\u003e\u003c/button\u003e \u003cbutton class=\"btnListagemDetalheExcluir499314 btn btn-excluir-listagem botao-tabela-padrao btn btn-xs  \" data-placement=\"top\" data-url-acao=\"/treinamento/Financeiro/LancamentoAnexoExcluir/#=Id#\" title=\"Excluir\" type=\"button\"\u003e\u003cimg src=\"/Content/gestao/img/excluir.png\" style=\"height:17px;\"\u003e\u003c/img\u003e\u003c/button\u003e \u003ca class=\"btn btn btn-xs \" data-placement=\"top\" data-toggle=\"tooltip\" href=\"javascript:;\" onclick=\"BaixarDocumento(\u0027#=Id#\u0027, this);return false;\" title=\"Baixar arquivo\"\u003e\u003cimg src=\"/Content/gestao/img/download-listas.png\" style=\"height:17px;\"\u003e\u003c/img\u003e\u003c/a\u003e \u003cbutton class=\"btnListagemDetalheRestaurar47342 btn btn-restaurar-listagem botao-tabela-padrao btn btn-xs  \" data-placement=\"top\" data-url-acao=\"/treinamento/Financeiro/RestaurarRegistro/#=Id#__U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdGAxW1tNOC5GbG9yZXN0YWwuVmlzdWFsLldlYi5Nb2RlbG9zLkZpbmFuY2Vpcm8uTGFuY2FtZW50b0FuZXhvTW9kZWxvLCBNOC5GbG9yZXN0YWwuVmlzdWFsLldlYiwgVmVyc2lvbj0xLjAuMC4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPW51bGxdXSwgbXNjb3JsaWIsIFZlcnNpb249NC4wLjAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iNzdhNWM1NjE5MzRlMDg5\" title=\"Restaurar Registro\" type=\"button\"\u003e\u003cimg src=\"/Content/gestao/img/restaurar-registro.svg\" style=\"height:17px;\"\u003e\u003c/img\u003e\u003c/button\u003e ","field":"AcaoBtn","groupable":false,"sortable":false,"filterable":false,"encoded":true},{"title":"Código","attributes":{"class":"","style":""},"footerAttributes":{"class":"","style":""},"menu":false,"width":"120px","field":"Id","filterable":{},"encoded":true},{"title":"Descrição","attributes":{"class":"","style":""},"footerAttributes":{"class":"","style":""},"field":"Descricao","filterable":{},"encoded":true},{"title":"Usuário","attributes":{"class":"","style":"text-align:center;"},"footerAttributes":{"class":"","style":"text-align:center;"},"width":"95px","template":"\r\n                \u003ca class=\u0027#\r\n                    if (EstaExcluido) {\r\n                        if (ExcluidoPeloUsuarioId) {\r\n                            #m8-usuario-excluiu-id\u0027 data-m8-excluiu-id=\u0027#=ExcluidoPeloUsuarioId#\u0027\u003e#=ExcluidoPeloUsuarioId##\r\n                        } else {\r\n                            #m8-usuario-excluiu-id\u0027 data-m8-excluiu-id=\u0027#=AtualizadoPeloUsuarioId#\u0027\u003e#=AtualizadoPeloUsuarioId##\r\n                        }\r\n                    }\r\n                    else {\r\n                        #m8-usuario-atualizou-id\u0027 data-m8-atualizou-id=\u0027#=AtualizadoPeloUsuarioId#\u0027\u003e#=AtualizadoPeloUsuarioId##\r\n                    }\r\n                #\u003c/a\u003e","field":"ExcluidoPeloUsuarioId","filterable":{},"encoded":true}],"groupable":{"messages":{"empty":"Arraste um cabeçalho da coluna e solte-o aqui para agrupar!"}},"pageable":{"numeric":false,"previousNext":false,"refresh":true,"buttonCount":10,"messages":{"display":"{2} registros","empty":"Não existem registros para mostrar!","itemsPerPage":"Registros por Página","first":"ListagemTelerik.BotaoVoltarInicio","previous":"Anterior","next":"Próximo","last":"Último","refresh":"Atualizar","morePages":"Mais Páginas"}},"sortable":true,"filterable":{"messages":{"info":"Mostrar registro com valor:","isTrue":"Verdadeiro","isFalse":"Falso","filter":"Filtro","clear":"Limpar","and":"E","or":"Ou","selectValue":"Selecione o Valor:","cancel":"Cancelar"},"operators":{"string":{"eq":"Igual a","neq":"Diferente de","startswith":"Inicia com","endswith":"Termina com","contains":"Contém","doesnotcontain":"Não Contém"},"number":{"eq":"Igual a","neq":"Diferente de","gte":"É Maior ou Igual a","gt":"É Maior que","lte":"É Menor ou Igual a","lt":"É Menor que"},"date":{"eq":"Igual a","neq":"Diferente de","gte":"É Maior ou Igual a","gt":"É Maior que","lte":"É Menor ou Igual a","lt":"É Menor que"},"enums":{"eq":"Igual a","neq":"Diferente de"}}},"columnMenu":{"messages":{"filter":"Filtro","columns":"Colunas","sortAscending":"Ordem Ascendente","sortDescending":"Ordem Descendente","settings":"ListagemTelerik.Configuracoes","lock":"Bloquear","unlock":"Desbloquear"}},"resizable":true,"reorderable":true,"toolbar":{},"dataSource":{"type":(function(){if(kendo.data.transports['aspnetmvc-ajax']){return 'aspnetmvc-ajax';} else{throw new Error('The kendo.aspnetmvc.min.js script is not included.');}})(),"transport":{"read":{"url":"/treinamento/Financeiro/LancamentoAnexosPesquisaGrid?campoFk=788"},"prefix":""},"pageSize":1000000,"page":1,"total":0,"serverPaging":true,"serverSorting":true,"serverFiltering":true,"serverGrouping":true,"serverAggregates":true,"filter":[],"schema":{"data":"Data","total":"Total","errors":"Errors","model":{"fields":{"PessoaId":{"type":"number"},"UrlQrcodeAnexo":{"type":"string"},"LancamentoId":{"type":"number"},"ArquivoDigitalId":{"type":"number"},"Descricao":{"type":"string"},"Documento":{"type":"object"},"FormatoDocumento":{"type":"string"},"EmEdicao":{"type":"boolean"},"ExibirRodape":{"type":"boolean"},"CompletarMargensLaterais":{"type":"boolean"},"TabelaBancoDados":{"type":"string"},"ModeloJson":{"type":"string"},"ModeloFormulario":{"type":"string"},"UsuarioEmEdicao":{"type":"string"},"DataCadastro":{"type":"date"},"AtualizadoPeloUsuarioId":{"type":"number"},"UsuarioCadastrouId":{"type":"number"},"ExcluidoPeloUsuarioId":{"type":"number","defaultValue":null},"Id":{"type":"number","defaultValue":null},"AcaoBtn":{"editable":false,"type":"number","defaultValue":null},"EstaExcluido":{"type":"boolean"},"UsuarioAtualizacao":{"type":"string"},"UsuarioCadastro":{"type":"string"},"UsuarioExcluiu":{"type":"string"},"DataAtualizacao":{"type":"date"},"PropriedadesPersonalizadas":{"type":"object"}}}}}});});
</script></div></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

    AcertarMenuInterno($('#frmLancamento #Id').val());

    var ObterFiltroContabilizacao = function () {
        var id = $("#frmLancamento #Id").val();
        var origem = 1;
        var obj = { id: id, origem: origem };
        return obj;
    };

    var frmLancamentoAjaxSucesso = function (evento) {
        if (evento.Sucesso) {
            $("#frmLancamentoTab li").not(".active").removeClass("hidden");
        }
    };

    var frmLancamentoAjaxErro = function (evento) {
    };

    var ConfigurarComponentes = function (form) {
        TabPorEnter(form);
        MascararCampos(form);
        FocusInicial(form);
        $("[id^='ClickImprimirEspelhoCompra']").off("click");
        $("[id^='ClickFinalizar']").off("click");
    };

    // funcoes anexo
    var frmLancamentoAnexoAjaxSucesso = function (evento) {
        if (evento.Sucesso) {
            var kendoGrid = $("#tblDetalheLancamentoAnexo").data("kendoGrid");
            kendoGrid.dataSource.read();
            AbriPainel($("#tblDetalheLancamentoAnexo").parent());
            $('.fileinput').fileinput('clear');
            $('.frmLancamentoAnexoReset').click();
        }
    };
    var frmOrdemServicoAnexoAjaxErro = function (evento) {
    };
    var BaixarDocumento = function (e) {
        window.location = '/treinamento/Financeiro/LancamentoAnexoDownload' + '/' + e;
    };
    // fim funcoes anexo

    // funcoes centro custo
    var frmLancamentoCentroCustoAjaxSucesso = function (evento) {
        if (evento.Sucesso) {
            var kendoGrid = $("#tblDetalheLancamentoCentroCusto").data("kendoGrid");
            kendoGrid.dataSource.read();

            $('.frmLancamentoCentroCustoReset').click();
            AtualizarGridContabilizacoes();
        }
    };

    var frmLancamentoCentroCustoAjaxErro = function (evento) {
    };
    // fim funcoes centro custo

    var ObterOperacaoFinanceiraContaContabilCXE = function (operacaoFinanceiraId) {
        if (!operacaoFinanceiraId)
            return;
        var ajaxLoadSeletor = $("#ajaxLoadSaidaCaixaAbas.ajax-loading");
        ajaxLoadSeletor.dialog("open");
        RequisicaoAjax(
            '/treinamento/Financeiro/ObterOperacaoFinanceiraContaContabil',
            { operacaoFinanceiraId: operacaoFinanceiraId },
            function (evento) {
                ajaxLoadSeletor.dialog("close");
                if (evento.Sucesso) {
                    if (evento.ContaContabilId) {
                        var opcaoConta = new Option(evento.ContaContabilNome, evento.ContaContabilId, true, true);
                        $("#frmLancamento #ContaCaixaBancoOrigemId").append(opcaoConta);
                        $("#frmLancamento #ContaCaixaBancoOrigemId").trigger('change');
                    }
                    if (evento.HistoricoContabilId) {
                        var opcaoHistorico = new Option(evento.HistoricoContabilNome, evento.HistoricoContabilId, true, true);
                        $("#frmLancamento #HistoricoContabilId").append(opcaoHistorico);
                        $("#frmLancamento #HistoricoContabilId").trigger('change');

                    }
                } else {
                    bootbox.alert(evento.Mensagem);
                }
            },
            function (evento) {
                ajaxLoadSeletor.dialog("close");
                setTimeout(function () {
                    bootbox.alert("Erro!<br />" + evento, function () {
                    });
                }, 500);
            }
        );
    };
    $("document").ready(function () {

        $('.m8-link-lote').on('click', function () {
            var loteId = $(this).data("lote-id");
            PaginaPrincipal.AbrirNovaAba("...", '/treinamento/Contabil/ContabilLote' + "/" + loteId);
        })

        if ($("#frmLancamento #Id").val() != 0)
            $("#frmLancamentoTab li").removeClass("hidden");

        $("#LancamentoEntradaCaixaContabilizacaoTab").hide();

        setTimeout(function () {

            ConfigurarComponentes("#frmLancamento");
            ConfigurarComponentes("#frmLancamentoCentroCusto");
            ConfigurarComponentes("#frmContabilizacaoLancamento");
            //CaluloAlturaScrollConteudo();

            if ($("#frmLancamento #Id").val() > 0)
                $("#LancamentoEntradaCaixaContabilizacaoTab").show();

            var gridContabilizacao = $("#tblContabilizacaoLancamento").data("kendoGrid");
            gridContabilizacao.bind("dataBound", ConfigurarGridContabilizacao);
            AjustarAlturaGrid("#ContentScroll");

            AjustarDreFinanceira('False', '#frmLancamento #DataLancamento', '#frmLancamento #Competencia');
            $("#frmLancamento #OperacaoFinanceiraId").on('change', function (e) {
                var operacaoFinanceiraId = $(e.target).val();
                ObterOperacaoFinanceiraContaContabilCXE(operacaoFinanceiraId);
            });
            RegistrarDependencia("#frmLancamento #OperacaoFinanceiraId", "#frmLancamento #ContaCaixaBancoOrigemId");

        }, 500);

    });

    var AtualizarGridContabilizacoes = function () {
        var kendoGrid = $("#tblContabilizacaoLancamento").data("kendoGrid");
        if (kendoGrid && kendoGrid.dataSource) {
            kendoGrid.dataSource.read();
        }
    }

    var ConfigurarGridContabilizacao = function (e) {

        var rows = e.sender.tbody.children();
        var totalCredito = 0.0;
        var totalDebito = 0.0;

        for (var j = 0; j < rows.length; j++) {
            var row = $(rows[j]);
            var dataItem = e.sender.dataItem(row);

            var natureza = dataItem.get("Natureza");
            var valor = dataItem.get("Valor");
            if (natureza == -1)
                totalDebito += valor;
            else
                totalCredito += valor;

            if (dataItem.get("InformarCentroCusto") != '0') {
                row.addClass("m8-bold-line");
                this.expandRow(row);
            } else {
                row.find(".m8-botao-coluna").hide();
                row.find('.k-hierarchy-cell a').css({ opacity: 0.3, cursor: 'default' }).click(function (e) { e.stopImmediatePropagation(); return false; });
            }
        }
        kendo.culture("pt-BR");
        $("#totalCredito").text("R$ " + kendo.toString(totalCredito, "n2"));
        $("#totalDebito").text("R$ " + kendo.toString(totalDebito, "n2"));

        var footer = $('#m8-manual-footer').detach();
        $("#tblContabilizacaoLancamento .k-grid-content").after(footer);
        footer.removeClass("hide");

    };

</script>
</div></div></div><script type="text/javascript">var GetConfigCamposOcultos = () => {
    
    let result = null;

    try {

        result = GestaoNewFacePreferences.GetHiddenFields();

    }
    catch (err) {

        console.info(err)
        result = null;

    }

    if (result == null)
        return;

    try {

        var divConfigCamposOcultosId = "ConfigCamposOcultosfrmLancamento";
        var divConfigCamposObrigatoriosId = "ConfigCamposObrigatoriosfrmLancamento";
        var divConfigCamposBloqueadosId = "ConfigCamposBloqueadosfrmLancamento";

        var tabContent = $("#frmLancamento").parents(".tab-content").first();

        tabContent.prepend("<div id='" + divConfigCamposOcultosId + "' class='display-none'></div>");
        tabContent.prepend("<div id='" + divConfigCamposObrigatoriosId + "' class='display-none'></div>");
        tabContent.prepend("<div id='" + divConfigCamposBloqueadosId + "' class='display-none'></div>");

        for (var i = 0; i < result.Forms.length; i++) {

            let formId = result.Forms[i].FormId;

            tabContent.find("#" + divConfigCamposOcultosId).append("<div class='display-none " + formId + "'>" + result.Forms[i].Ocultos + "</div>");
            tabContent.find("#" + divConfigCamposObrigatoriosId).append("<div class='display-none " + formId + "'>" + result.Forms[i].Obrigatorios + "</div>");
            tabContent.find("#" + divConfigCamposBloqueadosId).append("<div class='display-none " + formId + "'>" + result.Forms[i].Bloqueados + "</div>");

            var arrayOcultos = JSON.parse(result.Forms[i].Ocultos);            
            for (var j = 0; j < arrayOcultos.length; j++) {
                try {
                    var group = $(arrayOcultos[j]).parents(".form-group").first();
                    if (!group.find("label").hasClass("bold") && !group.find("span").hasClass("bold")) {
                        group.hide();
                        try { window[`${arrayOcultos[j].replaceAll("#", "").replaceAll(" ", "")}GroupHide`](group); } catch (e) { }
                    }
                } catch (e) {
                    console.log("M8.Visual.Web.Framework.Componentes.Scripts.PaginaPortletFormularioScripts.js - GetConfigCamposOcultos/Ocultos");
                    console.log(e);
                }
            }

            var arrayObrigatorios = JSON.parse(result.Forms[i].Obrigatorios);
            for (var j = 0; j < arrayObrigatorios.length; j++) {
                try {
                    let field = arrayObrigatorios[j];
                    let labelObrigar = $(`#${formId} #${field}`).closest('.form-group').find('.control-label');
                    labelObrigar.addClass('obrigatorio');
                    labelObrigar.attr('label-for', field);
                    try { window[`${formId}${field}SetObrigatorio`](formId, field); } catch (e) { }
                } catch (e) {
                    console.log("M8.Visual.Web.Framework.Componentes.Scripts.PaginaPortletFormularioScripts.js - GetConfigCamposOcultos/Obrigatorios");
                    console.log(e);
                }
            }

            var arrayBloqueados = JSON.parse(result.Forms[i].Bloqueados);
            for (var j = 0; j < arrayBloqueados.length; j++) {
                try {
                    let field = arrayBloqueados[j];
                    let isSelect = $(field).hasClass("select2-hidden-accessible")
                    if (isSelect) {
                        HabilitarDesabilitarSelect2Extra(field, false, true, false, true, true);
                    } else {
                        HabilitarDesabilitarExtra(field, false, true, false);
                    }
                } catch (e) {
                    console.log("M8.Visual.Web.Framework.Componentes.Scripts.PaginaPortletFormularioScripts.js - GetConfigCamposBloqueados/Bloqueados");
                    console.log(e);
                }
            }

        }

    } catch (e) {

        console.log("M8.Visual.Web.Framework.Componentes.Scripts.PaginaPortletFormularioScripts.js - GetConfigCamposOcultos");
        console.log(e);

    }

}

$(() => setTimeout(GetConfigCamposOcultos, 1000));</script></div>


<script type="text/javascript">

    class LancamentoEntradaCaixa extends Forms {

        constructor() {

            super("frmLancamento");

            setTimeout(() => {

                this.setDataValorTitulo();

            }, 500);

        }

        imprimirRecibo() {

            let id = this.evFrm.find('#Id').val();

            if(id)
                Ajax.post({
                    url: '/treinamento/Financeiro/LancamentoImprimirRecibo',
                    data: { id: id },
                    showFalha: true,
                    showLoad: true,
                    fnSucesso: (r) => Aba.abrir({ titulo: r.Titulo, url: r.Relatorio })
                });

        }

        gerarRecibo() {

            let id = this.evFrm.find('#Id').val();

            if(id)
                Ajax.post({
                    url: '/treinamento/Financeiro/LancamentoGerarRecibo',
                    data: { id: id, tipoRecibo: 2 },
                    showFalha: true,
                    showLoad: true,
                    fnSucesso: (r) => Aba.abrir({ url: '/treinamento/Financeiro/Recibo', id: r.Id })
                });

        }

        getParametroUrl(nome) {
            var url = new URL(window.location.href);
            return url.searchParams.get(nome);
        }

        setDataValorTitulo() {
            var valor = this.getParametroUrl('valor');
            var data = this.getParametroUrl('data');

            if (valor)
                $("#frmLancamento #ValorLancamento").val(valor);

            if (data)
                $("#frmLancamento #DataLancamento").val(data);
        }

    }

</script>

<script type="text/javascript">

    var lancamentoEntradaCaixa;

    $(() => lancamentoEntradaCaixa = new LancamentoEntradaCaixa());

</script>

        </div>

    </div>

    <style>

        .scroll-to-top {
            bottom: 80px;
            z-index: 299;
        }

        .page-footer {
            padding: 0px;
            margin: 0px;
            height: 0px;
        }
    </style>

    <div class="page-footer"><div class="scroll-to-top"><i class="icon-arrow-up"></i></div></div>

    <script>

        setTimeout(() => {

            function scrolling() {

                let duration = 250;

                if ($(this).scrollTop() > 100)
                    $('.scroll-to-top').fadeIn(duration);
                else
                    $('.scroll-to-top').fadeOut(duration);

            }

            if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {

                $(window).bind("touchend touchcancel touchleave", scrolling);
                $('.m8-formulario').bind("touchend touchcancel touchleave", scrolling);

            }
            else {

                $(window).scroll(scrolling);
                $('.m8-formulario').scroll(scrolling);

            }

            $(".scroll-to-top").off('click').click(function (e) {

                e.preventDefault();
                $("html, body, .m8-formulario").animate({ scrollTop: 0 }, 250);

            });

        }, 1000);

    </script>

    

    <script>

        var ClickCopiarLancamento = function (e) {
            var id = $("#frmLancamento #Id").val();
            if (!id)
                return;
            var ajaxLoadSeletor = $(".ajax-loading");
            ajaxLoadSeletor.dialog("open");
            RequisicaoAjax('/treinamento/Financeiro/LancamentoFinanceiroCopiar', { id: id },
               function (evento) {
                   ajaxLoadSeletor.dialog("close");
                   if (evento.Sucesso) {
                       Notificacao.Sucesso(evento.Mensagem);
                       setTimeout(function () {
                           var PaginaPrincipal = window.parent;
                           var uri = "/treinamento/Financeiro/LancamentoEntradaCaixa/788".replace("/" + id, "/" + evento.Valor.id);
                           PaginaPrincipal.AbrirNovaAba("...", uri);
                       }, 2000);
                   } else {
                       bootbox.alert(evento.Mensagem);
                   }
               },
               function (evento) {
                   setTimeout(function () {
                       ajaxLoadSeletor.dialog("close");
                       bootbox.alert("Erro!<br />" + evento, function () {
                       });
                   }, 500);
               });
        };

        var ClickCentroCustoContabilizacao = function (e) {
            setTimeout(function () {
                ConstruirModal("frmCentroCustoContabilizacaoModal",
                               "btnAbrirCentroCustoContabilizacao",
                               'Cadastro de Contabilização',
                               '/treinamento/Contabil/ContabilizacaoLancamentoCentroCustoModal',
                                { id: e },
                               function (e) {
                                   setTimeout(function () {
                                       var formSeletor = $(".btnAbrirCentroCustoContabilizacao").attr("data-form");
                                       $(formSeletor).attr("data-modal-seletor", "#frmCentroCustoContabilizacaoModal");
                                       FocusInicial(formSeletor);
                                   }, 500)
                               },
                                function (e) {
                                    $("#tblContabilizacaoLancamento").data("kendoGrid").dataSource.read();
                                },
                               "#ajaxLoadLancamentoEntradaCaixas",
                               "",
                               true,
                               true
                               );
            }, 500);
        };

    </script>



    <script>

        var CaluloAlturaScrollConteudo = function () {
            
            var rodape = $("#ContentRodape").outerHeight();

            if (rodape != null) {
                
                $("#ContentScroll").height($("#pnlPrincipal").outerHeight() - (rodape));
                $("#pnlPrincipal").attr("style", "");

            }

        }

        var PaginaPrincipal = window.parent;

        var abrirNovaAba = function (owner) {

            if ($(owner).attr("href") != undefined) {

                $(owner).click(function (e) {

                    e.preventDefault();

                    if (typeof PaginaPrincipal.AbrirNovaAba === "function")
                        if ($(owner).attr("href") != 'javascript:;')
                            PaginaPrincipal.AbrirNovaAba("novo", $(owner).attr("href"));

                });

            }

        }

        var AjustarConteudoMeio = function (iframe, altura) {

            let conteudoFrame = $(iframe).contents();
            let conteudoPortlet = conteudoFrame.find(".portlet");
            let conteudoMeio = conteudoFrame.find(".k-widget.k-grid:not(.nao-ajustar)");

            if (conteudoFrame.find(".m8-formulario").length > 0)
                conteudoMeio = conteudoFrame.find(".m8-formulario");

            conteudoPortlet.css("margin-bottom", 0);

            if (conteudoMeio && conteudoMeio.length > 0) {

                let availableHeight = altura - (conteudoPortlet.outerHeight() - conteudoMeio.outerHeight()) - 2;

                conteudoMeio.each((i, e) => {

                    let ev = $(e);

                    if (!ev.parent().hasClass('k-detail-cell'))
                        ev.height(availableHeight);
                });

            }

        };

        var AjustarIFrame = function (iframeID) {

            var iframe = window.parent.document.getElementById(iframeID);

            $('.page-container').height(iframe.offsetHeight + 'px');

            AjustarConteudoMeio(iframe, iframe.offsetHeight);
            CaluloAlturaScrollConteudo();

            if (typeof AjustarConteudoIFrame === "function")
                AjustarConteudoIFrame(iframe);

            if (typeof AjustarConteudoIFrameInterno === "function")
                AjustarConteudoIFrameInterno();

        }

        var ExecutarFuncoes = function (funcao) {

            eval(funcao);

        }

        var ExecutarFuncoesComRetorno = function (funcao) {

            return eval(funcao);

        }

        var FecharAbaPai = function (timeout) {

            if (!timeout)
                timeout = 300;

            var m8hash = window.frameElement.id;

            setTimeout(function () {

                var w = window.frameElement.contentWindow.window.parent;
                var tab = $(window.frameElement.parentElement);

                if (w.FecharAba)
                    w.FecharAba(tab, m8hash);

            }, timeout);

        };

        var AjustarBotoesBarraFerramenta = function () {

            var barra = $('.dropdown-menu.m8-acoes-formulario');

            if (barra) {

                var tamanhoAtual = barra.outerHeight();

                if (tamanhoAtual > 450) {

                    $('ul.dropdown-menu.m8-acoes-formulario').css('height', '450');
                    $('ul.dropdown-menu.m8-acoes-formulario').css('overflow-y', 'scroll');

                }

            }

        };

        jQuery(document).ready(function () {

            Notificacao.init();

            let usuario = 'Ryan Nunes';

            let preeencharEmpresa = ($("#Id").val() == "" || $("#Id").val() == "0")
                && ($("form").find("#EmpresaId").length > 0 || $("form").find("#EstabelecimentoId").length > 0 || $("form").find("#EmpresaGrupoId").length > 0);

            if (usuario != '' && preeencharEmpresa)
                PreencheSelectEmpresa("/treinamento/Home/EmpresaSelecionada");

            $(".m8-toolbar .btn ").each(function (idx) {

                abrirNovaAba(this);

            });

            $(".btn-adicionar").each(function (idx) {

                abrirNovaAba(this);

            });

            if (localStorage.getItem('LogDadosSistema') == 'True') {
                $(".btn-log").remove();
            }

            if (PaginaPrincipal && PaginaPrincipal.MudarTituloPagina) {

                var titulo = $(".m8-portlet-title .caption-subject ").text();
                var formularioId = $(".m8-form-content:first #Id");
                var tituloForm = "";

                if ($(".m8-form-content:first #Id").length > 0) {

                    var fID = formularioId.val() ? formularioId.val() : "Novo";
                    tituloForm = ": " + fID;

                }

                titulo += tituloForm;
                PaginaPrincipal.MudarTituloPagina(window.frameElement.id, titulo);

            }

            kendo.culture("pt-BR");
            
            AjustarData(".mascara-data");

            $(".mascara-data").each(function (indice, objeto) {
                
                var nomeObjeto = objeto.name;

                if (nomeObjeto != "DataAniversario" && nomeObjeto != undefined && nomeObjeto.readonly != "readonly")
                    setTimeout(function () {

                        $(objeto).kendoDatePicker({ format: "dd/MM/yyyy", culture: "pt-BR" });
                        $(objeto).on("blur", function () { FormatarUltimaDataValida($(objeto)); });

                    }, 1000);

            });

            $(".mascara-mes-ano").each(function (indice, objeto) {

                var nomeObjeto = objeto.name;

                if (nomeObjeto != undefined && nomeObjeto.readonly != "readonly")
                    setTimeout(function () { $(objeto).kendoDatePicker({ format: "MM/yyyy", culture: "pt-BR" }); }, 1000);

            });

            $(".mascara-monetario18_2").on("focus", function () {

                $(this)[0].setSelectionRange(0, $(this).val().length);

            });

            AjustarBotoesBarraFerramenta();

        });

    </script>

    <script>
        $(() => {

            GestaoNewFace.LayoutPaginas();

            try { $("body").attr("data-uadm", `${localStorage.getItem("u-adm")}`); } catch (e) { }

            try {
                var $pageOwner = $(window.top.document.body);

                if ($pageOwner.hasClass("--nf-module-page-owner")) {
                    $("body").attr("data-new-menu-concept", "1");
                    $('body').on('click', (e) => {
                        try {
                            if (
                                !!$pageOwner.find(".--nf-menu-rside").length &&
                                (
                                    $pageOwner.find("#conteudo-menu-logo").is(":visible") ||
                                    $pageOwner.find("#conteudo-menu .row.--screen-notebook").is(":visible") ||
                                    $pageOwner.find(".--nf-menu-rside-content").is(":visible")
                                )
                            ) {
                                setTimeout(function () {
                                    $pageOwner.find("#menu-horizontal-template").click();
                                }, 100);
                            }
                        } catch (error) { console.log(error); }
                    });
                }

                setTimeout(() => {
                    $(".k-grid").each(function (index) {
                        if (!!!$(this).attr("detalhes")) GridAjusteDataBound("#" + this.id);
                    });                    
                }, 3000);
                
            } catch {
            }

        });
    </script>

</body>

</html>